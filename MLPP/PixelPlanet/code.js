function initNLRM(){'use strict';document['head']['appendChild'](az({'type':'style','html':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20.text-button{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.minimap{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:bold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:22px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.NLRGeneral{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:arial;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:normal;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.minimap-display{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top\x20:0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width\x20:100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.settings-option{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.settings-option:hover{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,240,240,0.75);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.sub-settings{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:inline-block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.tooltip\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#b3c9ce;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font:\x20italic\x2014px/1.3\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x203px\x203px\x203px\x20rgba(0,\x200,\x200,\x20.3);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'}));{let aC=document['createElement']('div');aC['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;\x20display:none;';aC['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20style\x20=\x20\x22color:inherit;border:0;cursor:pointer;margin:0;display:inline-flex;outline:0;padding:0;position:relative;align-items:center;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;justify-content:center;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent;flex:0\x200\x20auto;color:\x20rgba(0,\x200,\x200,\x200.54);padding:\x2012px;overflow:\x20visible;font-size:\x201.5rem;text-align:\x20center;transition:\x20background-color\x20150ms\x20cubic-bezier(0.4,\x200,\x200.2,\x201)\x200ms;border-radius:\x2050%;\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style\x20=\x20\x22width:100%;display:flex;align-items:inherit;justify-content:inherit;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:25px;height:25px;padding:10px;background:rgba(0,0,0,0.5);border-radius:15px;-moz-border-radius:15px;color:white;font-family:Roboto,sans-serif;font-size:20px;font-weight:bold;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22></img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style\x20=\x20\x22top:0;left:0;right:0;bottom:0;overflow:hidden;position:absolute;border-radius:inherit;pointer-events:none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['body']['appendChild'](aC);aC['addEventListener']('click',()=>{let aD=an('settingsDiv');am(aD);if(aD['style']['display']==='block'){aD['style']['left']=(window['innerWidth']-aD['offsetWidth']>>>0x1)+'px';aD['style']['top']=(window['innerHeight']-aD['offsetHeight']>>>0x1)+'px';};});};Number['prototype']['between']=function(aD,aE){return this>aD&&this<aE;};Object['defineProperty'](Object['prototype'],'forEach',{'__proto__':null,'value':function(aD){let aE=Object['keys'](this);for(let aF of aE)aD['call'](null,this[aF],aF);}});const a='2.7.0.7',b=0x20,c=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'];let d=new function(){this['dynamicStyleElement']=az({'type':'style'});document['head']['appendChild'](this['dynamicStyleElement']);this['themes']={'default':{'html':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.sub-settings-icon{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:grey;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding-right:5px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:4px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-right:\x202px\x20solid\x20rgb(60,60,60);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:50px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:50px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.sub-settings-icon:hover{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}'},'dark':{'html':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.sub-settings-icon{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:grey;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding-right:5px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:4px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-right:\x202px\x20solid\x20rgb(60,60,60);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:50px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:50px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.sub-settings-icon:hover{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}'}};this['getTheme']=()=>this['theme'];this['setTheme']=aD=>{if(aD in this['themes']){localStorage['theme']=this['theme']=aD;this['themes'][aD]['forEach']((aE,aF)=>this[aF]=aE);}else{console['warn']('Theme\x20\x22'+aD+'\x22\x20isn\x27t\x20defined');};};}();d['setTheme'](localStorage['theme']||'default');let f=new function(){this['getLanguage']=()=>this['language'];this['setLanguage']=function(aD){if(aD in this['languages']){this['language']=aD;}else{console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist/nSetted\x20default\x20(en)');this['language']='en';};this['title']=this['languages'][this['language']]['title'];this['options']=this['languages'][this['language']]['options'];this['footer']=this['languages'][this['language']]['footer'];return this['language'];};this['languages']={'ru':{'title':'NLR\x20миникарта','options':{'cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','theme':'Тема:\x20','detector':'Детектор\x20ошибок:\x20','autoSelect':'Автовыбор\x20цвета:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','sectors':'Эксп.\x20сис.\x20секторов:\x20'},'footer':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22\x20onclick=\x22window.open(\x27https://vk.com/endlessnight24\x27)\x22>NLR</a>\x20для\x20друзей</a>\x20|\x20V.\x20'+a},'en':{'title':'NLR\x20minimap','options':{'cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','theme':'Theme:\x20','detector':'Error\x20detector:\x20','autoSelect':'Auto\x20color\x20selection:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','sectors':'Sector\x20exp.\x20sys.\x20:\x20'},'footer':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x20onclick=\x22window.open(\x27https://vk.com/endlessnight24\x27)\x22\x22>NLR</a>\x20scientists\x20for\x20friends</a>\x20|\x20V.\x20'+a},'tr':{'title':'NLR\x20mini\x20Haritası','options':{'cursorColor':'İmleç\x20rengi:\x20','grid':'Izgara:\x20','theme':'Tema:\x20','detector':'Hata\x20dedektörü:\x20','autoSelect':'Otomatik\x20renk\x20seçme:\x20','language':'Dil:\x20','sync':'Zoom\x20sync:\x20','sectors':'Sector\x20exp.\x20sys.\x20:\x20'},'footer':'Arkadaşlar\x20için\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22\x20onclick=\x22window.open(\x27https://vk.com/endlessnight24\x27)\x22>NLR</a>\x20Bilim\x20Adamları\x20tarafından\x20oluşturuldu\x20|\x20V.\x20'+a}};}();f['setLanguage'](localStorage['language']||(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase']());let g=new function(){this['general']={};this['actual']={};class aD{constructor(aE){this['x']=aE['x'];this['y']=aE['y'];this['width']=aE['width'];this['height']=aE['height'];this['xEnd']=this['x']+this['width'];this['yEnd']=this['y']+this['height'];this['name']=aE['name'];this['url']=aE['url']||null;this['img']=aE['img']||null;this['canvas']=aE['canvas']||null;}['load'](aE,aF){if(this['url']===null)return console['error']('Template\x20url\x20isn\x27t\x20defined');this['img']=new Image();this['img']['crossOrigin']='';this['img']['onload']=()=>{this['canvas']=document['createElement']('canvas');this['width']=this['canvas']['width']=this['img']['width'];this['height']=this['canvas']['height']=this['img']['height'];this['xEnd']=this['x']+this['width'];this['yEnd']=this['y']+this['height'];this['ctx']=this['canvas']['getContext']('2d');this['ctx']['drawImage'](this['img'],0x0,0x0);this['imageData']=this['ctx']['getImageData'](0x0,0x0,this['width'],this['height']);this['canvas']['data']=this['imageData']['data'];aE&&aE(this);};this['img']['onerror']=aF['bind'](null,this);this['img']['src']=this['url'];}};this['load']=function(aE){delete this['actual'][aE];this['general'][aE]['load'](aF=>(console['log']('Template\x20'+aE+'\x20loaded'),console['dir'](this['actual'][aE]=aF)),aF=>console['error']('Can\x27t\x20load\x20template\x0a'+aF['url']));};this['add']=aE=>this['general'][aE['name']]=this['actual'][aE['name']]=new aD(aE);this['get']=aE=>aE in this['general']?this['general'][aE]['canvas']||null:undefined;this['getTemplateNameAt']=(aE,aF)=>{for(let aG in this['general'])if(aE['between'](this['general'][aG]['x'],this['general'][aG]['xEnd'])&&aF['between'](this['general'][aG]['y'],this['general'][aG]['yEnd']))return aG;return null;};}();let h=new RegExp(/-?\d+/g),j=null,k=null,l=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),m=at(),n=0x5,o=document['querySelector']('.selected')['style']['backgroundColor']['match'](h),p,q,r=!!void'Child\x20of\x20starfall',s=void'Luna,\x20child\x20of\x20starfall',t=void'Sunder\x20the\x20daylight',u=void'Open\x20my\x20heart',v=void'Let\x20me\x20bleed\x20thin',w={'New\x20Lunar\x20Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/NLR/PixelPlanet/templates.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2,'chunks':![]}},z='New\x20Lunar\x20Republic',A=document['querySelector']('canvas'),B=A['getContext']('2d'),C=document['querySelector']('.coorbox'),D=0x0,E=0x0,F=!![],G=!![],H=![],I=![],J=![],K=0x32,L=[],M=new function(){this['canvas']=document['createElement']('canvas');this['ctx']=this['canvas']['getContext']('2d');}(),N='springGreen',O=![],P=![],Q=![],R=![],S=![],T=!![],U=!![];let V={'elems':document['getElementById']('colors')['childNodes'],'colors':[],'same':(aD,aE)=>aD[0x0]===aE[0x0]&&aD[0x1]===aE[0x1]&&aD[0x2]===aE[0x2],'convert':function(aD){let aE,aF=Infinity,aG,aH;for(let aI=0x2;aI!==this['colors']['length'];aI++){if(this['same'](aH=this['colors'][aI],aD))return aH;(aG=aA(aH[0x0]-aD[0x0])+aA(aH[0x1]-aD[0x1])+aA(aH[0x2]-aD[0x2]))<aF&&(aF=aG,aE=aI);};return this['colors'][aE];},'IdToRGB':function(aD){return this['colors'][aD];},'RGBToId':function(aD){for(let aE=0x2;aE!==this['colors']['length'];aE++)if(ar(...this['colors'][aE],...aD))return aE;return null;},'select':function(aD){if(typeof aD==='object')this['elems'][this['RGBToId'](aD)]['click']();else this['elems'][aD]['click']();}};{let aD=[];for(let aE of V['elems'])if(aE['style']['backgroundColor']){aD['push'](aE);V['colors']['push'](aE['style']['backgroundColor']['match'](/-?\d+/g)['map'](aF=>+aF));};console['log']('Palette');console['log'](JSON['stringify'](V['colors']));aD['unshift'](0x0);V['colors']['unshift'](0x0);aD['unshift'](0x0);V['colors']['unshift'](0x0);V['elems']=aD;};const W=0x100,X=[[0xca,0xe3,0xff],[0xff,0xff,0xff],[0xff,0xff,0xff],[0xe4,0xe4,0xe4],[0xc4,0xc4,0xc4],[0x88,0x88,0x88],[0x4e,0x4e,0x4e],[0x0,0x0,0x0],[0xf4,0xb3,0xae],[0xff,0xa7,0xd1],[0xff,0x54,0xb2],[0xff,0x65,0x65],[0xe5,0x0,0x0],[0x9a,0x0,0x0],[0xfe,0xa4,0x60],[0xe5,0x95,0x0],[0xa0,0x6a,0x42],[0x60,0x40,0x28],[0xf5,0xdf,0xb0],[0xff,0xf8,0x89],[0xe5,0xd9,0x0],[0x94,0xe0,0x44],[0x2,0xbe,0x1],[0x68,0x83,0x38],[0x0,0x65,0x13],[0xca,0xe3,0xff],[0x0,0xd3,0xdd],[0x0,0x83,0xc7],[0x0,0x0,0xea],[0x19,0x19,0x73],[0xcf,0x6e,0xe4],[0x82,0x0,0x80]];class Y{constructor(aF,aG,aH){this['x']=aF;this['y']=aG;this['data']=aH;this['lastUsing']=new Date()['getTime']();this['_c']=null;}['get'](aF,aG){this['_c']=aF+aG*W<<0x2;return[this['data'][this['_c']],this['data'][this['_c']+0x1],this['data'][this['_c']+0x2]];}['set'](aF,aG,aH){this['_c']=aF+aG*W<<0x2;[this['data'][this['_c']],this['data'][this['_c']+0x1],this['data'][this['_c']+0x2]]=[...aH];}};let Z=new function(){let aF=this;this['chunkSize']=W;this['maxLiveTime']=0x3e8*0x78;this['tiledBorders']={'x1':0x0,'y1':0x0,'x2':0x100,'y2':0x100,'width':0x100,'height':0x100};this['borders']={'x1':-(this['tiledBorders']['width']*this['chunkSize']/0x2),'y1':-(this['tiledBorders']['height']*this['chunkSize']/0x2),'x2':this['tiledBorders']['width']*this['chunkSize']/0x2,'y2':this['tiledBorders']['height']*this['chunkSize']/0x2};this['chunks']={'get':function(aG,aH){return this[aG]===undefined||this[aG][aH]===undefined?null:this[aG][aH];},'set':function(aG,aH,aI){this[aG]===undefined&&(this[aG]={});aF['chunkList']['push'](this[aG][aH]=new Y(aG,aH,aI));return this[aG][aH];},'delete':function(aG,aH){if(this[aG]===undefined||this[aG][aH]===undefined)return console['error']('[CI]\x20Try\x20to\x20delete\x20undefined\x20chunk\x20'+aG+'\x20'+aH);this[aG][aH]=undefined;for(let aI=0x0;aI!==aF['chunkList']['length'];aI++)if(aF['chunkList'][aI]['x']===aG&&aF['chunkList'][aI]['y']===aH)return aF['chunkList']['splice'](aI,0x1);}};this['neededChunks']=[];this['isNeededChunk']=function(aG,aH){for(let aI of this['neededChunks'])if(aI[0x0]===aG&&aI[0x1]===aH)return!![];return![];};this['chunkList']=[];this['canLoad']=!![];this['maxLoadWaitTime']=0x3e8;this['chunkGetTimeout']=null;this['clearChunkGetTimeout']=()=>{this['chunkGetTimeout']!==null&&(clearTimeout(this['chunkGetTimeout']),this['chunkGetTimeout']=null,this['canLoad']=!![]);};this['setChunkGetTimeout']=function(){this['clearChunkGetTimeout']();this['canLoad']=![];this['chunkGetTimeout']=setTimeout(this['clearChunkGetTimeout']['bind'](this),this['maxLoadWaitTime']);};this['garbageCollector']=new function(){this['interval']=null;this['clear']=()=>{let aG=new Date()['getTime'](),aH=0x0;for(let aI of aF['chunkList'])if(aG-aI['lastUsing']>aF['maxLiveTime']&&!aF['isNeededChunk'](aI['x'],aI['y']))aF['chunks']['delete'](aI['x'],aI['y']),aH++;aH!==0x0&&console['log']('[CI]\x20deleted\x20'+aH+'\x20chunks');};this['start']=()=>{this['stop']();this['interval']=setInterval(this['clear']['bind'](this),0x3e8*0x3c);};this['stop']=()=>this['interval']===null||(clearInterval(this['interval']),this['interval']=null);}();this['absToTiled']=(aG,aH)=>[~~((aG-this['borders']['x1'])/this['chunkSize']),~~((aH-this['borders']['y1'])/this['chunkSize'])];this['tiledToAbs']=(aG,aH)=>[this['borders']['x1']+aG*this['chunkSize'],this['borders']['y1']+aH*this['chunkSize']];{let aG;this['getPixel']=(aH,aI)=>{aH--;aI--;aG=this['chunks']['get'](...this['absToTiled'](aH,aI));return aG&&aG['get']((aH-this['borders']['x1'])%this['chunkSize'],(aI-this['borders']['y1'])%this['chunkSize']);};};this['loadChunk']=(()=>{let aH=new Uint32Array(X['length']);X['forEach'](([aK,aL,aM],aN)=>aH[aN]=0xff000000|aM<<0x10|aL<<0x8|aK);const aI=aK=>{let aL=new Uint32Array(aK['length']);for(let aM=0x0;aM!==aK['length'];aM++)aL[aM]=aH[aK[aM]&0x3f];return aL;};function aJ(aK){let aL=new Uint8ClampedArray(aF['chunkSize']**0x2<<0x2),aM=new Uint32Array(aL['buffer']),aN=aI(aK);aN['forEach']((aO,aP)=>aM[aP]=aO);return aL;};return async function(aK,aL){if(!aF['canLoad']||aF['chunks']['get'](aK,aL))return;aF['setChunkGetTimeout']();let aM=await fetch(location['protocol']+'//'+location['host']+('/chunks/0/'+aK+'/'+aL+'.bmp'));if(aM['ok']){let aN=await aM['arrayBuffer'](),aO;if(aN['byteLength']){aO=aJ(new Uint8Array(aN));console['log']('[CI]\x20Chunk\x20'+aK+'\x20'+aL+'\x20loaded');}else{aO=new Uint8ClampedArray(aF['chunkSize']**0x2<<0x2);for(let aP=0x0;aP!==aO['length'];aP+=0x4)[aO[aP],aO[aP+0x1],aO[aP+0x2],aO[aP+0x3]]=[...X[0x0],0xff];console['log']('[CI]\x20Wrong\x20answer,\x20chunk\x20'+aK+'\x20'+aL+'\x20cleared');};aF['chunks']['set'](aK,aL,aO);aF['clearChunkGetTimeout']();}else throw new Error('[CI]\x20Network\x20response\x20was\x20not\x20ok.');};})();}();Z['garbageCollector']['start']();(aF=>{fetch=function(){if(Q&&arguments['length']===0x2&&arguments[0x0]==='/api/pixel'){let aG=JSON['parse'](arguments[0x1]['body']),aH=getPixelFromTemplates(aG['x'],aG['y']);if(aH!==null){aG['clr']=V['RGBToId'](aH);if(aG['clr']!==null){if(!ar(...o,...aH))V['select'](aH);arguments[0x1]['body']=JSON['stringify'](aG);};};};return aF['apply'](this,arguments);};})(fetch);if(window['addEventListener'])window['addEventListener']('mousewheel',ao);else if(window['attachEvent'])window['attachEvent']('onmousewheel',ao);if(!l&&/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',ao);}catch(aF){};if(localStorage['cursorColor']&&c['includes'](localStorage['cursorColor']))N=localStorage['cursorColor'];r=localStorage['debug']=='true';O=localStorage['grid']=='true';R=localStorage['sync']=='true';S=localStorage['expSectors']=='true';Q=localStorage['autoSelect']=='true';p=localStorage['minimapWidth']||0x19;q=localStorage['minimapHeight']||0x21;if(localStorage['mobile'])l=localStorage['mobile'];if(localStorage['detector']=='true'){if(l){localStorage['detector']=![];P=![];}else P=!![];};if(localStorage['zoomlevel'])n=+localStorage['zoomlevel'];else localStorage['zoomlevel']=n;if(localStorage['language'])f['setLanguage'](localStorage['language']);else localStorage['language']=f['getLanguage']();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+a);for(let aG=0x2;aG!==V['elems']['length'];aG++)V['elems'][aG]['addEventListener']('click',function(){o=this['style']['backgroundColor']['match'](h)['map'](aH=>+aH);});let a0=document['createElement']('div');a0['setAttribute']('class','NLRGeneral');a0['style']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:10;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:rgba(0,0,0,0.9);\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:rgb(250,250,250);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:1px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:1px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width\x20:'+p+'%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:'+q+'%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20user-select:none;\x0a\x20\x20\x20\x20';a0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x20padding:5px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;\x20width:100%;\x20height:90%;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:100%;\x20height:100%;\x20z-index:11;\x20position:absolute;\x20top:0;\x20left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:100%;\x20height:100%;\x20z-index:12;\x20position:absolute;\x20top:0;\x20left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20\x20\x20style=\x22width:100%;\x20height:100%;\x20z-index:13;\x20position:absolute;\x20top:0;\x20left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x20height:10%;\x20width:100%;\x20line-height:15px;\x20font-size:15px;\x20padding:3px;\x20border-top:rgb(50,50,50)\x201px\x20solid;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20\x20\x20class=\x22text-button\x22\x20style=\x22font-weight:bold;\x20color:rgb(250,0,0);\x20\x20\x22>OFF</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20id=\x22zoom-plus\x22\x20\x20\x20class=\x22text-button\x22\x20height=\x2214.5\x22\x20width=\x229\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20stroke-width=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M\x201\x209\x20L\x209\x209\x20M\x205\x204\x20L\x205\x2013\x22\x20fill=\x22transparent\x22\x20stroke=\x22rgb(0,100,250)\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20id=\x22zoom-minus\x22\x20\x20class=\x22text-button\x22\x20height=\x2214.5\x22\x20width=\x227\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20stroke-width=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M\x200\x209\x20L\x207\x209\x22\x20fill=\x22transparent\x22\x20stroke=\x22rgb(0,50,250)\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](a0);let a1=an('minimap-text'),a2=an('minimap-box'),a3=an('minimap-config'),a4=an('minimap'),a5=an('minimapSectors'),a6=an('minimapCover'),a7=a4['getContext']('2d'),a8=a5['getContext']('2d'),a9=a6['getContext']('2d');setTimeout(()=>{for(let aH=0x0,aI=0x0,aJ=document['getElementsByTagName']('canvas');aH<aJ['length'];aH++){if(aJ[aH]['id']=='minimap')aI++;if(aI>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let aa={'updateM':function(){this['hWidth']=a4['width']>>>0x1;this['hHeight']=a4['height']>>>0x1;},'updateD':function(){this['width']=a4['width']/m&0x7fe;this['height']=a4['height']/m&0x7fe;this['borderW']=a4['width']-this['width']*m>>>0x1;this['borderH']=a4['height']-this['height']*m>>>0x1;this['xLeft']=D-(this['width']>>>0x1);this['yTop']=E-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};au('https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/PixelPlanet/factions.json')['then'](aH=>{try{let aI=document['createElement']('script');aI['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](aI);}catch(aJ){};try{w=JSON['parse'](aH);}catch(aK){console['error']('Factions\x20load\x20error');};console['log']('Loaded\x20factions');console['log'](w);if(localStorage['injection']){let aL=JSON['parse'](localStorage['injection']);for(let aM in aL)w[aM]=aL[aM];console['log']('Updated\x20factions');console['log'](w);};w['forEach'](aN=>aN['chunks']='chunks'in aN&&aN['chunks']=='true');z=w[localStorage['faction']]&&localStorage['faction']||Object['keys'](w)[0x0];console['log'](z);ac();for(let aN in w)ab['addFaction'](aN,w[aN]['color'],function(){ab['factions'][z]['style']['fontWeight']='normal';this['style']['fontWeight']='bold';localStorage['faction']=z=aN;ac();});ab['factions'][z]['style']['fontWeight']='bold';},console['error']);an('hide-map')['onclick']=()=>{ax();a2['style']['display']=a3['style']['display']='none';a1['style']['display']='block';a1['innerText']='Minimap';a1['style']['cursor']='pointer';};a1['onclick']=()=>{ay();a2['style']['display']=a3['style']['display']='block';a1['style']['display']='none';a1['style']['cursor']='default';af();};an('zoom-plus')['addEventListener'](l?'touchstart':'mousedown',aH=>{aH['preventDefault']();I=!![];J=![];ad();},![]);an('zoom-plus')['addEventListener'](l?'touchend':'mouseup',()=>I=![],![]);an('zoom-minus')['addEventListener'](l?'touchstart':'mousedown',aH=>{aH['preventDefault']();J=!![];I=![];ae();},![]);an('zoom-minus')['addEventListener'](l?'touchend':'mouseup',()=>J=![],![]);if(l){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');a3['style']['lineHeight']='27px';let aH=document['createElement']('div'),aI=document['createElement']('canvas');aI['height']=aI['width']=0x15;aI['left']=(window['innerWidth']+aI['width'])/0x2;aI['top']=(window['innerHeight']+aI['height'])/0x2;let aJ=aI['getContext']('2d');aJ['strokeStyle']='white';aH['style']='position:\x20absolute;\x20top:\x20'+aI['top']+'px;\x20left:\x20'+aI['left']+'px;';aH['appendChild'](aI);document['body']['appendChild'](aH);let aK=aI['getContext']('2d'),aL=A['getContext']('2d')['getImageData'](aI['left'],aI['top'],aI['width'],aI['height'])['data'],aM=aK['getImageData'](0x0,0x0,aI['width'],aI['height']),aN=aM['data'];for(let aO=0x0;aO<aI['height'];aO++)aN[(aI['width']*(0.5+aO)<<0x2)+0x3]=0xff;for(let aP=0x0;aP<aI['width'];aP++)aN[(aI['width']*((aI['height']>>>0x1)-0x1)+aP<<0x2)+0x3]=0xff;aK['putImageData'](aM,0x0,0x0);aI['update']=function(){let aQ=B['getImageData'](this['left'],this['top'],aI['width'],aI['height'])['data'],aR=aK['getImageData'](0x0,0x0,this['width'],this['height']),aS=aR['data'];for(let aT=0x0;aT<this['height'];aT++){let aU=this['width']*(0.5+aT)<<0x2;if(aQ[aU]===0x80&&aQ[aU+0x1]===0x80&&aQ[aU+0x2]===0x80){aS[aU]=0x0;aS[aU+0x1]=aS[aU+0x2]=0xe6;}else{aS[aU]=0xff^aQ[aU];aS[aU+0x1]=0xff^aQ[aU+0x1];aS[aU+0x2]=0xff^aQ[aU+0x2];};};for(let aV=0x0;aV<this['width'];aV++){let aW=this['width']*((this['height']>>>0x1)-0x1)+aV<<0x2;if(aQ[aW]===0x80&&aQ[aW+0x1]===0x80&&aQ[aW+0x2]===0x80){aS[aW]=0x0;aS[aW+0x1]=0xe6;aS[aW+0x2]=0xe6;}else{aS[aW]=0xff^aQ[aW];aS[aW+0x1]=0xff^aQ[aW+0x1];aS[aW+0x2]=0xff^aQ[aW+0x2];};};aK['putImageData'](aR,0x0,0x0);};A['addEventListener']('touchmove',()=>{if(!T)return;T=![];window['requestAnimationFrame'](()=>{T=!![];aI['update']();});},![]);setInterval(()=>{let aQ=0x0,aR=0x0,aS=[];if(window['location']['search']){aS=window['location']['search']['match'](h);aQ=+aS[0x0];aR=+aS[0x1];}else m=0x1;if(D!=aQ||E!=aR||aS['length']===0x3&&m!==+aS[0x2]){D=aQ;E=aR;if(aS['length']===0x3&&m!==+aS[0x2]){m=+aS[0x2];(R||P)&&ak();};if(!F)return;if(P){as(m);aa['updateD']();m==0x1?af():setTimeout(af,0x64);}else{R?as(m):as();af();};};},0x96);}else{window['addEventListener']('mousemove',aQ=>{let [aR,aS]=(aT=>[+aT[0x0],+aT[0x1]])(C['innerText']['match'](h));if(D!==aR||E!==aS){u=aQ['clientX'];v=aQ['clientY'];D=aR;E=aS;if(!F)return;if(P){as(m);aa['updateD']();}else{R?as(m):as();};af();};},![]);};let ab=new function(){const aQ=aT=>document['getElementById'](aT);this['window']=document['createElement']('div');this['window']['setAttribute']('class','NLRGeneral');this['window']['style']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:20;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:rgba(0,0,0,0.9);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:rgb(250,250,250);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:32px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:1px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top\x20:50%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:50%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:translate(-50%,-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:2px\x20outset\x20springGreen;\x0a\x20\x20\x20\x20\x20\x20\x20\x20';this['window']['innerHTML']='<div\x20class=\x27level\x27\x20style=\x22border-bottom:\x202px\x20solid;\x20border-color:inherit;\x20padding:5px;\x22>'+'<span></span>'+'<svg\x20class=\x22text-button\x22\x20style=\x22position:fixed;\x20right:0px;\x20margin:9px;\x22\x20height=\x2216\x22\x20width=\x2216\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20stroke-width=\x221.5\x22>'+'<path\x20d=\x22M\x201\x201\x20L\x2015\x2014\x20M\x2015\x201\x20L\x201\x2015\x22\x20fill=\x22transparent\x22\x20stroke=\x22white\x22></path>'+'</svg>'+'</div>'+'<div\x20class=\x22level\x22\x20style=\x22line-height:20px;\x20right:0px;\x22>'+'<div\x20id=\x22tabs\x22\x20style=\x22border-bottom:\x202px\x20solid\x20grey;\x22>'+'</div>'+'<div\x20id=\x22content\x22>'+'</div>'+'</div>'+'<footer\x20class=\x27level\x27\x20style\x20=\x20\x22color:grey;\x20font:\x20menu;\x20font-size:11px;\x20border-top:\x202px\x20solid\x20grey;\x20padding:5px;\x22></footer>';document['body']['appendChild'](this['window']);this['levels']=this['window']['getElementsByClassName']('level');this['title']=this['levels'][0x0]['getElementsByTagName']('span')[0x0];this['cancel']=this['levels'][0x0]['getElementsByTagName']('svg')[0x0];this['footer']=this['levels'][0x2];let aR=this;this['tabsSwitcher']=aQ('tabs');this['activeTab']=null;this['activateTab']=function(aT){this['activeTab']=aT;this['tabs']['forEach']((aU,aV)=>aU['style']['display']=aV===aT?'block':'none');this['tabsSwitcher']['forEach']((aU,aV)=>aU['style']['textWeight']=aV===aT?'bold':'normal');};this['tabsSwitcher']['appendChild'](az({'type':'span','class':'sub-settings-icon','text':'factions','listeners':{'click':this['activateTab']['bind'](this,'factions')}}));this['tabsSwitcher']['appendChild'](az({'type':'span','class':'sub-settings-icon','text':'settings','listeners':{'click':this['activateTab']['bind'](this,'settings')}}));this['tabsSwitcher']['appendChild'](az({'type':'span','class':'sub-settings-icon','text':'display','listeners':{'click':this['activateTab']['bind'](this,'display')}}));this['tabsSwitcher']=this['tabsSwitcher']['childNodes'];this['scrinshot']={};this['tabs']={'factions':az({'type':'div','style':'display:none;','class':'sub-settings'}),'settings':az({'type':'div','style':'display:none;','class':'sub-settings'}),'display':az({'type':'div','style':'display:none;','class':'sub-settings'},[az({'type':'table'},[az({'type':'tr'},[az({'type':'td','text':'Width'}),az({'type':'td'},[az({'type':'input','style':'background-color:rgba(0,0,0,0);\x20color:white;\x20width:30px;','listeners':{'input':function(){let aT=parseInt(this['value']);localStorage['minimapWidth']=p=isNaN(aT)?0x19:aT>0x32?0x32:aT<0x1?0x1:aT;al();ap();},'focus':()=>H=!![],'blur':()=>H=![]},'attributes':{'maxlength':0x2,'value':p}}),document['createTextNode']('\x20%')])]),az({'type':'tr','style':'background-color:rgba(0,0,0,0);'},[az({'type':'td','text':'Height'}),az({'type':'td'},[az({'type':'input','style':'background-color:rgba(0,0,0,0);\x20color:white;\x20width:30px;','listeners':{'input':function(){let aT=parseInt(this['value']);localStorage['minimapHeight']=q=isNaN(aT)?0x21:aT>0x32?0x32:aT<0x1?0x1:aT;al();ap();},'focus':()=>H=!![],'blur':()=>H=![]},'attributes':{'maxlength':0x2,'value':q}}),document['createTextNode']('\x20%')])])])])};this['options']={};const aS=aT=>{let aU=az({'type':'div','class':'settings-option'}),aV=az({'type':'span','style':'padding-left:5px;'}),aW=az({'type':'span'});aU['appendChild'](aV);aU['appendChild'](aW);aU['desc']=aV;aU['button']=aW;return this['options'][aT]=aU;};aS('cursorColor');aS('grid');aS('theme');aS('sectors');aS('detector');aS('autoSelect');aS('sync');aS('language');this['options']['forEach'](aT=>this['tabs']['settings']['appendChild'](aT));this['changeLanguage']=function(aT){f['setLanguage'](aT);this['options']['language']['button']['innerText']=f['getLanguage']();this['title']['innerHTML']=f['title'];f['options']['forEach']((aU,aV)=>{this['options'][aV]&&(this['options'][aV]['desc']['innerText']=aU);});this['footer']['innerHTML']=f['footer'];};this['clearFactions']=()=>this['tabs']['factions']['innerHTML']='';this['factions']={};this['addFaction']=function(aT,aU,aV){this['tabs']['factions']['appendChild'](this['factions'][aT]=az({'type':'div','class':'text-button','style':'color:'+aU+';\x20animation:;','text':aT,'listeners':{'click':aV}}));};{let aT=aQ('content');this['tabs']['forEach'](aU=>aT['appendChild'](aU));};this['changeLanguage'](f['getLanguage']());this['options']['cursorColor']['button']['innerText']=N;this['options']['grid']['button']['innerText']=aq(O);this['options']['theme']['button']['innerText']=d['getTheme']();this['options']['sectors']['button']['innerText']=aq(S);this['options']['detector']['button']['innerText']=aq(P);this['options']['autoSelect']['button']['innerText']=aq(Q);this['options']['sync']['button']['innerText']=aq(R);this['options']['language']['button']['innerText']=f['getLanguage']();this['setTheme']=function(aU){d['setTheme'](aU);this['options']['theme']['button']['innerText']=aU;d['dynamicStyleElement']['innerHTML']=d['html'];};}();ab['activateTab']('settings');ab['setTheme'](d['theme']);window['addEventListener']('unload',()=>localStorage['zoomlevel']=n);window['addEventListener']('resize',ap);if(!l)window['addEventListener']('keydown',aQ=>{let aR=aQ['keyCode'];switch(aR){case 0x1b:ab['window']['style']['display']='none';break;case 0x30:if(H)return;(localStorage['debug']=r=!r)?console['log']('Debug\x20is\x20enabled'):console['log']('Debug\x20is\x20off');break;case 0x31:if(H)return;if(ab['window']['style']['display']==='none'){ab['window']['style']['display']='block';ab['activateTab']('factions');}else{if(ab['activeTab']==='factions'){ab['window']['style']['display']='none';}else{ab['activateTab']('factions');};};break;case 0x32:if(H)return;if(ab['window']['style']['display']==='none'){ab['window']['style']['display']='block';ab['activateTab']('settings');}else{if(ab['activeTab']==='settings'){ab['window']['style']['display']='none';}else{ab['activateTab']('settings');};};break;case 0x33:if(H)return;if(ab['window']['style']['display']==='none'){ab['window']['style']['display']='block';ab['activateTab']('display');}else{if(ab['activeTab']==='display'){ab['window']['style']['display']='none';}else{ab['activateTab']('display');};};break;case 0x34:if(H)return;ab['options']['detector']['desc']['click']();break;};});ab['options']['cursorColor']['addEventListener']('click',()=>{let aQ=c['indexOf'](N)+0x1;if(aQ===c['length'])aQ=0x0;localStorage['cursorColor']=ab['options']['cursorColor']['button']['innerText']=ab['options']['cursorColor']['button']['style']['color']=N=c[aQ];;ak();});ab['options']['grid']['addEventListener']('click',()=>{a9['clearRect'](0x0,0x0,a6['width'],a6['height']);ab['options']['grid']['button']['innerText']=aq(localStorage['grid']=O=!O);ak();});ab['options']['theme']['addEventListener']('click',()=>{alert('Will\x20be\x20soon\x20(or\x20no)');});ab['cancel']['addEventListener']('click',()=>ab['window']['style']['display']='none');ab['options']['detector']['addEventListener']('click',()=>{if(P=!P){an('zoom-minus')['style']['cursor']=an('zoom-plus')['style']['cursor']='not-allowed';aa['updateD']();}else{an('zoom-minus')['style']['cursor']=an('zoom-plus')['style']['cursor']='pointer';};ab['options']['detector']['button']['innerText']=aq(P);localStorage['detector']=P;as(m);af();ak();});ab['options']['autoSelect']['addEventListener']('click',()=>{ab['options']['autoSelect']['button']['innerText']=aq(localStorage['autoSelect']=Q=!Q);});ab['options']['language']['addEventListener']('click',()=>{let aQ=Object['keys'](f['languages']),aR=aQ['indexOf'](f['getLanguage']())+0x1;aR===aQ['length']&&(aR=0x0);localStorage['language']=f['setLanguage'](aQ[aR]);ab['changeLanguage'](f['getLanguage']());});ab['options']['sync']['addEventListener']('click',()=>{(localStorage['sync']=R=!R)?as(m):as();ab['options']['sync']['button']['innerText']=aq(R);af();ak();});ab['options']['sectors']['addEventListener']('click',()=>{ab['options']['sectors']['button']['innerText']=aq(localStorage['expSectors']=S=!S);S||a8['clearRect'](0x0,0x0,a4['width'],a4['height']);ag();return console['log']('TODO:\x20do\x20later\x20sectors');});ap();function ac(){let aQ=''+w[z]['data']+(w[z]['type']==0x1?'?'+new Date()['getTime']():'');r&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+z+'\x0aURL\x20:\x20'+aQ);g['general']={};g['actual']={};au(aQ)['then'](aR=>{JSON['parse'](aR)['forEach']((aS,aT)=>{g['add']({'name':aT,'url':w[z]['images']+aT+'.png','x':aS['x'],'y':aS['y'],'width':aS['width'],'height':aS['height']});});console['dir']('Update\x20completed',g);},console['error']);};function ad(){if(!I||P)return;if(R){localStorage['sync']=R=![];n=m;ab['options']['sync']['button']['innerText']=aq(R);};n*=1.1;if(n>0x20){n=0x20;return;};P?aa['updateD']():R?as(m):as();ak();ag();setTimeout(ad,K);};function ae(){if(!J||P)return;if(R){localStorage['sync']=R=![];n=m;ab['options']['sync']['button']['innerText']=aq(R);};n/=1.1;if(n<0x1){n=0x1;return;};P?aa['updateD']():R?as(m):as();ak();af();setTimeout(ae,K);};function af(){if(!F)return;L=[];g['actual']['forEach']((aQ,aR)=>{if(D['between'](aQ['x']-j,aQ['xEnd']+j)&&E['between'](aQ['y']-k,aQ['yEnd']+k)){g['actual'][aR]['canvas']?L['push'](aR):g['load'](aR);};});if(L['length']===0x0){if(G&&!I&&!J){G=![];a0['style']['width']='auto';a0['style']['height']='auto';a2['style']['display']='none';a1['style']['display']='block';a1['innerText']='There\x27s\x20nothing\x20here';};}else{if(!G){G=!![];ay();a2['style']['display']='block';a1['style']['display']='none';};if(U){U=![];window['requestAnimationFrame'](()=>{ag();U=!![];});};};};function ag(){if(P){aj();S&&ai(m);}else if(R){ah(m);S&&ai(m);}else{ah();S&&ai();};};function ah(aQ=n){a7['clearRect'](0x0,0x0,a4['width'],a4['height']);let aR;for(let aS of L){aR=g['actual'][aS];a7['drawImage'](aR['canvas'],~~((aR['x']-s)*aQ),~~((aR['y']-t)*aQ),~~(aR['width']*aQ),~~(aR['height']*aQ));};};function ai(aQ=n){};function aj(aQ=m){let aR,aS;M['canvas']['width']=aa['width'];M['canvas']['height']=aa['height'];if(L['length']===0x1){let aZ=g['actual'][L[0x0]];aR=aZ['ctx']['getImageData'](aa['xLeft']-aZ['x']-0x1,aa['yTop']-aZ['y']-0x1,aa['width'],aa['height']);aS=aR['data'];}else{for(let b0 of L)M['ctx']['drawImage'](g['actual'][b0]['canvas'],aa['xLeft']-g['actual'][b0]['x']-0x1,aa['yTop']-g['actual'][b0]['y']-0x1,aa['width'],aa['height'],0x0,0x0,aa['width'],aa['height']);aR=M['ctx']['getImageData'](0x0,0x0,M['canvas']['width'],M['canvas']['height']);aS=aR['data'];};let aT,aU,aV,aW=0x0,aX=aa['height']+aa['yTop'],aY=aa['width']+aa['xLeft'];for(aV=aa['yTop'];aV!==aX;aV++){for(aU=aa['xLeft'];aU!==aY;aU++,aW+=0x4){aT=Z['getPixel'](aU,aV);if(aS[aW+0x3]===0x0)continue;if(aT===null){aS[aW+0x3]=0x0;Z['loadChunk'](...Z['absToTiled'](aU,aV));continue;};if(ar(...aT,aS[aW],aS[aW+0x1],aS[aW+0x2])){aS[aW]=aS[aW+0x1]=aS[aW+0x2]=(aA(aT[0x0]-aS[0x0])+aA(aT[0x1]-aS[0x1])+aA(aT[0x2]-aS[0x2]))/0x3;}else{aS[aW]=0xff;aS[aW+0x1]=aS[aW+0x2]=0x0;};aS[aW+0x3]=0xff;};};if(aQ===0x1){a7['putImageData'](aR,0x0,0x0);}else{M['ctx']['putImageData'](aR,0x0,0x0);a7['clearRect'](0x0,0x0,a4['width'],a4['height']);a7['drawImage'](M['canvas'],~~(aa['borderW']-aQ),~~(aa['borderH']-aQ),~~(aa['width']*aQ),~~(aa['height']*aQ));};};function ak(aQ=n){a9['clearRect'](0x0,0x0,a6['width'],a6['height']);(P||R)&&(aQ=m);if(aQ<=0x2)return;if(O&&aQ>4.6){a9['beginPath']();a9['strokeStyle']='rgb(20,20,20)';let aR=a4['width']+aQ,aS=a4['height']+aQ,aT=aa['hWidth']%aQ-aQ,aU=aa['hHeight']%aQ-aQ,aV=aR+aT,aW=aS+aU;a9['lineWidth']=0x1;for(let aX=aT;aX<=aR;aX+=aQ){a9['moveTo'](aX,aU);a9['lineTo'](aX,aW);};for(let aY=aU;aY<=aS;aY+=aQ){a9['moveTo'](aT,aY);a9['lineTo'](aV,aY);};a9['stroke']();};a9['beginPath']();a9['lineWidth']=aQ/0x3;a9['strokeStyle']=N;a9['rect'](aa['hWidth'],aa['hHeight'],aQ,aQ);a9['stroke']();};function al(aQ,aR){aQ?p=aQ:aQ=p;aR?q=aR:aR=q;if(G){a0['style']['width']=aQ+'%';a0['style']['height']=aR+'%';};};function am(aQ){if(typeof aQ==='string'){let aR=document['getElementById'](aQ);aR['style']['display']=aR['style']['display']==='none'?'block':'none';}else if(typeof aQ==='object')aQ['style']['display']=aQ['style']['display']==='none'?'block':'none';};function an(aQ){return document['getElementById'](aQ);};function ao(){m=at();if(!P&&!R)return;if(P)aa['updateD']();as(m);ak();af();};function ap(){for(let aQ of a2['childNodes']){aQ['width']=aQ['offsetWidth'];aQ['height']=aQ['offsetHeight'];};aB(a7,![]);aB(a8,![]);aa['updateM']();aa['updateD']();ak();G&&af();};function aq(aQ){return aQ?'On':'Off';};function ar(aQ,aR,aS,aT,aU,aV){return(aQ>aT?aQ-aT:aT-aQ)<0xa&&(aR>aU?aR-aU:aU-aR)<0xa&&(aS>aV?aS-aV:aV-aS)<0xa;};function as(aQ=n){n=aQ;j=aa['hWidth']/aQ;k=aa['hHeight']/aQ;s=D-aa['hWidth']/aQ;t=E-aa['hHeight']/aQ;};function at(){let aQ=+window['location']['hash']['match'](h)[0x2];return aQ>0xa?(aQ/0xa)**0x2:aQ**0.1||0x1;};window['getPixelFromTemplates']=function aQ(aR,aS){let aT;for(let aU of L){aT=g['actual'][aU];if(!aT['canvas'])continue;if(aR['between'](aT['x'],aT['xEnd'])&&aS['between'](aT['y'],aT['yEnd'])){let aV=aT['canvas']['data'],aW=aR-aT['x']+aT['width']*(aS-aT['y'])<<0x2;if(aV[aW+0x3]===0x0)continue;return[aV[aW],aV[aW+0x1],aV[aW+0x2]];};};return null;};function au(aR){return new Promise((aS,aT)=>{let aU=new XMLHttpRequest();aU['onload']=()=>{aS(aU['responseText']);aU=null;};aU['onerror']=aT;aU['open']('GET',aR);aU['send']();});};function av(aR,aS=void 0x0){let aT=document['createElement']('a');aT['href']=aR['toDataURL']('image/png');aT['download']=aS;aT['click']();};function aw(aR,aS,aT){let aU=document['createElement']('canvas'),aV=aU['getContext']('2d');aU['width']=aR;aU['height']=aS;let aW=aV['getImageData'](0x0,0x0,aR,aS),aX=aW['data'];for(let aY=0x0;aY!==aX['length'];aY++)aX[aY]=aT[aY];aV['putImageData'](aW,0x0,0x0);return aU;};function ax(){F=![];a0['style']['width']='auto';a0['style']['height']='auto';};function ay(){F=!![];a0['style']['width']=p+'%';a0['style']['height']=q+'%';};function az(aR,aS=[]){let aT=aR['type']==='text'?document['createTextNode'](aR['text']||''):document['createElement'](aR['type']);aR['id']&&(aT['id']=aR['id']);aR['class']&&aT['setAttribute']('class',aR['class']);aR['style']&&(aT['style']=aR['style']);aR['html']?aT['innerHTML']=aR['html']:aR['text']&&(aT['innerText']=aR['text']);aR['listeners']&&aR['listeners']['forEach']((aU,aV)=>{aT['addEventListener'](aV['startsWith']('on')?aV['substring'](0x2):aV,aU);});aR['attributes']&&aR['attributes']['forEach']((aU,aV)=>aT['setAttribute'](aV,aU));aS['length']&&aS['forEach'](aT['appendChild']['bind'](aT));return aT;};function aA(aR){return aR>0x0?aR:-aR;};function aB(aR,aS){aR['mozImageSmoothingEnabled']=aR['webkitImageSmoothingEnabled']=aR['msImageSmoothingEnabled']=aR['imageSmoothingEnabled']=aS;};};function checkNeededElems(){return window&&document['querySelector']('canvas')&&document['querySelector']('.coorbox')&&document['querySelector']('.selected')&&document['querySelector']('.selected')['style']['backgroundColor']&&document['getElementById']('colors')['childNodes']['length'];};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let a=document['createElement']('script');a['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](a);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
