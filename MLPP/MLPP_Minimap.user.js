// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.9.7
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';{let c=document['createElement']('div'),d=document['createElement']('div'),e,f=null;c['style']='position:fixed;\x20bottom:0px;\x20right:0px;\x20background-color:rgba(0,0,0,0.9);\x20padding:5px;';c['appendChild'](d);{setInterval(()=>{if(f===null)return;let g=~~(new Date()['getTime']()/0x3e8-f),h=g%0x3c,i=~~(g/0x3c);e['innerText']=(i>0xa?i:'0'+i)+':'+(h>0xa?h:'0'+h);},0x3e8);let j=document['createElement']('div');j['innerText']='Since\x20last\x20captcha\x20';e=document['createElement']('span');e['innerText']='null';j['appendChild'](e);c['appendChild'](j);};const k=(l,m)=>{d['innerText']=l;d['style']['color']=m;};k(void 0x0,'grey');let n;(function(o){XMLHttpRequest['prototype']['send']=function(){if(arguments[0x0]==='1:2'){k('Online','springGreen');clearTimeout(n);n=setTimeout(()=>k('Offline','red'),0x1e*0x3e8);}else if(typeof arguments[0x0]==='string'&&arguments[0x0]['includes']('captchaToken')){f=new Date()['getTime']()/0x3e8;};return o['apply'](this,arguments);};}(XMLHttpRequest['prototype']['send']));document['body']['appendChild'](c);};(function specialFirst(){let p=eo('timer');if(p)p['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){let q=eo('message');if(q)q['remove']();else setTimeout(specialSecond,0x14d);}());let r=document['createElement']('link');r['rel']='stylesheet';r['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](r);let s=document['createElement']('div');s['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';s['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](s);eo('settingsButton')['addEventListener']('click',()=>{let t=eo('settingsDiv');el(t);if(t['style']['display']==='block'){t['style']['left']=(window['innerWidth']-t['offsetWidth']>>>0x1)+'px';t['style']['top']=(window['innerHeight']-t['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(u,v){return this>u&&this<v;};window['testPerformance']=()=>{console['log']('Start\x20testing');let w=null,z=!![],A=a0['width']>>>0x1,B=a0['height']>>>0x1;setTimeout(()=>clearInterval(w),0x1770);w=setInterval(()=>{if(z)z=![],eC('mousemove',A+eG(0x0,A>>>0x1),B+eG(0x0,B>>>0x1));else z=!![],eC('mousemove',A-eG(0x0,A>>>0x1),B-eG(0x0,B>>>0x1));},0x32);};const C='2.7.0.0',D=0x20,E=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],F={'init':function(){this['style']=this['style'];},get 'style'(){return this['_style'];},set 'style'(H){if(this['availableStyles']['includes'](H))this['_style']=H;else console['warn']('Style\x20is\x20missing'),this['_style']='New';let I='_'+this['_style'];for(let J of['width','height','settings','minimapbg'])this[J]=this[I][J];},'_style':'New','availableStyles':['New','Old'],'_New':{'width':0x118,'height':0xc8,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'_Old':{'width':0x1a4,'height':0x12c,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;'},'settings':{},'minimapbg':{},'width':{},'height':{},'translucent':{'false':0x1,'true':0.5}},G={'init':function(){this['language']=this['language'];},'availableLan':['ru','en','tr'],get 'language'(){return this['_language'];},set 'language'(K){if(this['availableLan']['includes'](K))this['_language']=K;else console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist'),this['_language']='en';let L='_'+this['_language'];this['width']=this[L]['width'];this['text']=this[L]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'on':'On','off':'Off','title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','autoSelect':'Автовыбор\x20цвета:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+C,'pixels':'Поставленные\x20пиксели:\x20','pixelsDay':'Поставленные\x20за\x20день\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'on':'On','off':'Off','title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','autoSelect':'Auto\x20color\x20selection:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+C,'pixels':'Correct\x20pixels:\x20','pixelsDay':'Correct\x20pixels\x20per\x20day:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}},'_tr':{'width':'280px','text':{'on':'Açık','off':'Kapalı','title':'MLP\x20Pixel\x20:\x20harita\x20ayarları','cursorColor':'İmleç\x20rengi:\x20','grid':'Izgara:\x20','mapStyle':'Minimap\x20stili:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Yarı\x20saydam:\x20','detector':'Hata\x20dedektörü:\x20','autoSelect':'Otomatik\x20renk\x20seçme:\x20','language':'Dil:\x20','sync':'Zoom\x20sync:\x20','info':'<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20tarafından\x20yapıldı\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20için\x20düzenlendi\x20|\x20V.\x20'+C,'pixels':'Doğru\x20pixeller:\x20','pixelsDay':'Günlük\x20doğru\x20pixeller:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};F['init']();G['init']();let M=null,N=null,O=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),P=0x1,Q=0x5,R=new RegExp(/-?\d+/g),S=eo('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](R),T=!!void'Child\x20of\x20starfall',U=void'Luna,\x20child\x20of\x20starfall',V=void'Sunder\x20the\x20daylight',W=void'Open\x20my\x20heart',X=void'Let\x20me\x20bleed\x20thin',Y={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2,'chunks':![]}},Z='New\x20Lunar\x20Republic',a0=eo('canvas'),a1=a0['getContext']('2d'),a2=eo('coordinatesNote'),a3=document['getElementsByClassName']('palette-color-box'),a4=[],a5=eo('timer'),a6=0x0,a7=0x0,a8,a9,aa,ab=!![],ac=!![],ad=![],ae=![],af=0x32,ag=[],ah={'grids':[],'templates':[]},ai={'canvas':document['createElement']('canvas'),'ctx':void 0x0},aj={'getLine':function(a6){let aB=0x190,aC=eJ(a6%aB);if(this['_data']['has'](aC))return this['_data']['get'](aC);let aD=aB/0x3,aE=aD<<0x1,aF=[this['conv'](this['fromTo'](aC,0x0,aD),aD),this['conv'](this['fromTo'](aC,aD,aE),aD),this['conv'](this['fromTo'](aC,aE,aB),aD)];this['_data']['set'](aC,aF);return aF;},'_data':new Map(),'conv':(a6,aH)=>~~(((a6<<0x8)-a6)/aH),'fromTo':(a6,aJ,aK)=>a6>aK||a6<aJ?0x0:a6-aJ},ak={'stat':{'pixels':0x0,'pixelsDay':0x0,'lastDate':0x0},'lastCoords':{'x':null,'y':null}},al='springGreen',am=![],an=![],ao=![],ap=0x1,aq=![],ar=![],as=![],at=![],au=![],av=()=>{},aw=!![],ax=!![],ay=null,az=0x32;for(let aL of a3)a4['push'](aL['style']['backgroundColor']['match'](R)['map'](a6=>+a6));if(window['location']['search']&&window['location']['search']['match'](R)['length']==0x3)P=+window['location']['search']['match'](R)[0x2];else P=0x1;ai['ctx']=ai['canvas']['getContext']('2d');let aN={'lastZoom':P,'setZoom':function(aO){this['zoom']=P=aO;if(at){eA(P);eb();cg();}else if(ar&&~~P===P){setTimeout(()=>{be['updateD']();eA(P);dW();an&&d9(P);eb();},0xc8);};},'smoothZoom':function(aP){this['smoothZoomFrom']=this['zoom'];this['smoothZoomTo']=aP;this['smoothZoomStartDate']=Date['now']();this['smoothZoomUpdate']();},'executeZoom':function(aQ){this['setZoom'](aQ>0x40?0x40:aQ<0x1?0x1:aQ);},'smoothZoomUpdate':function(){let aR=(Date['now']()-this['smoothZoomStartDate'])/0xc8;if(aR>0x1){this['executeZoom'](this['smoothZoomTo']);return;};window['requestAnimationFrame'](()=>this['smoothZoomUpdate']());this['executeZoom'](this['smoothZoomFrom']+(0x1-0x1-(aR>0x1?0x1:aR<0x0?0x0:aR)**0x3)*(this['smoothZoomTo']-this['smoothZoomFrom']));}};aN['setZoom'](P);if(a0['addEventListener'])a0['addEventListener']('mousewheel',eq,![]);else if(a0['attachEvent'])a0['attachEvent']('onmousewheel',eq);if(!O&&/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',eq);}catch(aS){};if(localStorage['cursorColor']&&E['includes'](localStorage['cursorColor']))al=localStorage['cursorColor'];T=localStorage['debug']=='true';am=localStorage['grid']=='true';aq=localStorage['translucent']=='true';an=localStorage['sectors']=='true';at=localStorage['sync']=='true';au=localStorage['expSectors']=='true';as=localStorage['autoSelect']=='true';if(localStorage['mapStyle']=='Old')F['style']='Old';if(localStorage['sectorShift']=='true'){ao=!![];ap=0.8;};if(localStorage['mobile'])O=localStorage['mobile'];if(localStorage['detector']=='true'){if(O){localStorage['detector']=![];ar=![];}else ar=!![];};if(localStorage['zoomlevel'])Q=+localStorage['zoomlevel'];else localStorage['zoomlevel']=Q;if(localStorage['language'])G['language']=localStorage['language'];else localStorage['language']=G['language'];{let aT=ak['stat'],aU=new Date();if(localStorage['statistics']){console['log']('Statistics\x20are\x20loading...');try{aT=JSON['parse'](atob(localStorage['statistics']));console['log']('Statistics\x20uploaded\x20successfully');if(aT['lastDate']){aT['lastDate'][0x0]*=0x1;aT['lastDate'][0x1]*=0x1;aT['lastDate'][0x2]*=0x1;};console['log'](aT);}catch(aV){console['log']('Something\x20went\x20wrong');console['log'](aV);}}else console['log']('Statistics\x20not\x20found');if(aT['pixels']==void 0x0||aT['pixelsDay']==void 0x0||aT['lastDate']==void 0x0){console['log']('Some\x20elements\x20are\x20missing');if(!aT['lastDate'])aT['lastDate']=[aU['getYear'](),aU['getMonth'](),aU['getDay']()],aT['pixelsDay']=0x0;if(!aT['pixels'])aT['pixels']=0x0;if(!aT['pixelsDay'])aT['pixelsDay']=0x0;T&&console['log'](aT);};if(aT['lastDate'][0x0]!=aU['getYear']()||aT['lastDate'][0x1]!=aU['getMonth']()||aT['lastDate'][0x2]!=aU['getDay']()){aT['lastDate']=[aU['getYear'](),aU['getMonth'](),aU['getDay']()];aT['pixelsDay']=0x0;};ak['stat']=aT;localStorage['statistics']=btoa(JSON['stringify'](aT));};d5();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+C);for(let aW of a3)aW['addEventListener']('click',()=>S=aW['style']['backgroundColor']['match'](R)['map'](a6=>+a6));let aY='';for(let aZ in Y)aY+='<li\x20id=\x22'+aZ+'\x22><span\x20style=\x22cursor:pointer;color:'+Y[aZ]['color']+'\x22>'+aZ+'<span></li>';let b0=document['createElement']('div');b0['id']='minimapbg';b0['style']=F['minimapbg'];b0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+F['width']+'px;height:'+F['height']+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+F['translucent'][aq]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](b0);let b1=eo('minimap-text'),b2=eo('minimap-box'),b3=eo('minimap-config'),b4=eo('minimap'),b5=eo('minimapSectors'),b6=eo('minimapCover'),b7=b4['getContext']('2d'),b8=b5['getContext']('2d'),b9=b6['getContext']('2d');for(let ba of b2['childNodes']){ba['width']=ba['offsetWidth'];ba['height']=ba['offsetHeight'];};eL(b7,![]);eL(b8,![]);setTimeout(()=>{for(let bb=0x0,bc=0x0,aY=document['getElementsByTagName']('canvas');bb<aY['length'];bb++){if(aY[bb]['id']=='minimap')bc++;if(bc>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let be={'updateM':function(){this['hWidth']=b4['width']>>>0x1;this['hHeight']=b4['height']>>>0x1;},'updateD':function(){this['width']=b4['width']/P&0x7fe;this['height']=b4['height']/P&0x7fe;this['borderW']=b4['width']-this['width']*P>>>0x1;this['borderH']=b4['height']-this['height']*P>>>0x1;this['xLeft']=a6-(this['width']>>>0x1);this['yTop']=a7-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};be['updateM']();be['updateD']();let bf=new XMLHttpRequest(),bg='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';bf['onloadend']=function(){if(this['status']==0xc8){try{let bh=document['createElement']('script');bh['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](bh);}catch(bi){};Y=JSON['parse'](this['responseText']);console['log']('Loaded\x20factions');console['log'](Y);if(localStorage['injection']){let bj=JSON['parse'](localStorage['injection']);for(let Z in bj)Y[Z]=bj[Z];console['log']('Updated\x20factions');console['log'](Y);};for(let Z in Y){Z=Y[Z];if('chunks'in Z&&Z['chunks']=='true')Z['chunks']=!![];else Z['chunks']=![];};Z=Y[localStorage['faction']]&&localStorage['faction']||Object['keys'](Y)[0x0];console['log'](Z);c7();let bm='';for(let bn in Y)bm+='<li\x20id=\x22'+bn+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:normal;\x20color:'+Y[bn]['color']+'\x22>'+bn+'<span></li>';eo('listF')['innerHTML']=bm;for(let bo in Y)eo(bo)['onclick']=function(){el('factions');eo(Z)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=Z=this['id'];c7();};eo(Z)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+bg+'\x0aStatus\x20:\x20'+this['status']);bf=null;};bf['open']('GET',bg);bf['send']();eb();eo('hide-map')['onclick']=()=>{ab=![];b2['style']['display']=b3['style']['display']='none';b1['style']['display']='block';b1['innerText']='Minimap';b1['style']['cursor']='pointer';};b1['onclick']=()=>{ab=!![];b2['style']['display']=b3['style']['display']='block';b1['style']['display']='none';b1['style']['cursor']='default';cg();};eo('zoom-plus')['addEventListener'](O?'touchstart':'mousedown',bp=>{bp['preventDefault']();ad=!![];ae=![];ce();},![]);eo('zoom-plus')['addEventListener'](O?'touchend':'mouseup',()=>ad=![],![]);eo('zoom-minus')['addEventListener'](O?'touchstart':'mousedown',bq=>{bq['preventDefault']();ae=!![];ad=![];cf();},![]);eo('zoom-minus')['addEventListener'](O?'touchend':'mouseup',()=>ae=![],![]);if(O){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');b3['style']['lineHeight']='27px';let br=document['createElement']('div'),bs=document['createElement']('canvas');bs['height']=bs['width']=0x15;bs['left']=(window['innerWidth']+bs['width'])/0x2;bs['top']=(window['innerHeight']+bs['height'])/0x2;let bt=bs['getContext']('2d');bt['strokeStyle']='white';br['style']='position:\x20absolute;\x20top:\x20'+bs['top']+'px;\x20left:\x20'+bs['left']+'px;';br['appendChild'](bs);document['body']['appendChild'](br);let bu=bs['getContext']('2d'),bv=a0['getContext']('2d')['getImageData'](bs['left'],bs['top'],bs['width'],bs['height'])['data'],bw=bu['getImageData'](0x0,0x0,bs['width'],bs['height']),bx=bw['data'];for(let a7=0x0;a7<bs['height'];a7++)bx[(bs['width']*(0.5+a7)<<0x2)+0x3]=0xff;for(let a6=0x0;a6<bs['width'];a6++)bx[(bs['width']*((bs['height']>>>0x1)-0x1)+a6<<0x2)+0x3]=0xff;bu['putImageData'](bw,0x0,0x0);bs['update']=function(){let bv=a1['getImageData'](this['left'],this['top'],bs['width'],bs['height'])['data'],bw=bu['getImageData'](0x0,0x0,this['width'],this['height']),bx=bw['data'];for(let a7=0x0;a7<this['height'];a7++){let bE=this['width']*(0.5+a7)<<0x2;if(bv[bE]===0x80&&bv[bE+0x1]===0x80&&bv[bE+0x2]===0x80){bx[bE]=0x0;bx[bE+0x1]=bx[bE+0x2]=0xe6;}else{bx[bE]=0xff^bv[bE];bx[bE+0x1]=0xff^bv[bE+0x1];bx[bE+0x2]=0xff^bv[bE+0x2];};};for(let a6=0x0;a6<this['width'];a6++){let bG=this['width']*((this['height']>>>0x1)-0x1)+a6<<0x2;if(bv[bG]===0x80&&bv[bG+0x1]===0x80&&bv[bG+0x2]===0x80){bx[bG]=0x0;bx[bG+0x1]=0xe6;bx[bG+0x2]=0xe6;}else{bx[bG]=0xff^bv[bG];bx[bG+0x1]=0xff^bv[bG+0x1];bx[bG+0x2]=0xff^bv[bG+0x2];};};bu['putImageData'](bw,0x0,0x0);};a0['addEventListener']('touchmove',()=>{if(!aw)return;aw=![];window['requestAnimationFrame'](()=>{aw=!![];bs['update']();});},![]);setInterval(()=>{let bH=0x0,bI=0x0,bJ=[];if(window['location']['search']){bJ=window['location']['search']['match'](R);bH=+bJ[0x0];bI=+bJ[0x1];}else P=0x1;if(a6!=bH||a7!=bI||bJ['length']===0x3&&P!==+bJ[0x2]){a6=bH;a7=bI;if(bJ['length']===0x3&&P!==+bJ[0x2]){P=+bJ[0x2];(at||ar)&&eb();};if(!ab)return;if(ar){eA(P);be['updateD']();P==0x1?cg():setTimeout(cg,0x64);}else{at?eA(P):eA();cg();};};},0x96);}else{window['addEventListener']('mousemove',bK=>{let bL=a2['innerText']['match'](R),bM=+bL[0x0],bN=+bL[0x1];if(a6!==bM||a7!==bN){if(ar){if(P===0x1){W=bK['clientX'];X=bK['clientY'];}else{let bO=P>>>0x1;if(a6!==bM){if(bM>a6)W=bK['clientX']+bO;else W=bK['clientX']-bO;};if(a7!==bN){if(bN>a7)X=bK['clientY']+bO;else X=bK['clientY']-bO;};}};a6=bM;a7=bN;if(!ab)return;if(P>0x2&&as&&!eo('alert-dialog-title'))for(let bP of ah['templates']){if(!ag[bP])continue;let bQ=a9[bP];if(a6['between'](bQ['x'],bQ['xEnd'])&&a7['between'](bQ['y'],bQ['yEnd'])){ay&&clearTimeout(ay);let bR=ag[bP],bS=a6-bQ['x']+bQ['width']*(a7-bQ['y'])<<0x2,bT=[bR['data'][bS],bR['data'][bS+0x1],bR['data'][bS+0x2]];if(bR['data'][bS+0x3]===0xff&&!et(...S,...bT)){ay=setTimeout(()=>{eO(bT);ay=null;},az);}else ay=null;break;};};if(ar){eA(P);be['updateD']();cg();}else{at?eA(P):eA();cg();};};},![]);};let bU=document['createElement']('div');bU['id']='settingsDiv';bU['style']='width:\x20'+G['width']+';\x20height:\x20auto;\x20display:\x20none;\x20position:\x20absolute;\x20'+F['settings'];bU['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+G['text']['title']+'</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px;\x20width:;\x20height:;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+al+'\x22>'+al+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(am?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+F['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(an?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(au?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(ao?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(aq?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(ar?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22autoSelectText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['autoSelect']+'</span><span\x20id\x20=\x20\x22autoSelect\x22\x20class\x20=\x20\x22textButton\x22>'+(as?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(at?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+G['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+G['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsText\x22>'+G['text']['pixels']+'</span><span\x20id\x20=\x20\x22pixels\x22\x20style\x20=\x20\x22textButton\x22>'+ak['stat']['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsDayText\x22>'+G['text']['pixelsDay']+'</span><span\x20id\x20=\x20\x22pixelsDay\x22\x20style\x20=\x20\x22textButton\x22>'+ak['stat']['pixelsDay']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+G['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['body']['appendChild'](bU);window['addEventListener']('unload',()=>localStorage['zoomlevel']=Q);(()=>{let bV=eo('infoText')['getElementsByTagName']('a');bV[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bV[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();a0['addEventListener'](O?'touchend':'click',()=>{if(a5['innerText']!=0x3)return;let bW;for(let bX=0x0;bX<ah['templates']['length'];bX++){let bY=ah['templates'][bX];bW=ag[bY]['ctx']['getImageData'](a6-a9[bY]['x'],a7-a9[bY]['y'],0x1,0x1)['data'];if(bW[0x3]===0xff)break;};if(et(...S,bW[0x0],bW[0x1],bW[0x2]))setTimeout(()=>{if(a5['innerText']==0x3){eo('pixelsDay')['innerText']=++ak['stat']['pixelsDay'];eo('pixels')['innerText']=++ak['stat']['pixels'];localStorage['statistics']=btoa(JSON['stringify'](ak['stat']));};},0x384);});if(O)eo('detector')['style']['cursor']=eo('detectorText')['style']['cursor']='not-allowed';else window['addEventListener']('keydown',bZ=>{let c0=bZ['keyCode'];switch(c0){case 0x1b:eo('settingsDiv')['style']['display']='none';break;case 0x30:if(T){T=![];console['log']('Debug\x20is\x20off');}else{T=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=T;break;case 0x31:el('factions');break;case 0x32:eo('settingsButton')['click']();break;case 0x33:eo('sectors')['click']();break;case 0x34:eo('detector')['click']();break;};});eo('cursorColorText')['onclick']=eo('cursorColor')['onclick']=()=>{let c1=E['indexOf'](al)+0x1;if(c1===E['length'])c1=0x0;localStorage['cursorColor']=eo('cursorColor')['innerText']=eo('cursorColor')['style']['color']=al=E[c1];;eb();};eo('gridText')['onclick']=eo('grid')['onclick']=()=>{b9['clearRect'](0x0,0x0,b6['width'],b6['height']);eo('grid')['innerText']=(localStorage['grid']=am=!am)?'On':'Off';eb();};eo('mapStyleText')['onclick']=eo('mapStyle')['onclick']=()=>{localStorage['mapStyle']=F['style']=F['style']=='Old'?'New':'Old';b2['style']['width']=F['width']+'px';b2['style']['height']=F['height']+'px';for(let c2 of b2['childNodes']){c2['width']=c2['offsetWidth'];c2['height']=c2['offsetHeight'];};eL(b7,![]);eL(b8,![]);ar||at?eA(P):eA();eo('settingsDiv')['style']='width:\x20'+eo('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+eo('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+eo('settingsDiv')['style']['left']+';\x20top:\x20'+eo('settingsDiv')['style']['top']+';\x20'+F['settings'];eo('minimapbg')['style']=F['minimapbg'];eo('mapStyle')['innerText']=F['style'];eb();av();};eo('sectorsText')['onclick']=eo('sectors')['onclick']=()=>{an=!an;d5();an?av():b8['clearRect'](0x0,0x0,b5['width'],b5['height']);eo('sectors')['innerText']=(localStorage['sectors']=an)?'On':'Off';};eo('settingsDivCancel')['onclick']=()=>el('settingsDiv');eo('sectorShiftText')['onclick']=eo('sectorShift')['onclick']=()=>{ap=(ao=!ao)?0.8:0x1;eo('sectorShift')['innerText']=(localStorage['sectorShift']=ao)?'On':'Off';av();};eo('translucentText')['onclick']=eo('translucent')['onclick']=()=>{aq=!aq;eo('translucent')['innerText']=aq?'On':'Off';eo('minimapSectors')['style']['opacity']=F['translucent'][aq];localStorage['translucent']=aq;av();};if(!O)eo('detectorText')['onclick']=eo('detector')['onclick']=()=>{if(ar=!ar){eo('zoom-minus')['style']['cursor']=eo('zoom-plus')['style']['cursor']='not-allowed';be['updateD']();}else eo('zoom-minus')['style']['cursor']=eo('zoom-plus')['style']['cursor']='pointer';eo('detector')['innerText']=ar?'On':'Off';localStorage['detector']=ar;eA(P);d5();cg();eb();};eo('autoSelectText')['onclick']=eo('autoSelect')['onclick']=()=>{eo('autoSelect')['innerText']=(localStorage['autoSelect']=as=!as)?'On':'Off';};eo('languageText')['onclick']=eo('language')['onclick']=function(){let c3=G['availableLan']['indexOf'](G['language'])+0x1;if(c3===G['availableLan']['length'])c3=0x0;localStorage['language']=eo('language')['innerText']=G['language']=G['availableLan'][c3];eo('settingsDiv')['style']['width']=G['width'];for(let c4 in G['text']){let c5=eo(c4+'Text');if(c5)c5['innerHTML']=G['text'][c4];};let c6=eo('infoText')['getElementsByTagName']('a');c6[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');c6[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};eo('syncText')['onclick']=eo('sync')['onclick']=()=>{(localStorage['sync']=at=!at)?eA(P):eA();eo('sync')['innerText']=at?'On':'Off';d5();cg();eb();};eo('expSectorsText')['onclick']=eo('expSectors')['onclick']=()=>{eo('expSectors')['innerText']=(localStorage['expSectors']=au=!au)?'On':'Off';au||b8['clearRect'](0x0,0x0,b4['width'],b4['height']);d5();av();};function c7(){let c8=''+Y[Z]['data']+(Y[Z]['type']==0x1?'?'+new Date()['getTime']():'');T&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+Z+'\x0aURL\x20:\x20'+c8);a8={};a9={};aa={};ag={};let c9=new XMLHttpRequest();c9['onloadend']=function(){if(this['status']==0xc8){a8=JSON['parse'](this['responseText']);for(let ca in a8){let cb=a8[ca];cb['x']*=0x1;cb['y']*=0x1;cb['width']*=0x1;cb['height']*=0x1;cb['xEnd']=cb['x']+cb['width'];cb['yEnd']=cb['y']+cb['height'];cb['type']==='grid'?aa[ca]=cb:a9[ca]=cb;};for(let cc of ah['templates'])cl(cc,()=>T&&console['log']('Img\x20updated'));for(let cd of ah['grids'])cl(cd,()=>T&&console['log']('Grid\x20updated'));T&&console['log']('Update\x20completed',a8,a9,aa);}else console['error']('Error\x20:\x20'+Y[Z]['data']+'\x0aURL\x20:\x20'+c8+'\x0aStatus\x20:\x20'+this['status']);};c9['open']('GET',c8);c9['send']();};function ce(){if(!ad||ar)return;if(at){localStorage['sync']=at=![];Q=P;eo('sync')['innerText']=at?'On':'Off';d5();};Q*=1.1;if(Q>0x20){Q=0x20;return;};ar?be['updateD']():at?eA(P):eA();eb();av();setTimeout(ce,af);};function cf(){if(!ae||ar)return;if(at){localStorage['sync']=at=![];Q=P;eo('sync')['innerText']=at?'On':'Off';d5();};Q/=1.1;if(Q<0x1){Q=0x1;return;};ar?be['updateD']():at?eA(P):eA();eb();cg();setTimeout(cf,af);};function cg(){if(!ab||!a9)return;ah['grids']=[];ah['templates']=[];for(let ch in a9){let ci=a9[ch];if(a6['between'](ci['x']-M,ci['xEnd']+M)&&a7['between'](ci['y']-N,ci['yEnd']+N))if(ag[ch])ah['templates'][ah['templates']['length']]=ch;else{cl(ch);delete a9[ch];};};if(an)for(let cj in aa){let ck=aa[cj];if(a6['between'](ck['x']-M,ck['xEnd']+M)&&a7['between'](ck['y']-N,ck['yEnd']+N))if(ag[cj])ah['grids'][ah['grids']['length']]=cj;else{cl(cj);delete aa[cj];};};if(ah['grids']['length']===0x0&&ah['templates']['length']===0x0){if(ac&&!ad&&!ae){ac=![];b2['style']['display']='none';b1['style']['display']='block';b1['innerText']='There\x27s\x20nothing\x20here';};}else{if(!ac){ac=!![];b2['style']['display']='block';b1['style']['display']='none';};if(ax){ax=![];window['requestAnimationFrame'](()=>{av();ax=!![];});};};};function cl(cm,cn){let co=new Image(),cp=0x0;co['crossOrigin']='';co['src']=''+Y[Z]['images']+cm+'.png';co['onerror']=()=>{console['warn']('Download\x20failed\x0asrc\x20:\x20'+co['src']+'\x0aName\x20:\x20'+cm);if(a8[cm]['type']==='grid')delete aa[cm];else delete a9[cm];delete a8[cm];delete ag[cm];};co['onload']=()=>{const cq=0x100;let cr=document['createElement']('canvas'),cs=cr['getContext']('2d'),ct=co['width'],cu=co['height'];cr['width']=ct;cr['height']=cu;cs['drawImage'](co,0x0,0x0,ct,cu);let cv=cs['getImageData'](0x0,0x0,ct,cu),cw=cv['data'];if(Y[Z]['chunks']==![]||O||co['width']<=cq*1.5&&co['height']<=cq*1.5){ag[cm]=cr;ag[cm]['ctx']=cs;ag[cm]['data']=cw;if(a8[cm]['type']==='grid')aa[cm]=a8[cm];else a9[cm]=a8[cm];console['log'](a8,'\x0aName\x20:\x20'+cm+'\x0aType\x20:\x20'+(a8[cm]['type']==='grid'?'grid':'image'));cn&&cn();cg();return;};let cx=performance['now']();for(let a7=0x0,cz=cq>>0x1;cu-a7>cz;a7+=cq)for(let a6=0x0;ct-a6>cz;a6+=cq){const cB=cm+'_#_'+a6/cq+'_'+a7/cq,cC=ct-a6>=cq?cq:ct-a6,cD=cu-a7>=cq?cq:cu-a7,cE=cC<<0x2,cF=cE*cD;let cG=new Uint8ClampedArray(cF),cH=0x0,cI=0x0,cJ=null,cK=0x0;for(let cL=0x0,cM=ct<<0x2,cN=ct*a7+a6<<0x2,cO=0x0,cP,cz;cL!==cD;cL+=0x1){cP=cN+cL*cM;cz=cO+cE;while(cO!==cz){cG[cO]=cw[cP];cO+=0x1;cP+=0x1;};};for(let cR=0x3;cR<cF;cR+=0x4)if(cG[cR]!==0x0){cJ=~~((cR+0x1)/cE);break;};if(cJ===null)continue;for(let cS=cF-0x1,cz=cJ*cE;cS>cz;cS-=0x4)if(cG[cS]!==0x0){cK=(cS+0x1)/cE;cK=cD-(~~cK===cK?cK:~~cK+0x1);break;};cU:for(let a6=0x3,cW=cJ*cE,cz=(cC-cK)*cE;a6<cE;a6+=0x4)for(let cO=a6+cW;cO<cz;cO+=cE)if(cG[cO]!==0x0){cH=a6>>>0x2;break cU;};cZ:for(let a6=cE-0x1,d1=cJ*cE,cz=(cC-cK)*cE,d3=cH<<0x2;a6>d3;a6-=0x4)for(let cO=a6+d1;cO<cz;cO+=cE)if(cG[cO]!==0x0){cI=cC-(a6+0x1>>>0x2);break cZ;};a8[cB]={};a8[cB]['x']=a8[cm]['x']+a6;a8[cB]['y']=a8[cm]['y']+a7;ag[cB]=document['createElement']('canvas');ag[cB]['ctx']=ag[cB]['getContext']('2d');if(cJ||cK||cH||cI){a8[cB]['width']=ag[cB]['width']=cC-cH-cI;a8[cB]['height']=ag[cB]['height']=cD-cJ-cK;ag[cB]['ctx']['drawImage'](cr,a6+cH,a7+cJ,ag[cB]['width'],ag[cB]['height'],0x0,0x0,ag[cB]['width'],ag[cB]['height']);a8[cB]['x']+=cH;a8[cB]['y']+=cJ;}else{a8[cB]['width']=ag[cB]['width']=cC;a8[cB]['height']=ag[cB]['height']=cD;ag[cB]['ctx']['drawImage'](cr,a6,a7,ag[cB]['width'],ag[cB]['height'],0x0,0x0,ag[cB]['width'],ag[cB]['height']);};a8[cB]['xEnd']=a8[cB]['x']+a8[cB]['width'];a8[cB]['yEnd']=a8[cB]['y']+a8[cB]['height'];if(a8[cm]['type']==='grid')aa[cB]=a8[cB];else{a9[cB]=a8[cB];ag[cB]['data']=ag[cB]['ctx']['getImageData'](0x0,0x0,a8[cB]['width'],a8[cB]['height'])['data'];};cp++;};console['log'](a8,'\x0aName\x20:\x20'+cm+'\x0aType\x20:\x20'+(a8[cm]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+cp+'\x0aTime\x20:\x20'+(performance['now']()-cx));delete a8[cm];delete ag[cm];cr=null;cs=null;cv=null;cw=null;cn&&cn();cg();};};function d5(){if(ar){if(an||au)av=()=>{dW();d9(P);};else av=dW;}else if(at){if(an||au)av=()=>{d6(P);d9(P);};else av=()=>d6(P);}else{if(an||au)av=()=>{d6();d9();};else av=d6;};};function d6(d7=Q){b7['clearRect'](0x0,0x0,b4['width'],b4['height']);for(let d8 of ah['templates'])b7['drawImage'](ag[d8],~~((a9[d8]['x']-U)*d7),~~((a9[d8]['y']-V)*d7),~~(ag[d8]['width']*d7),~~(ag[d8]['height']*d7));};function d9(da=Q){if(au){df(da);return;};b8['clearRect'](0x0,0x0,b5['width'],b5['height']);let db,dc,dd=da*ap;if(ar){db=(be['xLeft']-a6)/ap+a6;dc=(be['yTop']-a7)/ap+a7;}else{db=(U-a6)/ap+a6;dc=(V-a7)/ap+a7;};for(let de of ah['grids'])b8['drawImage'](ag[de],~~((aa[de]['x']-db)*dd),~~((aa[de]['y']-dc)*dd),~~(ag[de]['width']*dd),~~(ag[de]['height']*dd));};function df(dg=Q){b8['clearRect'](0x0,0x0,b5['width'],b5['height']);function dh(a6,a7,dk,dl,dm){b8['strokeStyle']='rgb('+dm+')';b8['beginPath']();b8['moveTo'](a6,a7);b8['lineTo'](dk,dl);b8['stroke']();};function dn(a6,a7){a6+=0x1000;a7+=0x1000;let dr=~~a7/D,ds=dr%0x24,dt=~~a6/D,du=dt%0x24;return((du<0xa?du+'':String['fromCharCode'](du-0xa+0x61))+'z'['repeat'](~~(dt/0x24))+'\x0d\x0a'+((ds<0xa?ds+'':String['fromCharCode'](ds-0xa+0x61))+'z'['repeat'](~~(dr/0x24))))['toUpperCase']();};b8['lineWidth']=~~(dg/0x3);b8['strokeStyle']='rgb(20,20,20)';let dv=(D-U%D)*dg,dw=(D-V%D)*dg,dx=D*dg,dy=D/0x2,dz=b4['width']+dg,dA=b4['height']+dg,dB=be['hWidth']%dg-dg,dC=be['hHeight']%dg-dg,dD=dv+(dg-dB),dE=dw+(dg-dC),dF=(~~(U/D)+0x1)*D,dG=(~~(V/D)+0x1)*D;for(let dH=dD,a6=dF,dJ=dC+dA,dK=dH+dB;dH<dz;dH+=dx,a6+=D,dK+=dx)dh(dK,dC,dK,dJ,aj['getLine'](a6));for(let dL=dE,a7=dG,dN=dB+dz,dO=dL+dC;dL<dA;dL+=dx,a7+=D,dO+=dx)dh(dB,dO,dN,dO,aj['getLine'](a7));if(dg>0x2)return;b8['strokeStyle']='rgb(255,255,255)';b8['fillStyle']='rgb(20,20,20)';b8['font']=~~(D*dg/0x3)+'px\x20fantasy';b8['textBaseline']='top';for(let dP=dD,a6=dF,dR=dC+dA;dP<dz;dP+=dx,a6+=D)for(let dL=dE,a7=dG,dR=dB+dz,dV=dn(a6,a7);dL<dA;dL+=dx,a7+=D,dV=dn(a6,a7))b8['strokeText'](dV,dP,dL),b8['fillText'](dV,dP,dL);};function dW(dX=P){if(~~dX!==dX)return;let dY,dZ=0x0;for(let e0=dX**0x2;e0>0x1;e0>>>=0x1)dZ++;dY=dZ>>>0x1;ai['canvas']['width']=be['width'];ai['canvas']['height']=be['height'];let e1,e2;if(ah['templates']['length']===0x1){let e3=ah['templates'][0x0];e1=ag[e3]['ctx']['getImageData'](be['xLeft']-a9[e3]['x']-0x1,be['yTop']-a9[e3]['y']-0x1,be['width'],be['height']);e2=e1['data'];}else{for(let e4 of ah['templates'])ai['ctx']['drawImage'](ag[e4],be['xLeft']-a9[e4]['x']-0x1,be['yTop']-a9[e4]['y']-0x1,be['width'],be['height'],0x0,0x0,be['width'],be['height']);e1=ai['ctx']['getImageData'](0x0,0x0,ai['canvas']['width'],ai['canvas']['height']);e2=e1['data'];};let e5=a1['getImageData'](~~(W-(be['width']<<dY>>>0x1)),~~(X-(be['height']<<dY>>>0x1)),~~(be['width']*dX),~~(be['height']*dX))['data'],e6=0x0,e7=dX<<0x2;for(let e8=0x0;e8<be['sizeRGBA'];e8+=be['widthRGBA'])for(let e9=e8+be['widthRGBA'],ea=e8<<dZ;e6<e9;e6+=0x4,ea+=e7){if(e5[ea+0x3]===0x0)continue;if(et(e2[e6],e2[e6+0x1],e2[e6+0x2],e5[ea],e5[ea+0x1],e5[ea+0x2])){e2[e6]=e2[e6+0x1]=e2[e6+0x2]=~~((e2[e6]+e2[e6+0x1]+e2[e6+0x2])/0x3);}else{e2[e6]=0xff;e2[e6+0x1]=e2[e6+0x2]=0x0;};};if(dX===0x1){b7['putImageData'](e1,0x0,0x0);}else{ai['ctx']['putImageData'](e1,0x0,0x0);b7['clearRect'](0x0,0x0,b4['width'],b4['height']);b7['drawImage'](ai['canvas'],~~(be['borderW']-dX),~~(be['borderH']-dX),~~(be['width']*dX),~~(be['height']*dX));};};function eb(ec=Q){b9['clearRect'](0x0,0x0,b6['width'],b6['height']);if(ar||at)ec=P;if(ec<=0x2)return;if(am&&ec>4.6){b9['beginPath']();b9['strokeStyle']='rgb(20,20,20)';let ed=b4['width']+ec,ee=b4['height']+ec,ef=be['hWidth']%ec-ec,eg=be['hHeight']%ec-ec,eh=ed+ef,ei=ee+eg;b9['lineWidth']=0x1;for(let a6=ef;a6<=ed;a6+=ec){b9['moveTo'](a6,eg);b9['lineTo'](a6,ei);};for(let a7=eg;a7<=ee;a7+=ec){b9['moveTo'](ef,a7);b9['lineTo'](eh,a7);};b9['stroke']();};b9['beginPath']();b9['lineWidth']=ec/0x3;b9['strokeStyle']=al;b9['rect'](be['hWidth'],be['hHeight'],ec,ec);b9['stroke']();};function el(em){if(typeof em==='string'){let en=document['getElementById'](em);en['style']['display']=en['style']['display']==='none'?'block':'none';}else if(typeof em==='object')em['style']['display']=em['style']['display']==='none'?'block':'none';};function eo(ep){return document['getElementById'](ep);};function eq(er){er['preventDefault']();let es;er=er||window['event'];if(er['wheelDelta']){es=er['wheelDelta'];if(window['opera'])es=-es;}else if(er['detail'])es=-er['detail'];es>0x0&&(aN['lastZoom']*=0x2,P<<=0x1);es<0x0&&(aN['lastZoom']/=0x2,P>>>=0x1);if(aN['lastZoom']>0x40)aN['lastZoom']=0x40;else{if(aN['lastZoom']<0x1)aN['lastZoom']=0x1;if(at)aN['smoothZoom'](aN['lastZoom']);else if(ar)aN['setZoom'](P);};};function et(eu,ev,ew,ex,ey,ez){return(eu>ex?eu-ex:ex-eu)<0x1e&&(ev>ey?ev-ey:ey-ev)<0x1e&&(ew>ez?ew-ez:ez-ew)<0x1e;};function eA(eB=Q){M=be['hWidth']/eB;N=be['hHeight']/eB;U=a6-be['hWidth']/eB;V=a7-be['hHeight']/eB;};function eC(eD,a6,a7){a0['dispatchEvent'](new MouseEvent(eD,{'clientX':a6,'clientY':a7,'bubbles':!![]}));};function eG(eH,eI){return Math['round'](eH-0.5+Math['random']()*(eI-eH+0x1));};function eJ(a6){return a6>0x0?a6:-a6;};function eL(eM,eN){eM['mozImageSmoothingEnabled']=eM['webkitImageSmoothingEnabled']=eM['msImageSmoothingEnabled']=eM['imageSmoothingEnabled']=eN;};function eO(eP){for(let eQ=0x0;eQ<a4['length'];eQ++)if(et(...a4[eQ],...eP)){a3[eQ]['click']();break;}};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote')&&document['getElementById']('colorSampleSelector')&&document['getElementsByClassName']('palette-color-box');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let eR=document['createElement']('script');eR['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](eR);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
