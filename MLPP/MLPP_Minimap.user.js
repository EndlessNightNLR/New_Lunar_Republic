// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.9.1
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';//PZ CHANGES
(function specialFirst(){if(du('timer'))du('timer')['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){if(du('message'))du('message')['remove']();else setTimeout(specialSecond,0x14d);}());let c=document['createElement']('link');c['rel']='stylesheet';c['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](c);let d=document['createElement']('div');d['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](d);du('settingsButton')['addEventListener']('click',()=>{let e=du('settingsDiv');dr(e);if(e['style']['display']==='block'){e['style']['left']=(window['innerWidth']-e['offsetWidth']>>>0x1)+'px';e['style']['top']=(window['innerHeight']-e['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(f,g){return this>f&&this<g;};window['testPerformance']=()=>{console['log']('Start\x20testing');let h=null,i=!![],j=E['width']>>>0x1,k=E['height']>>>0x1;setTimeout(()=>clearInterval(h),0x1770);h=setInterval(()=>{if(i)i=![],dI('mousemove',j+dM(0x0,j>>>0x1),k+dM(0x0,k>>>0x1));else i=!![],dI('mousemove',j-dM(0x0,j>>>0x1),k-dM(0x0,k>>>0x1));},0x32);};const l='2.6.9.1',m=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],n={'style':'New','settings':{'Old':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','New':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;'},'minimapbg':{'Old':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;','New':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'width':{'Old':0x1a4,'New':0x118},'height':{'Old':0x12c,'New':0xc8},'translucent':{'false':0x1,'true':0.5}},o={'init':function(){this['language']=this['language'];},'availableLan':['ru','en'],get 'language'(){return this['_language'];},set 'language'(p){if(this['availableLan']['includes'](p)){this['_language']=p;}else{console['log']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist');this['_language']='en';};this['width']=this['_'+this['_language']]['width'];this['text']=this['_'+this['_language']]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+l,'stat':'Поставленные\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+l,'stat':'Set\x20pixels:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};o['init']();let q=null,r=null,s=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),t=0x1,u=0x5,v=new RegExp(/-?\d+/g),w=du('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](v),x=!!void'Child\x20of\x20starfall',y=void'Luna,\x20child\x20of\x20starfall',z=void'Sunder\x20the\x20daylight',A=void'Open\x20my\x20heart',B=void'Let\x20me\x20bleed\x20thin',C={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2}},D='New\x20Lunar\x20Republic',E=du('canvas'),F=E['getContext']('2d'),G=du('coordinatesNote'),H=du('timer'),I=0x0,J=0x0,K,L,M,N=!![],O=!![],P=![],Q=![],R=0x32,S=[],T={'grids':[],'templates':[]},U={'canvas':document['createElement']('canvas'),'ctx':void 0x0},V='springGreen',W=![],X=![],Y=![],Z=0x1,a0=![],a1=![],a2=![],a3=![],a4={'pixels':0x0},a5,a6=!![],a7=!![];if(window['location']['href']['match'](v)&&window['location']['href']['match'](v)['length']==0x3)t=+window['location']['href']['match'](v)[0x2];else t=0x1;U['ctx']=U['canvas']['getContext']('2d');if(E['addEventListener'])E['addEventListener']('mousewheel',dw,![]);else if(E['attachEvent'])E['attachEvent']('onmousewheel',dw);if(/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',a8=>{a8['wheelDelta']==0x3?t<<=0x1:t>>>=0x1;if(t>0x40)t=0x40;else if(t<0x1)t=0x1;else if(a2&&!a1){dG(t);di();bl();}else if(a1){dG(t);as['updateD']();setTimeout(()=>{d3();},0xc8);di();if(X)cc();};});}catch(a9){};if(localStorage['cursorColor']&&m['includes'](localStorage['cursorColor']))V=localStorage['cursorColor'];x=localStorage['debug']=='true';W=localStorage['grid']=='true';if(localStorage['mapStyle']=='Old')n['style']='Old';X=localStorage['sectors']=='true';if(localStorage['sectorShift']=='true'){Y=!![];Z=0.8;};a0=localStorage['translucent']=='true';if(localStorage['mobile'])s=localStorage['mobile'];if(localStorage['detector']=='true'){if(s){localStorage['detector']=![];a1=![];}else a1=!![];};a2=localStorage['sync']=='true';if(localStorage['zoomlevel'])u=+localStorage['zoomlevel'];else localStorage['zoomlevel']=u;if(localStorage['language'])o['language']=localStorage['language'];else localStorage['language']=o['language'];if(localStorage['statistics'])try{a4=JSON['parse'](atob(localStorage['statistics']));}catch(aa){localStorage['statistics']=btoa(JSON['stringify'](a4));}else localStorage['statistics']=btoa(JSON['stringify'](a4));a3=localStorage['expSectors']==='true';c8();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+l);for(let ab of document['getElementsByClassName']('palette-color-box'))ab['addEventListener']('click',()=>{w=ab['style']['backgroundColor']['match'](v);w[0x0]*=0x1;w[0x1]*=0x1;w[0x2]*=0x1;});let ac='';for(let ad in C)ac+='<li\x20id=\x22'+ad+'\x22><span\x20style=\x22cursor:pointer;color:'+C[ad]['color']+'\x22>'+ad+'<span></li>';let ae=document['createElement']('div');ae['id']='minimapbg';ae['style']=n['minimapbg'][n['style']];ae['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+n['width'][n['style']]+'px;height:'+n['height'][n['style']]+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+n['translucent'][a0]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](ae);let af=du('minimap-text'),ag=du('minimap-box'),ah=du('minimap-config');let ai=du('minimap'),aj=du('minimapSectors'),ak=du('minimapCover'),al=ai['getContext']('2d'),am=aj['getContext']('2d'),an=ak['getContext']('2d');for(let ao of ag['childNodes']){ao['width']=ao['offsetWidth'];ao['height']=ao['offsetHeight'];};dR(al,![]);dR(am,![]);setTimeout(()=>{for(let ap=0x0,aq=0x0,ac=document['getElementsByTagName']('canvas');ap<ac['length'];ap++){if(ac[ap]['id']=='minimap')aq++;if(aq>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let as={'updateM':function(){this['hWidth']=ai['width']>>>0x1;this['hHeight']=ai['height']>>>0x1;},'updateD':function(){this['width']=ai['width']/t&0x7fe;this['height']=ai['height']/t&0x7fe;this['borderW']=ai['width']-this['width']*t>>>0x1;this['borderH']=ai['height']-this['height']*t>>>0x1;this['xLeft']=I-(this['width']>>>0x1);this['yTop']=J-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};as['updateM']();as['updateD']();let at=new XMLHttpRequest(),au='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';at['onloadend']=function(){if(this['status']==0xc8){try{let av=document['createElement']('script');av['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](av);}catch(aw){};C=JSON['parse'](this['responseText']);for(let D in C){D=C[D];if(D['chunks']&&(D['chunks']=='true'||+D['chunks']==0x1))D['chunks']=!![];};if(x){console['log']('Factions\x20:');console['log'](C);};D=localStorage['faction']||Object['keys'](C)[0x0];bd();let ay='';for(let az in C)ay+='<li\x20id=\x22'+az+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:\x20normal;\x20color:\x20'+C[az]['color']+'\x22>'+az+'<span></li>';du('listF')['innerHTML']=ay;for(let aA in C)du(aA)['onclick']=function(){dr('factions');du(D)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=D=this['id'];bd();};du(D)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+au+'\x0aStatus\x20:\x20'+this['status']);at=null;};at['open']('GET',au);at['send']();di();du('hide-map')['onclick']=()=>{N=![];ag['style']['display']='none';ah['style']['display']='none';af['style']['display']='block';af['innerText']='Minimap';af['style']['cursor']='pointer';};af['onclick']=()=>{N=!![];ag['style']['display']='block';ah['style']['display']='block';af['style']['display']='none';af['style']['cursor']='default';bl();};du('zoom-plus')['addEventListener']('mousedown',aB=>{aB['preventDefault']();P=!![];Q=![];bj();},![]);du('zoom-plus')['addEventListener']('mouseup',()=>P=![],![]);du('zoom-minus')['addEventListener']('mousedown',aC=>{aC['preventDefault']();Q=!![];P=![];bk();},![]);du('zoom-minus')['addEventListener']('mouseup',()=>Q=![],![]);if(s){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');ah['style']['lineHeight']='27px';let aD=document['createElement']('div'),aE=document['createElement']('canvas');aE['height']=aE['width']=0x15;let aF=aE['getContext']('2d');aF['strokeStyle']='white';aD['style']='position:\x20absolute;\x20top:\x20'+(window['innerHeight']+aE['height'])/0x2+'px;\x20left:\x20'+(window['innerWidth']+aE['width'])/0x2+'px;';aD['appendChild'](aE);document['body']['appendChild'](aD);let aG=aE['getContext']('2d'),aH=E['getContext']('2d')['getImageData'](+aD['style']['left']['replace']('px','')[0x0],+aD['style']['top']['replace']('px','')[0x0],aE['width'],aE['height'])['data'],aI=aG['getImageData'](0x0,0x0,aE['width'],aE['height']),aJ=aI['data'];for(let J=0x0;J<aE['height'];J++)aJ[(aE['width']*(0.5+J)<<0x2)+0x3]=0xff;for(let I=0x0;I<aE['width'];I++)aJ[(aE['width']*((aE['height']>>>0x1)-0x1)+I<<0x2)+0x3]=0xff;aG['putImageData'](aI,0x0,0x0);aE['update']=function(){let aH=F['getImageData'](+aD['style']['left']['replace']('px','')[0x0],+aD['style']['top']['replace']('px','')[0x0],aE['width'],aE['height'])['data'],aI=aG['getImageData'](0x0,0x0,this['width'],this['height']),aJ=aI['data'];for(let J=0x0;J<this['height'];J++){let aQ=this['width']*(0.5+J)<<0x2;if(aH[aQ]===0x80&&aH[aQ+0x1]===0x80&&aH[aQ+0x2]===0x80){aJ[aQ]=0x0;aJ[aQ+0x1]=0xe6;aJ[aQ+0x2]=0xe6;}else{aJ[aQ]=0xff^aH[aQ];aJ[aQ+0x1]=0xff^aH[aQ+0x1];aJ[aQ+0x2]=0xff^aH[aQ+0x2];};};for(let I=0x0;I<this['width'];I++){let aQ=this['width']*((this['height']>>>0x1)-0x1)+I<<0x2;if(aH[aQ]===0x80&&aH[aQ+0x1]===0x80&&aH[aQ+0x2]===0x80){aJ[aQ]=0x0;aJ[aQ+0x1]=0xe6;aJ[aQ+0x2]=0xe6;}else{aJ[aQ]=0xff^aH[aQ];aJ[aQ+0x1]=0xff^aH[aQ+0x1];aJ[aQ+0x2]=0xff^aH[aQ+0x2];};};aG['putImageData'](aI,0x0,0x0);};E['addEventListener']('touchmove',()=>aE['update'](),![]);setInterval(()=>{let aT=0x0,aU=0x0;if(window['location']['search']){let aV=window['location']['search']['match'](v);aT=+aV[0x0];aU=+aV[0x1];};if(I!=aT||J!=aU){I=aT;J=aU;if(!N)return;if(a1){dG(t);as['updateD']();t==0x1?bl():setTimeout(bl,0x64);}else{a2?dG(t):dG();bl();};};},0x96);}else{window['addEventListener']('mousemove',aW=>{let aX=G['innerText']['match'](v),aY=+aX[0x0],aZ=+aX[0x1];if(I!=aY||J!=aZ){I=aY;J=aZ;A=aW['clientX'];B=aW['clientY'];if(!N)return;if(a1){dG(t);as['updateD']();t==0x1?bl():setTimeout(bl,0x64);}else{a2?dG(t):dG();bl();};};},![]);};let b0=document['createElement']('div');b0['id']='settingsDiv';b0['style']='width:\x20'+o['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+n['settings'][n['style']];b0['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+o['text']['title']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+V+'\x22>'+V+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(W?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+n['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(X?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a3?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(Y?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(a0?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(a1?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(a2?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+o['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22statText\x22>'+o['text']['stat']+'</span><span\x20id\x20=\x20\x22stat\x22\x20style\x20=\x20\x22textButton\x22>'+a4['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+o['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](b0);window['addEventListener']('unload',()=>localStorage['zoomlevel']=u);(()=>{let b1=du('infoText')['getElementsByTagName']('a');b1[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');b1[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();E['addEventListener']('click',()=>{if(H['innerText']!=0x3)return;let b2;for(let b3=0x0;b3<T['templates']['length'];b3++){let b4=T['templates'][b3];b2=S[b4]['ctx']['getImageData'](I-L[b4]['x'],J-L[b4]['y'],0x1,0x1)['data'];if(b2[0x3]===0xff)break;};if(dz(w[0x0],w[0x1],w[0x2],b2[0x0],b2[0x1],b2[0x2]))setTimeout(()=>{if(H['innerText']==0x2){du('stat')['innerText']=a4['pixels']++;localStorage['statistics']=btoa(JSON['stringify'](a4));};},0x76c);});if(s){du('detector')['style']['cursor']='not-allowed';du('detectorText')['style']['cursor']='not-allowed';};window['addEventListener']('keydown',b5=>{let b6=b5['keyCode'];switch(b6){case 0x1b:du('settingsDiv')['style']['display']='none';break;case 0x60:case 0x30:if(localStorage['debug']=='true'){x=![];console['log']('Debug\x20is\x20off');}else{x=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=x;break;case 0x61:case 0x31:dr('factions');break;case 0x62:case 0x32:du('settingsButton')['click']();break;case 0x63:case 0x33:du('sectors')['click']();break;case 0x64:case 0x34:du('detector')['click']();break;};});du('cursorColorText')['onclick']=du('cursorColor')['onclick']=()=>{let b7=m['indexOf'](V)+0x1;if(b7===m['length'])b7=0x0;localStorage['cursorColor']=du('cursorColor')['innerText']=du('cursorColor')['style']['color']=V=m[b7];;di();};du('gridText')['onclick']=du('grid')['onclick']=()=>{an['clearRect'](0x0,0x0,ak['width'],ak['height']);du('grid')['innerText']=(localStorage['grid']=W=!W)?'On':'Off';di();};du('mapStyleText')['onclick']=du('mapStyle')['onclick']=()=>{localStorage['mapStyle']=n['style']=n['style']=='Old'?'New':'Old';ag['style']['width']=n['width'][n['style']]+'px';ag['style']['height']=n['height'][n['style']]+'px';for(let b8 of ag['childNodes']){b8['width']=b8['offsetWidth'];b8['height']=b8['offsetHeight'];};dR(al,![]);dR(am,![]);a1||a2?dG(t):dG();du('settingsDiv')['style']='width:\x20'+du('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+du('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+du('settingsDiv')['style']['left']+';\x20top:\x20'+du('settingsDiv')['style']['top']+';\x20'+n['settings'][n['style']];du('minimapbg')['style']=n['minimapbg'][n['style']];du('mapStyle')['innerText']=n['style'];di();a5();};du('sectorsText')['onclick']=du('sectors')['onclick']=()=>{X=!X;c8();X?a5():am['clearRect'](0x0,0x0,aj['width'],aj['height']);du('sectors')['innerText']=X?'On':'Off';localStorage['sectors']=X;};du('settingsDivCancel')['onclick']=()=>dr('settingsDiv');du('sectorShiftText')['onclick']=du('sectorShift')['onclick']=()=>{Z=(Y=!Y)?0.8:0x1;du('sectorShift')['innerText']=Y?'On':'Off';localStorage['sectorShift']=Y;a5();};du('translucentText')['onclick']=du('translucent')['onclick']=()=>{a0=!a0;du('translucent')['innerText']=a0?'On':'Off';du('minimapSectors')['style']['opacity']=n['translucent'][a0];localStorage['translucent']=a0;a5();};du('detectorText')['onclick']=du('detector')['onclick']=()=>{if(s)return;if(a1=!a1){du('zoom-minus')['style']['cursor']=du('zoom-plus')['style']['cursor']='not-allowed';as['updateD']();}else du('zoom-minus')['style']['cursor']=du('zoom-plus')['style']['cursor']='pointer';du('detector')['innerText']=a1?'On':'Off';localStorage['detector']=a1;dG(t);c8();bl();di();};du('languageText')['onclick']=du('language')['onclick']=function(){let b9=o['availableLan']['indexOf'](o['language'])+0x1;if(b9===o['availableLan']['length'])b9=0x0;o['language']=o['availableLan'][b9];localStorage['language']=du('language')['innerText']=o['language'];du('settingsDiv')['style']['width']=o['width'];for(let ba in o['text']){let bb=du(ba+'Text');if(bb)bb['innerHTML']=o['text'][ba];};let bc=du('infoText')['getElementsByTagName']('a');bc[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bc[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};du('syncText')['onclick']=du('sync')['onclick']=()=>{(a2=!a2)?dG(t):dG();localStorage['sync']=a2;du('sync')['innerText']=a2?'On':'Off';c8();bl();di();};du('expSectorsText')['onclick']=du('expSectors')['onclick']=()=>{a3=!a3;du('expSectors')['innerText']=a3?'On':'Off';localStorage['expSectors']=a3;!a3&&am['clearRect'](0x0,0x0,ai['width'],ai['height']);c8();a5();};function bd(){let be=''+C[D]['data']+(C[D]['type']==0x1?'?'+new Date()['getTime']():'');x&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+D+'\x0aURL\x20:\x20'+be);K={};L={};M={};S={};let bf=new XMLHttpRequest();bf['onloadend']=function(){if(this['status']==0xc8){K=JSON['parse'](this['responseText']);for(let bg in K){K[bg]['x']*=0x1;K[bg]['y']*=0x1;K[bg]['type']==='grid'?M[bg]=K[bg]:L[bg]=K[bg];};for(let bh of T['templates'])bo(bh,()=>x&&console['log']('Img\x20updated'));for(let bi of T['grids'])bo(bi,()=>x&&console['log']('Grid\x20updated'));x&&console['log']('Update\x20completed',K,L,M);}else console['error']('Error\x20:\x20'+C[D]['data']+'\x0aStatus\x20:\x20'+this['status']);};bf['open']('GET',be);bf['send']();};function bj(){if(!P||a1)return;if(a2){localStorage['sync']=a2=![];u=t;du('sync')['innerText']=a2?'On':'Off';c8();};u*=1.1;if(u>0x20){u=0x20;return;};a1?as['updateD']():a2?dG(t):dG();di();a5();setTimeout(bj,R);};function bk(){if(!Q||a1)return;if(a2){localStorage['sync']=a2=![];u=t;du('sync')['innerText']=a2?'On':'Off';c8();};u/=1.1;if(u<0x1){u=0x1;return;};a1?as['updateD']():a2?dG(t):dG();di();bl();setTimeout(bk,R);};function bl(){if(!N||!L)return;T['grids']=[];T['templates']=[];for(let bm in L)if(I['between'](L[bm]['x']-q,L[bm]['x']+L[bm]['width']+q)&&J['between'](L[bm]['y']-r,L[bm]['y']+L[bm]['height']+r))if(S[bm])T['templates'][T['templates']['length']]=bm;else{bo(bm);delete L[bm];};if(X)for(let bn in M)if(I['between'](M[bn]['x']-q,M[bn]['x']+M[bn]['width']+q)&&J['between'](M[bn]['y']-r,M[bn]['y']+M[bn]['height']+r))if(S[bn])T['grids'][T['grids']['length']]=bn;else{bo(bn);delete M[bn];};if(T['grids']['length']===0x0&&T['templates']['length']===0x0){if(O&&!P&&!Q){O=![];ag['style']['display']='none';af['style']['display']='block';af['innerText']='There\x27s\x20nothing\x20here';};}else{if(!O){O=!![];ag['style']['display']='block';af['style']['display']='none';};if(a7){a7=![];window['requestAnimationFrame'](()=>{a5();a7=!![];});};};};function bo(bp,bq){let br=new Image(),bs=0x0;br['crossOrigin']='';br['src']=''+C[D]['images']+bp+'.png';br['onerror']=()=>{console['log']('Download\x20failed\x0asrc\x20:\x20'+br['src']+'\x0aName\x20:\x20'+bp);if(K[bp]['type']==='grid')delete M[bp];else delete L[bp];delete K[bp];delete S[bp];};br['onload']=()=>{const bt=0x100;let bu=document['createElement']('canvas'),bv=bu['getContext']('2d'),bw=br['width'],bx=br['height'];bu['width']=bw;bu['height']=bx;bv['drawImage'](br,0x0,0x0,bw,bx);let by=bv['getImageData'](0x0,0x0,bw,bx),bz=by['data'];if(!C[D]['chunks']||br['width']<=bt*1.5&&br['height']<=bt*1.5){S[bp]=bu;S[bp]['ctx']=bv;K[bp]['type']==='grid'?M[bp]=K[bp]:L[bp]=K[bp];x&&console['log'](K,'\x0aName\x20:\x20'+bp+'\x0aType\x20:\x20'+(K[bp]['type']==='grid'?'grid':'image'));if(bq)bq();bl();return;};let bA=performance['now']();for(let J=0x0,bC=bt>>0x1;bx-J>bC;J+=bt)for(let I=0x0;bw-I>bC;I+=bt){const bE=bp+'_#_'+I/bt+'_'+J/bt,bF=bw-I>=bt?bt:bw-I,bG=bx-J>=bt?bt:bx-J,bH=bF<<0x2,bI=bH*bG;let bJ=new Uint8ClampedArray(bI),bK=0x0,bL=0x0,bM=null,bN=0x0;for(let bO=0x0,bP=bw<<0x2,bQ=bw*J+I<<0x2,bR=0x0,bS,bC;bO!==bG;bO+=0x1){bS=bQ+bO*bP;bC=bR+bH;while(bR!==bC){bJ[bR]=bz[bS];bR+=0x1;bS+=0x1;};};for(let bU=0x3;bU<bI;bU+=0x4)if(bJ[bU]!==0x0){bM=~~((bU+0x1)/bH);break;};if(bM===null)continue;for(let bV=bI-0x1,bC=bM*bH;bV>bC;bV-=0x4)if(bJ[bV]!==0x0){bN=(bV+0x1)/bH;bN=bG-(~~bN===bN?bN:~~bN+0x1);break;};bX:for(let I=0x3,bZ=bM*bH,bC=(bF-bN)*bH;I<bH;I+=0x4)for(let bR=I+bZ;bR<bC;bR+=bH)if(bJ[bR]!==0x0){bK=I>>>0x2;break bX;};c2:for(let I=bH-0x1,c4=bM*bH,bC=(bF-bN)*bH,c6=bK<<0x2;I>c6;I-=0x4)for(let bR=I+c4;bR<bC;bR+=bH)if(bJ[bR]!==0x0){bL=bF-(I+0x1>>>0x2);break c2;};K[bE]={'x':K[bp]['x']+I,'y':K[bp]['y']+J};S[bE]=document['createElement']('canvas');S[bE]['ctx']=S[bE]['getContext']('2d');if(bM||bN||bK||bL){K[bE]['width']=S[bE]['width']=bF-bK-bL;K[bE]['height']=S[bE]['height']=bG-bM-bN;S[bE]['ctx']['drawImage'](bu,I+bK,J+bM,S[bE]['width'],S[bE]['height'],0x0,0x0,S[bE]['width'],S[bE]['height']);K[bE]['x']+=bK;K[bE]['y']+=bM;}else{K[bE]['width']=S[bE]['width']=bF;K[bE]['height']=S[bE]['height']=bG;S[bE]['ctx']['drawImage'](bu,I,J,S[bE]['width'],S[bE]['height'],0x0,0x0,S[bE]['width'],S[bE]['height']);};K[bp]['type']==='grid'?M[bE]=K[bE]:L[bE]=K[bE];bs+=0x1;};x&&console['log'](K,'\x0aName\x20:\x20'+bp+'\x0aType\x20:\x20'+(K[bp]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+bs+'\x0aTime\x20:\x20'+(performance['now']()-bA));delete K[bp];delete S[bp];bu=null;bv=null;by=null;bz=null;if(bq)bq();bl();};};function c8(){if(a1){if(X||a3)a5=()=>{d3();cc(t);};else a5=d3;}else if(a2){if(X||a3)a5=()=>{c9(t);cc(t);};else a5=()=>c9(t);}else{if(X||a3)a5=()=>{c9();cc();};else a5=c9;};};function c9(ca=u){al['clearRect'](0x0,0x0,ai['width'],ai['height']);for(let cb of T['templates'])al['drawImage'](S[cb],~~((L[cb]['x']-y)*ca),~~((L[cb]['y']-z)*ca),~~(S[cb]['width']*ca),~~(S[cb]['height']*ca));};function cc(cd=u){if(a3){ci(cd);return;};am['clearRect'](0x0,0x0,aj['width'],aj['height']);let ce,cf,cg=cd*Z;if(a1){ce=(as['xLeft']-I)/Z+I;cf=(as['yTop']-J)/Z+J;}else{ce=(y-I)/Z+I;cf=(z-J)/Z+J;};for(let ch of T['grids'])am['drawImage'](S[ch],~~((M[ch]['x']-ce)*cg),~~((M[ch]['y']-cf)*cg),~~(S[ch]['width']*cg),~~(S[ch]['height']*cg));};function ci(cj=u){am['clearRect'](0x0,0x0,aj['width'],aj['height']);const ck=0x1e;function cl(I,J,co,cp,cq){am['strokeStyle']='rgb('+cq+')';am['beginPath']();am['moveTo'](I,J);am['lineTo'](co,cp);am['stroke']();};function cr(I,ct){return~~(I*0xff/ct);};function cu(I,cw,cx){return I>cx||I<cw?0x0:I-cw;};am['lineWidth']=~~(cj/0x3);am['strokeStyle']='rgb(20,20,20)';let cy=(ck-y%ck)*cj,cz=(ck-z%ck)*cj,cA=ck*cj,cB=ck/0x2,cC=ai['width']+cj,cD=ai['height']+cj,cE=as['hWidth']%cj-cj,cF=as['hHeight']%cj-cj,cG=cy+(cj-cE),cH=cz+(cj-cF),cI=(~~(y/ck)+0x1)*ck,cJ=(~~(z/ck)+0x1)*ck;const cK=0x190,cL=cK/0x3,cM=cL<<0x1;for(let cN=cG,I=cI,cP=cF+cD,cQ=dP(I%cK),cR=cN+cE;cN<cC;cN+=cA,I+=ck,cQ=dP(I%cK),cR+=cA)cl(cR,cF,cR,cP,[cr(cu(cQ,0x0,cL),cL),cr(cu(cQ,cL,cM),cL),cr(cu(cQ,cM,cK),cL)]);for(let cS=cH,J=cJ,cU=cE+cC,cV=dP(J%cK),cW=cS+cF;cS<cD;cS+=cA,J+=ck,cV=dP(J%cK),cW+=cA)cl(cE,cW,cU,cW,[cr(cu(cV,0x0,cL),cL),cr(cu(cV,cL,cM),cL),cr(cu(cV,cM,cK),cL)]);if(cj>0x2)return;am['strokeStyle']='rgb(255,255,255)';am['fillStyle']='rgb(20,20,20)';am['font']=~~(ck*cj/0x3)+'px\x20fantasy';am['textBaseline']='top';for(let cX=cG,I=cI,cZ=cF+cD;cX<cC;cX+=cA,I+=ck)am['strokeText'](I,cX,0x0),am['fillText'](I,cX,0x0);for(let d0=cH,J=cJ,d2=cE+cC;d0<cD;d0+=cA,J+=ck)am['strokeText'](J,0x0,d0),am['fillText'](J,0x0,d0);};function d3(d4=t){let d5=0x0,d6=0x0;for(let d7=d4*d4;d7>0x1;d7>>>=0x1)d6++;d5=d6>>>0x1;U['canvas']['width']=as['width'];U['canvas']['height']=as['height'];for(let d8 of T['templates'])U['ctx']['drawImage'](S[d8],as['xLeft']-L[d8]['x']-0x1,as['yTop']-L[d8]['y']-0x1,as['width'],as['height'],0x0,0x0,as['width'],as['height']);let d9=U['ctx']['getImageData'](0x0,0x0,U['canvas']['width'],U['canvas']['height']),da=d9['data'],db=F['getImageData'](~~(A-(as['width']<<d5>>>0x1)),~~(B-(as['height']<<d5>>>0x1)),~~(as['width']*d4),~~(as['height']*d4))['data'],dc=0x0,dd=t<<0x2;for(let de=0x0;de<as['sizeRGBA'];de+=as['widthRGBA']){dc=de<<d6;let df=de,dg=dc,dh=de+as['widthRGBA'];while(df<dh){df+=0x4;if(db[(dg+=dd)+0x3]===0x0)continue;if(dz(da[df],da[df+0x1],da[df+0x2],db[dg],db[dg+0x1],db[dg+0x2]))da[df]=da[df+0x1]=da[df+0x2]=~~((da[df]+da[df+0x1]+da[df+0x2])/0x3);else{da[df]=0xff;da[df+0x1]=da[df+0x2]=0x0;};};};if(t===0x1){al['putImageData'](d9,0x0,0x0);}else{U['ctx']['putImageData'](d9,0x0,0x0);al['clearRect'](0x0,0x0,ai['width'],ai['height']);al['drawImage'](U['canvas'],~~(as['borderW']-d4),~~(as['borderH']-d4),~~(as['width']*d4),~~(as['height']*d4));};db=null;};function di(dj=u){an['clearRect'](0x0,0x0,ak['width'],ak['height']);if(a1||a2)dj=t;if(dj<=0x2)return;if(W&&dj>4.6){an['beginPath']();let dk=ai['width']+dj,dl=ai['height']+dj,dm=(ai['width']>>>0x1)%dj-dj,dn=(ai['height']>>>0x1)%dj-dj;an['lineWidth']=0x1;for(let I=0x0;I<=dk;I+=dj){an['moveTo'](I+dm,dn);an['lineTo'](I+dm,dl+dn);};for(let J=0x0;J<=dl;J+=dj){an['moveTo'](dm,J+dn);an['lineTo'](dk+dm,J+dn);};an['strokeStyle']='rgb(20,20,20)';an['stroke']();};an['beginPath']();an['lineWidth']=dj/0x3;an['strokeStyle']=V;an['rect'](ai['width']>>>0x1,ai['height']>>>0x1,dj,dj);an['stroke']();};function dr(ds){if(typeof ds==='string'){let dt=document['getElementById'](ds);dt['style']['display']=dt['style']['display']==='none'?'block':'none';}else if(typeof ds==='object')ds['style']['display']=ds['style']['display']==='none'?'block':'none';};function du(dv){return document['getElementById'](dv);};function dw(dx){let dy;dx=dx||window['event'];if(dx['wheelDelta']){dy=dx['wheelDelta']/0x78;if(window['opera'])dy=~dy+0x1;}else if(dx['detail'])dy=-dx['detail']/0x3;dy==0x1?t<<=0x1:t>>>=0x1;if(t>0x40)t=0x40;else if(t<0x1)t=0x1;else if(a1){setTimeout(()=>{as['updateD']();dG(t);d3();X&&cc(t);di();},0xc8);}else if(a2){dG(t);di();bl();};};function dz(dA,dB,dC,dD,dE,dF){return(dA>dD?dA-dD:dD-dA)<0x1e&&(dB>dE?dB-dE:dE-dB)<0x1e&&(dC>dF?dC-dF:dF-dC)<0x1e;};function dG(dH=u){q=(y=ai['width']>>>0x1)/dH;r=(z=ai['height']>>>0x1)/dH;y=I-y/dH;z=J-z/dH;};function dI(dJ,I,J){if(I<0x0||J<0x0)return;E['dispatchEvent'](new MouseEvent(dJ,{'clientX':I,'clientY':J,'bubbles':!![]}));};function dM(dN,dO){return Math['round'](dN-0.5+Math['random']()*(dO-dN+0x1));};function dP(I){return I>0x0?I:-I;};function dR(dS,dT){dS['mozImageSmoothingEnabled']=dS['webkitImageSmoothingEnabled']=dS['msImageSmoothingEnabled']=dS['imageSmoothingEnabled']=dT;};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let dU=document['createElement']('script');dU['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](dU);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
