// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.9.7
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';(function specialFirst(){let c=eb('timer');if(c)c['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){let d=eb('message');if(d)d['remove']();else setTimeout(specialSecond,0x14d);}());let e=document['createElement']('link');e['rel']='stylesheet';e['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](e);let f=document['createElement']('div');f['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](f);eb('settingsButton')['addEventListener']('click',()=>{let g=eb('settingsDiv');e8(g);if(g['style']['display']==='block'){g['style']['left']=(window['innerWidth']-g['offsetWidth']>>>0x1)+'px';g['style']['top']=(window['innerHeight']-g['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(h,i){return this>h&&this<i;};window['testPerformance']=()=>{console['log']('Start\x20testing');let j=null,k=!![],l=N['width']>>>0x1,m=N['height']>>>0x1;setTimeout(()=>clearInterval(j),0x1770);j=setInterval(()=>{if(k)k=![],ep('mousemove',l+et(0x0,l>>>0x1),m+et(0x0,m>>>0x1));else k=!![],ep('mousemove',l-et(0x0,l>>>0x1),m-et(0x0,m>>>0x1));},0x32);};const n='2.6.9.9',o=0x20,p=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],q={'init':function(){this['style']=this['style'];},get 'style'(){return this['_style'];},set 'style'(s){if(this['availableStyles']['includes'](s))this['_style']=s;else console['warn']('Style\x20is\x20missing'),this['_style']='New';let t='_'+this['_style'];for(let u of['width','height','settings','minimapbg'])this[u]=this[t][u];},'_style':'New','availableStyles':['New','Old'],'_New':{'width':0x118,'height':0xc8,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'_Old':{'width':0x1a4,'height':0x12c,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;'},'settings':{},'minimapbg':{},'width':{},'height':{},'translucent':{'false':0x1,'true':0.5}},r={'init':function(){this['language']=this['language'];},'availableLan':['ru','en','tr'],get 'language'(){return this['_language'];},set 'language'(v){if(this['availableLan']['includes'](v))this['_language']=v;else console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist'),this['_language']='en';let w='_'+this['_language'];this['width']=this[w]['width'];this['text']=this[w]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'on':'On','off':'Off','title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','autoSelect':'Автовыбор\x20цвета:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'pixels':'Поставленные\x20пиксели:\x20','pixelsDay':'Поставленные\x20за\x20день\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'on':'On','off':'Off','title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','autoSelect':'Auto\x20color\x20selection:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'pixels':'Correct\x20pixels:\x20','pixelsDay':'Correct\x20pixels\x20per\x20day:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}},'_tr':{'width':'280px','text':{'on':'Açık','off':'Kapalı','title':'MLP\x20Pixel\x20:\x20harita\x20ayarları','cursorColor':'İmleç\x20rengi:\x20','grid':'Izgara:\x20','mapStyle':'Minimap\x20stili:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Yarı\x20saydam:\x20','detector':'Hata\x20sedektörü:\x20','autoSelect':'Otomatik\x20renk\x20seçme:\x20','language':'Dil:\x20','sync':'Zoom\x20sync:\x20','info':'<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20tarafından\x20yapıldı\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20için\x20düzenlendi\x20|\x20V.\x20'+n,'pixels':'Doğru\x20pixeller:\x20','pixelsDay':'Günlük\x20doğru\x20pixeller:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};q['init']();r['init']();let z=null,A=null,B=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),C=0x1,D=0x5,E=new RegExp(/-?\d+/g),F=eb('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](E),G=!!void'Child\x20of\x20starfall',H=void'Luna,\x20child\x20of\x20starfall',I=void'Sunder\x20the\x20daylight',J=void'Open\x20my\x20heart',K=void'Let\x20me\x20bleed\x20thin',L={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2,'chunks':![]}},M='New\x20Lunar\x20Republic',N=eb('canvas'),O=N['getContext']('2d'),P=eb('coordinatesNote'),Q=document['getElementsByClassName']('palette-color-box'),R=[],S=eb('timer'),T=0x0,U=0x0,V,W,X,Y=!![],Z=!![],a0=![],a1=![],a2=0x32,a3=[],a4={'grids':[],'templates':[]},a5={'canvas':document['createElement']('canvas'),'ctx':void 0x0},a6={'getLine':function(T){let ao=0x190,ap=ew(T%ao);if(this['_data']['has'](ap))return this['_data']['get'](ap);let aq=ao/0x3,ar=aq<<0x1,as=[this['conv'](this['fromTo'](ap,0x0,aq),aq),this['conv'](this['fromTo'](ap,aq,ar),aq),this['conv'](this['fromTo'](ap,ar,ao),aq)];this['_data']['set'](ap,as);return as;},'_data':new Map(),'conv':(T,au)=>~~(((T<<0x8)-T)/au),'fromTo':(T,aw,ax)=>T>ax||T<aw?0x0:T-aw},a7={'stat':{'pixels':0x0,'pixelsDay':0x0,'lastDate':0x0},'lastCoords':{'x':null,'y':null}},a8='springGreen',a9=![],aa=![],ab=![],ac=0x1,ad=![],ae=![],af=![],ag=![],ah=![],ai=()=>{},aj=!![],ak=!![],al=null,am=0x32;for(let ay of Q)R['push'](ay['style']['backgroundColor']['match'](E)['map'](T=>+T));if(window['location']['search']&&window['location']['search']['match'](E)['length']==0x3)C=+window['location']['search']['match'](E)[0x2];else C=0x1;a5['ctx']=a5['canvas']['getContext']('2d');let aA={'lastZoom':C,'setZoom':function(aB){this['zoom']=C=aB;if(ag){en(C);dY();c3();}else if(ae&&~~C===C){setTimeout(()=>{b1['updateD']();en(C);dJ();aa&&cW(C);dY();},0xc8);};},'smoothZoom':function(aC){this['smoothZoomFrom']=this['zoom'];this['smoothZoomTo']=aC;this['smoothZoomStartDate']=Date['now']();this['smoothZoomUpdate']();},'executeZoom':function(aD){this['setZoom'](aD>0x40?0x40:aD<0x1?0x1:aD);},'smoothZoomUpdate':function(){let aE=(Date['now']()-this['smoothZoomStartDate'])/0xc8;if(aE>0x1){this['executeZoom'](this['smoothZoomTo']);return;};window['requestAnimationFrame'](()=>this['smoothZoomUpdate']());this['executeZoom'](this['smoothZoomFrom']+(0x1-(0x1-(aE>0x1?0x1:aE<0x0?0x0:aE))**0x3)*(this['smoothZoomTo']-this['smoothZoomFrom']));}};aA['setZoom'](C);if(N['addEventListener'])N['addEventListener']('mousewheel',ed,![]);else if(N['attachEvent'])N['attachEvent']('onmousewheel',ed);if(!B&&/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',ed);}catch(aF){};if(localStorage['cursorColor']&&p['includes'](localStorage['cursorColor']))a8=localStorage['cursorColor'];G=localStorage['debug']=='true';a9=localStorage['grid']=='true';ad=localStorage['translucent']=='true';aa=localStorage['sectors']=='true';ag=localStorage['sync']=='true';ah=localStorage['expSectors']=='true';af=localStorage['autoSelect']=='true';if(localStorage['mapStyle']=='Old')q['style']='Old';if(localStorage['sectorShift']=='true'){ab=!![];ac=0.8;};if(localStorage['mobile'])B=localStorage['mobile'];if(localStorage['detector']=='true'){if(B){localStorage['detector']=![];ae=![];}else ae=!![];};if(localStorage['zoomlevel'])D=+localStorage['zoomlevel'];else localStorage['zoomlevel']=D;if(localStorage['language'])r['language']=localStorage['language'];else localStorage['language']=r['language'];{let aG=a7['stat'],aH=new Date();if(localStorage['statistics']){console['log']('Statistics\x20are\x20loading...');try{aG=JSON['parse'](atob(localStorage['statistics']));console['log']('Statistics\x20uploaded\x20successfully');if(aG['lastDate']){aG['lastDate'][0x0]*=0x1;aG['lastDate'][0x1]*=0x1;aG['lastDate'][0x2]*=0x1;};console['log'](aG);}catch(aI){console['log']('Something\x20went\x20wrong');console['log'](aI);}}else console['log']('Statistics\x20not\x20found');if(aG['pixels']==void 0x0||aG['pixelsDay']==void 0x0||aG['lastDate']==void 0x0){console['log']('Some\x20elements\x20are\x20missing');if(!aG['lastDate'])aG['lastDate']=[aH['getYear'](),aH['getMonth'](),aH['getDay']()],aG['pixelsDay']=0x0;if(!aG['pixels'])aG['pixels']=0x0;if(!aG['pixelsDay'])aG['pixelsDay']=0x0;G&&console['log'](aG);};if(aG['lastDate'][0x0]!=aH['getYear']()||aG['lastDate'][0x1]!=aH['getMonth']()||aG['lastDate'][0x2]!=aH['getDay']()){aG['lastDate']=[aH['getYear'](),aH['getMonth'](),aH['getDay']()];aG['pixelsDay']=0x0;};a7['stat']=aG;localStorage['statistics']=btoa(JSON['stringify'](aG));};cS();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+n);for(let aJ of Q)aJ['addEventListener']('click',()=>F=aJ['style']['backgroundColor']['match'](E)['map'](T=>+T));let aL='';for(let aM in L)aL+='<li\x20id=\x22'+aM+'\x22><span\x20style=\x22cursor:pointer;color:'+L[aM]['color']+'\x22>'+aM+'<span></li>';let aN=document['createElement']('div');aN['id']='minimapbg';aN['style']=q['minimapbg'];aN['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+q['width']+'px;height:'+q['height']+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+q['translucent'][ad]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](aN);let aO=eb('minimap-text'),aP=eb('minimap-box'),aQ=eb('minimap-config'),aR=eb('minimap'),aS=eb('minimapSectors'),aT=eb('minimapCover'),aU=aR['getContext']('2d'),aV=aS['getContext']('2d'),aW=aT['getContext']('2d');for(let aX of aP['childNodes']){aX['width']=aX['offsetWidth'];aX['height']=aX['offsetHeight'];};ey(aU,![]);ey(aV,![]);setTimeout(()=>{for(let aY=0x0,aZ=0x0,aL=document['getElementsByTagName']('canvas');aY<aL['length'];aY++){if(aL[aY]['id']=='minimap')aZ++;if(aZ>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let b1={'updateM':function(){this['hWidth']=aR['width']>>>0x1;this['hHeight']=aR['height']>>>0x1;},'updateD':function(){this['width']=aR['width']/C&0x7fe;this['height']=aR['height']/C&0x7fe;this['borderW']=aR['width']-this['width']*C>>>0x1;this['borderH']=aR['height']-this['height']*C>>>0x1;this['xLeft']=T-(this['width']>>>0x1);this['yTop']=U-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};b1['updateM']();b1['updateD']();let b2=new XMLHttpRequest(),b3='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';b2['onloadend']=function(){if(this['status']==0xc8){try{let b4=document['createElement']('script');b4['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](b4);}catch(b5){};L=JSON['parse'](this['responseText']);console['log']('Loaded\x20factions');console['log'](L);if(localStorage['injection']){let b6=JSON['parse'](localStorage['injection']);for(let M in b6)L[M]=b6[M];console['log']('Updated\x20factions');console['log'](L);};for(let M in L){M=L[M];if(M['chunks']&&(M['chunks']=='true'||+M['chunks']==0x1))M['chunks']=!![];};M=L[localStorage['faction']]&&localStorage['faction']||Object['keys'](L)[0x0];console['log'](M);bU();let b9='';for(let ba in L)b9+='<li\x20id=\x22'+ba+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:normal;\x20color:'+L[ba]['color']+'\x22>'+ba+'<span></li>';eb('listF')['innerHTML']=b9;for(let bb in L)eb(bb)['onclick']=function(){e8('factions');eb(M)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=M=this['id'];bU();};eb(M)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+b3+'\x0aStatus\x20:\x20'+this['status']);b2=null;};b2['open']('GET',b3);b2['send']();dY();eb('hide-map')['onclick']=()=>{Y=![];aP['style']['display']=aQ['style']['display']='none';aO['style']['display']='block';aO['innerText']='Minimap';aO['style']['cursor']='pointer';};aO['onclick']=()=>{Y=!![];aP['style']['display']=aQ['style']['display']='block';aO['style']['display']='none';aO['style']['cursor']='default';c3();};eb('zoom-plus')['addEventListener'](B?'touchstart':'mousedown',bc=>{bc['preventDefault']();a0=!![];a1=![];c1();},![]);eb('zoom-plus')['addEventListener'](B?'touchend':'mouseup',()=>a0=![],![]);eb('zoom-minus')['addEventListener'](B?'touchstart':'mousedown',bd=>{bd['preventDefault']();a1=!![];a0=![];c2();},![]);eb('zoom-minus')['addEventListener'](B?'touchend':'mouseup',()=>a1=![],![]);if(B){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');aQ['style']['lineHeight']='27px';let be=document['createElement']('div'),bf=document['createElement']('canvas');bf['height']=bf['width']=0x15;bf['left']=(window['innerWidth']+bf['width'])/0x2;bf['top']=(window['innerHeight']+bf['height'])/0x2;let bg=bf['getContext']('2d');bg['strokeStyle']='white';be['style']='position:\x20absolute;\x20top:\x20'+bf['top']+'px;\x20left:\x20'+bf['left']+'px;';be['appendChild'](bf);document['body']['appendChild'](be);let bh=bf['getContext']('2d'),bi=N['getContext']('2d')['getImageData'](bf['left'],bf['top'],bf['width'],bf['height'])['data'],bj=bh['getImageData'](0x0,0x0,bf['width'],bf['height']),bk=bj['data'];for(let U=0x0;U<bf['height'];U++)bk[(bf['width']*(0.5+U)<<0x2)+0x3]=0xff;for(let T=0x0;T<bf['width'];T++)bk[(bf['width']*((bf['height']>>>0x1)-0x1)+T<<0x2)+0x3]=0xff;bh['putImageData'](bj,0x0,0x0);bf['update']=function(){let bi=O['getImageData'](this['left'],this['top'],bf['width'],bf['height'])['data'],bj=bh['getImageData'](0x0,0x0,this['width'],this['height']),bk=bj['data'];for(let U=0x0;U<this['height'];U++){let br=this['width']*(0.5+U)<<0x2;if(bi[br]===0x80&&bi[br+0x1]===0x80&&bi[br+0x2]===0x80){bk[br]=0x0;bk[br+0x1]=bk[br+0x2]=0xe6;}else{bk[br]=0xff^bi[br];bk[br+0x1]=0xff^bi[br+0x1];bk[br+0x2]=0xff^bi[br+0x2];};};for(let T=0x0;T<this['width'];T++){let bt=this['width']*((this['height']>>>0x1)-0x1)+T<<0x2;if(bi[bt]===0x80&&bi[bt+0x1]===0x80&&bi[bt+0x2]===0x80){bk[bt]=0x0;bk[bt+0x1]=0xe6;bk[bt+0x2]=0xe6;}else{bk[bt]=0xff^bi[bt];bk[bt+0x1]=0xff^bi[bt+0x1];bk[bt+0x2]=0xff^bi[bt+0x2];};};bh['putImageData'](bj,0x0,0x0);};N['addEventListener']('touchmove',()=>{if(!aj)return;aj=![];window['requestAnimationFrame'](()=>{aj=!![];bf['update']();});},![]);setInterval(()=>{let bu=0x0,bv=0x0,bw=[];if(window['location']['search']){bw=window['location']['search']['match'](E);bu=+bw[0x0];bv=+bw[0x1];}else C=0x1;if(T!=bu||U!=bv||bw['length']===0x3&&C!==+bw[0x2]){T=bu;U=bv;if(bw['length']===0x3&&C!==+bw[0x2]){C=+bw[0x2];(ag||ae)&&dY();};if(!Y)return;if(ae){en(C);b1['updateD']();C==0x1?c3():setTimeout(c3,0x64);}else{ag?en(C):en();c3();};};},0x96);}else{window['addEventListener']('mousemove',bx=>{let by=P['innerText']['match'](E),bz=+by[0x0],bA=+by[0x1];if(T!==bz||U!==bA){if(ae){if(C===0x1){J=bx['clientX'];K=bx['clientY'];}else{let bB=C>>>0x1;if(T!==bz){if(bz>T)J=bx['clientX']+bB;else J=bx['clientX']-bB;};if(U!==bA){if(bA>U)K=bx['clientY']+bB;else K=bx['clientY']-bB;};}};T=bz;U=bA;if(!Y)return;if(C>0x2&&af&&!eb('alert-dialog-title'))for(let bC of a4['templates']){if(!a3[bC])continue;let bD=W[bC];if(T['between'](bD['x'],bD['xEnd'])&&U['between'](bD['y'],bD['yEnd'])){al&&clearTimeout(al);let bE=a3[bC],bF=T-bD['x']+bD['width']*(U-bD['y'])<<0x2,bG=[bE['data'][bF],bE['data'][bF+0x1],bE['data'][bF+0x2]];if(bE['data'][bF+0x3]===0xff&&!eg(...F,...bG)){al=setTimeout(()=>{eB(bG);al=null;},am);}else al=null;break;};};if(ae){en(C);b1['updateD']();c3();}else{ag?en(C):en();c3();};};},![]);};let bH=document['createElement']('div');bH['id']='settingsDiv';bH['style']='width:\x20'+r['width']+';\x20height:\x20auto;\x20display:\x20none;\x20position:\x20absolute;\x20'+q['settings'];bH['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+r['text']['title']+'</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px;\x20width:;\x20height:;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+a8+'\x22>'+a8+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(a9?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+q['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(aa?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(ah?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(ab?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(ad?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(ae?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22autoSelectText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['autoSelect']+'</span><span\x20id\x20=\x20\x22autoSelect\x22\x20class\x20=\x20\x22textButton\x22>'+(af?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(ag?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+r['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsText\x22>'+r['text']['pixels']+'</span><span\x20id\x20=\x20\x22pixels\x22\x20style\x20=\x20\x22textButton\x22>'+a7['stat']['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsDayText\x22>'+r['text']['pixelsDay']+'</span><span\x20id\x20=\x20\x22pixelsDay\x22\x20style\x20=\x20\x22textButton\x22>'+a7['stat']['pixelsDay']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+r['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['body']['appendChild'](bH);window['addEventListener']('unload',()=>localStorage['zoomlevel']=D);(()=>{let bI=eb('infoText')['getElementsByTagName']('a');bI[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bI[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();N['addEventListener'](B?'touchend':'click',()=>{if(S['innerText']!=0x3)return;let bJ;for(let bK=0x0;bK<a4['templates']['length'];bK++){let bL=a4['templates'][bK];bJ=a3[bL]['ctx']['getImageData'](T-W[bL]['x'],U-W[bL]['y'],0x1,0x1)['data'];if(bJ[0x3]===0xff)break;};if(eg(...F,bJ[0x0],bJ[0x1],bJ[0x2]))setTimeout(()=>{if(S['innerText']==0x3){eb('pixelsDay')['innerText']=++a7['stat']['pixelsDay'];eb('pixels')['innerText']=++a7['stat']['pixels'];localStorage['statistics']=btoa(JSON['stringify'](a7['stat']));};},0x384);});if(B)eb('detector')['style']['cursor']=eb('detectorText')['style']['cursor']='not-allowed';else window['addEventListener']('keydown',bM=>{let bN=bM['keyCode'];switch(bN){case 0x1b:eb('settingsDiv')['style']['display']='none';break;case 0x30:if(G){G=![];console['log']('Debug\x20is\x20off');}else{G=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=G;break;case 0x31:e8('factions');break;case 0x32:eb('settingsButton')['click']();break;case 0x33:eb('sectors')['click']();break;case 0x34:eb('detector')['click']();break;};});eb('cursorColorText')['onclick']=eb('cursorColor')['onclick']=()=>{let bO=p['indexOf'](a8)+0x1;if(bO===p['length'])bO=0x0;localStorage['cursorColor']=eb('cursorColor')['innerText']=eb('cursorColor')['style']['color']=a8=p[bO];;dY();};eb('gridText')['onclick']=eb('grid')['onclick']=()=>{aW['clearRect'](0x0,0x0,aT['width'],aT['height']);eb('grid')['innerText']=(localStorage['grid']=a9=!a9)?'On':'Off';dY();};eb('mapStyleText')['onclick']=eb('mapStyle')['onclick']=()=>{localStorage['mapStyle']=q['style']=q['style']=='Old'?'New':'Old';aP['style']['width']=q['width']+'px';aP['style']['height']=q['height']+'px';for(let bP of aP['childNodes']){bP['width']=bP['offsetWidth'];bP['height']=bP['offsetHeight'];};ey(aU,![]);ey(aV,![]);ae||ag?en(C):en();eb('settingsDiv')['style']='width:\x20'+eb('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+eb('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+eb('settingsDiv')['style']['left']+';\x20top:\x20'+eb('settingsDiv')['style']['top']+';\x20'+q['settings'];eb('minimapbg')['style']=q['minimapbg'];eb('mapStyle')['innerText']=q['style'];dY();ai();};eb('sectorsText')['onclick']=eb('sectors')['onclick']=()=>{aa=!aa;cS();aa?ai():aV['clearRect'](0x0,0x0,aS['width'],aS['height']);eb('sectors')['innerText']=(localStorage['sectors']=aa)?'On':'Off';};eb('settingsDivCancel')['onclick']=()=>e8('settingsDiv');eb('sectorShiftText')['onclick']=eb('sectorShift')['onclick']=()=>{ac=(ab=!ab)?0.8:0x1;eb('sectorShift')['innerText']=(localStorage['sectorShift']=ab)?'On':'Off';ai();};eb('translucentText')['onclick']=eb('translucent')['onclick']=()=>{ad=!ad;eb('translucent')['innerText']=ad?'On':'Off';eb('minimapSectors')['style']['opacity']=q['translucent'][ad];localStorage['translucent']=ad;ai();};if(!B)eb('detectorText')['onclick']=eb('detector')['onclick']=()=>{if(ae=!ae){eb('zoom-minus')['style']['cursor']=eb('zoom-plus')['style']['cursor']='not-allowed';b1['updateD']();}else eb('zoom-minus')['style']['cursor']=eb('zoom-plus')['style']['cursor']='pointer';eb('detector')['innerText']=ae?'On':'Off';localStorage['detector']=ae;en(C);cS();c3();dY();};eb('autoSelectText')['onclick']=eb('autoSelect')['onclick']=()=>{eb('autoSelect')['innerText']=(localStorage['autoSelect']=af=!af)?'On':'Off';};eb('languageText')['onclick']=eb('language')['onclick']=function(){let bQ=r['availableLan']['indexOf'](r['language'])+0x1;if(bQ===r['availableLan']['length'])bQ=0x0;localStorage['language']=eb('language')['innerText']=r['language']=r['availableLan'][bQ];eb('settingsDiv')['style']['width']=r['width'];for(let bR in r['text']){let bS=eb(bR+'Text');if(bS)bS['innerHTML']=r['text'][bR];};let bT=eb('infoText')['getElementsByTagName']('a');bT[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bT[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};eb('syncText')['onclick']=eb('sync')['onclick']=()=>{(localStorage['sync']=ag=!ag)?en(C):en();eb('sync')['innerText']=ag?'On':'Off';cS();c3();dY();};eb('expSectorsText')['onclick']=eb('expSectors')['onclick']=()=>{eb('expSectors')['innerText']=(localStorage['expSectors']=ah=!ah)?'On':'Off';ah||aV['clearRect'](0x0,0x0,aR['width'],aR['height']);cS();ai();};function bU(){let bV=''+L[M]['data']+(L[M]['type']==0x1?'?'+new Date()['getTime']():'');G&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+M+'\x0aURL\x20:\x20'+bV);V={};W={};X={};a3={};let bW=new XMLHttpRequest();bW['onloadend']=function(){if(this['status']==0xc8){V=JSON['parse'](this['responseText']);for(let bX in V){let bY=V[bX];bY['x']*=0x1;bY['y']*=0x1;bY['width']*=0x1;bY['height']*=0x1;bY['xEnd']=bY['x']+bY['width'];bY['yEnd']=bY['y']+bY['height'];bY['type']==='grid'?X[bX]=bY:W[bX]=bY;};for(let bZ of a4['templates'])c8(bZ,()=>G&&console['log']('Img\x20updated'));for(let c0 of a4['grids'])c8(c0,()=>G&&console['log']('Grid\x20updated'));G&&console['log']('Update\x20completed',V,W,X);}else console['error']('Error\x20:\x20'+L[M]['data']+'\x0aURL\x20:\x20'+bV+'\x0aStatus\x20:\x20'+this['status']);};bW['open']('GET',bV);bW['send']();};function c1(){if(!a0||ae)return;if(ag){localStorage['sync']=ag=![];D=C;eb('sync')['innerText']=ag?'On':'Off';cS();};D*=1.1;if(D>0x20){D=0x20;return;};ae?b1['updateD']():ag?en(C):en();dY();ai();setTimeout(c1,a2);};function c2(){if(!a1||ae)return;if(ag){localStorage['sync']=ag=![];D=C;eb('sync')['innerText']=ag?'On':'Off';cS();};D/=1.1;if(D<0x1){D=0x1;return;};ae?b1['updateD']():ag?en(C):en();dY();c3();setTimeout(c2,a2);};function c3(){if(!Y||!W)return;a4['grids']=[];a4['templates']=[];for(let c4 in W){let c5=W[c4];if(T['between'](c5['x']-z,c5['xEnd']+z)&&U['between'](c5['y']-A,c5['yEnd']+A))if(a3[c4])a4['templates'][a4['templates']['length']]=c4;else{c8(c4);delete W[c4];};};if(aa)for(let c6 in X){let c7=X[c6];if(T['between'](c7['x']-z,c7['xEnd']+z)&&U['between'](c7['y']-A,c7['yEnd']+A))if(a3[c6])a4['grids'][a4['grids']['length']]=c6;else{c8(c6);delete X[c6];};};if(a4['grids']['length']===0x0&&a4['templates']['length']===0x0){if(Z&&!a0&&!a1){Z=![];aP['style']['display']='none';aO['style']['display']='block';aO['innerText']='There\x27s\x20nothing\x20here';};}else{if(!Z){Z=!![];aP['style']['display']='block';aO['style']['display']='none';};if(ak){ak=![];window['requestAnimationFrame'](()=>{ai();ak=!![];});};};};function c8(c9,ca){let cb=new Image(),cc=0x0;cb['crossOrigin']='';cb['src']=''+L[M]['images']+c9+'.png';cb['onerror']=()=>{console['warn']('Download\x20failed\x0asrc\x20:\x20'+cb['src']+'\x0aName\x20:\x20'+c9);if(V[c9]['type']==='grid')delete X[c9];else delete W[c9];delete V[c9];delete a3[c9];};cb['onload']=()=>{const cd=0x100;let ce=document['createElement']('canvas'),cf=ce['getContext']('2d'),cg=cb['width'],ch=cb['height'];ce['width']=cg;ce['height']=ch;cf['drawImage'](cb,0x0,0x0,cg,ch);let ci=cf['getImageData'](0x0,0x0,cg,ch),cj=ci['data'];if(!L[M]['chunks']||B||cb['width']<=cd*1.5&&cb['height']<=cd*1.5){a3[c9]=ce;a3[c9]['ctx']=cf;a3[c9]['data']=cj;if(V[c9]['type']==='grid')X[c9]=V[c9];else W[c9]=V[c9];console['log'](V,'\x0aName\x20:\x20'+c9+'\x0aType\x20:\x20'+(V[c9]['type']==='grid'?'grid':'image'));ca&&ca();c3();return;};let ck=performance['now']();for(let U=0x0,cm=cd>>0x1;ch-U>cm;U+=cd)for(let T=0x0;cg-T>cm;T+=cd){const co=c9+'_#_'+T/cd+'_'+U/cd,cp=cg-T>=cd?cd:cg-T,cq=ch-U>=cd?cd:ch-U,cr=cp<<0x2,cs=cr*cq;let ct=new Uint8ClampedArray(cs),cu=0x0,cv=0x0,cw=null,cx=0x0;for(let cy=0x0,cz=cg<<0x2,cA=cg*U+T<<0x2,cB=0x0,cC,cm;cy!==cq;cy+=0x1){cC=cA+cy*cz;cm=cB+cr;while(cB!==cm){ct[cB]=cj[cC];cB+=0x1;cC+=0x1;};};for(let cE=0x3;cE<cs;cE+=0x4)if(ct[cE]!==0x0){cw=~~((cE+0x1)/cr);break;};if(cw===null)continue;for(let cF=cs-0x1,cm=cw*cr;cF>cm;cF-=0x4)if(ct[cF]!==0x0){cx=(cF+0x1)/cr;cx=cq-(~~cx===cx?cx:~~cx+0x1);break;};cH:for(let T=0x3,cJ=cw*cr,cm=(cp-cx)*cr;T<cr;T+=0x4)for(let cB=T+cJ;cB<cm;cB+=cr)if(ct[cB]!==0x0){cu=T>>>0x2;break cH;};cM:for(let T=cr-0x1,cO=cw*cr,cm=(cp-cx)*cr,cQ=cu<<0x2;T>cQ;T-=0x4)for(let cB=T+cO;cB<cm;cB+=cr)if(ct[cB]!==0x0){cv=cp-(T+0x1>>>0x2);break cM;};V[co]={};V[co]['x']=V[c9]['x']+T;V[co]['y']=V[c9]['y']+U;a3[co]=document['createElement']('canvas');a3[co]['ctx']=a3[co]['getContext']('2d');if(cw||cx||cu||cv){V[co]['width']=a3[co]['width']=cp-cu-cv;V[co]['height']=a3[co]['height']=cq-cw-cx;a3[co]['ctx']['drawImage'](ce,T+cu,U+cw,a3[co]['width'],a3[co]['height'],0x0,0x0,a3[co]['width'],a3[co]['height']);V[co]['x']+=cu;V[co]['y']+=cw;}else{V[co]['width']=a3[co]['width']=cp;V[co]['height']=a3[co]['height']=cq;a3[co]['ctx']['drawImage'](ce,T,U,a3[co]['width'],a3[co]['height'],0x0,0x0,a3[co]['width'],a3[co]['height']);};V[co]['xEnd']=V[co]['x']+V[co]['width'];V[co]['yEnd']=V[co]['y']+V[co]['height'];if(V[c9]['type']==='grid')X[co]=V[co];else{W[co]=V[co];a3[co]['data']=a3[co]['ctx']['getImageData'](0x0,0x0,V[co]['width'],V[co]['height'])['data'];};cc++;};console['log'](V,'\x0aName\x20:\x20'+c9+'\x0aType\x20:\x20'+(V[c9]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+cc+'\x0aTime\x20:\x20'+(performance['now']()-ck));delete V[c9];delete a3[c9];ce=null;cf=null;ci=null;cj=null;ca&&ca();c3();};};function cS(){if(ae){if(aa||ah)ai=()=>{dJ();cW(C);};else ai=dJ;}else if(ag){if(aa||ah)ai=()=>{cT(C);cW(C);};else ai=()=>cT(C);}else{if(aa||ah)ai=()=>{cT();cW();};else ai=cT;};};function cT(cU=D){aU['clearRect'](0x0,0x0,aR['width'],aR['height']);for(let cV of a4['templates'])aU['drawImage'](a3[cV],~~((W[cV]['x']-H)*cU),~~((W[cV]['y']-I)*cU),~~(a3[cV]['width']*cU),~~(a3[cV]['height']*cU));};function cW(cX=D){if(ah){d2(cX);return;};aV['clearRect'](0x0,0x0,aS['width'],aS['height']);let cY,cZ,d0=cX*ac;if(ae){cY=(b1['xLeft']-T)/ac+T;cZ=(b1['yTop']-U)/ac+U;}else{cY=(H-T)/ac+T;cZ=(I-U)/ac+U;};for(let d1 of a4['grids'])aV['drawImage'](a3[d1],~~((X[d1]['x']-cY)*d0),~~((X[d1]['y']-cZ)*d0),~~(a3[d1]['width']*d0),~~(a3[d1]['height']*d0));};function d2(d3=D){aV['clearRect'](0x0,0x0,aS['width'],aS['height']);function d4(T,U,d7,d8,d9){aV['strokeStyle']='rgb('+d9+')';aV['beginPath']();aV['moveTo'](T,U);aV['lineTo'](d7,d8);aV['stroke']();};function da(T,U){T+=0x1000;U+=0x1000;let dd=~~U/o,de=dd%0x24,df=~~T/o,dg=df%0x24;return((dg<0xa?dg+'':String['fromCharCode'](dg-0xa+0x61))+'z'['repeat'](~~(df/0x24))+'\x0d\x0a'+((de<0xa?de+'':String['fromCharCode'](de-0xa+0x61))+'z'['repeat'](~~(dd/0x24))))['toUpperCase']();};aV['lineWidth']=~~(d3/0x3);aV['strokeStyle']='rgb(20,20,20)';let dh=(o-H%o)*d3,di=(o-I%o)*d3,dj=o*d3,dk=o/0x2,dl=aR['width']+d3,dm=aR['height']+d3,dn=b1['hWidth']%d3-d3,dp=b1['hHeight']%d3-d3,dq=dh+(d3-dn),dr=di+(d3-dp),ds=(~~(H/o)+0x1)*o,dt=(~~(I/o)+0x1)*o;for(let du=dq,T=ds,dw=dp+dm,dx=du+dn;du<dl;du+=dj,T+=o,dx+=dj)d4(dx,dp,dx,dw,a6['getLine'](T));for(let dy=dr,U=dt,dA=dn+dl,dB=dy+dp;dy<dm;dy+=dj,U+=o,dB+=dj)d4(dn,dB,dA,dB,a6['getLine'](U));if(d3>0x2)return;aV['strokeStyle']='rgb(255,255,255)';aV['fillStyle']='rgb(20,20,20)';aV['font']=~~(o*d3/0x3)+'px\x20fantasy';aV['textBaseline']='top';for(let dC=dq,T=ds,dE=dp+dm;dC<dl;dC+=dj,T+=o)for(let dy=dr,U=dt,dE=dn+dl,dI=da(T,U);dy<dm;dy+=dj,U+=o,dI=da(T,U))aV['strokeText'](dI,dC,dy),aV['fillText'](dI,dC,dy);};function dJ(dK=C){if(~~dK!==dK)return;let dL,dM=0x0;for(let dN=dK**0x2;dN>0x1;dN>>>=0x1)dM++;dL=dM>>>0x1;a5['canvas']['width']=b1['width'];a5['canvas']['height']=b1['height'];let dO,dP;if(a4['templates']['length']===0x1){let dQ=a4['templates'][0x0];dO=a3[dQ]['ctx']['getImageData'](b1['xLeft']-W[dQ]['x']-0x1,b1['yTop']-W[dQ]['y']-0x1,b1['width'],b1['height']);dP=dO['data'];}else{for(let dR of a4['templates'])a5['ctx']['drawImage'](a3[dR],b1['xLeft']-W[dR]['x']-0x1,b1['yTop']-W[dR]['y']-0x1,b1['width'],b1['height'],0x0,0x0,b1['width'],b1['height']);dO=a5['ctx']['getImageData'](0x0,0x0,a5['canvas']['width'],a5['canvas']['height']);dP=dO['data'];};let dS=O['getImageData'](~~(J-(b1['width']<<dL>>>0x1)),~~(K-(b1['height']<<dL>>>0x1)),~~(b1['width']*dK),~~(b1['height']*dK))['data'],dT=0x0,dU=dK<<0x2;for(let dV=0x0;dV<b1['sizeRGBA'];dV+=b1['widthRGBA'])for(let dW=dV+b1['widthRGBA'],dX=dV<<dM;dT<dW;dT+=0x4,dX+=dU){if(dS[dX+0x3]===0x0)continue;if(eg(dP[dT],dP[dT+0x1],dP[dT+0x2],dS[dX],dS[dX+0x1],dS[dX+0x2])){dP[dT]=dP[dT+0x1]=dP[dT+0x2]=~~((dP[dT]+dP[dT+0x1]+dP[dT+0x2])/0x3);}else{dP[dT]=0xff;dP[dT+0x1]=dP[dT+0x2]=0x0;};};if(dK===0x1){aU['putImageData'](dO,0x0,0x0);}else{a5['ctx']['putImageData'](dO,0x0,0x0);aU['clearRect'](0x0,0x0,aR['width'],aR['height']);aU['drawImage'](a5['canvas'],~~(b1['borderW']-dK),~~(b1['borderH']-dK),~~(b1['width']*dK),~~(b1['height']*dK));};};function dY(dZ=D){aW['clearRect'](0x0,0x0,aT['width'],aT['height']);if(ae||ag)dZ=C;if(dZ<=0x2)return;if(a9&&dZ>4.6){aW['beginPath']();aW['strokeStyle']='rgb(20,20,20)';let e0=aR['width']+dZ,e1=aR['height']+dZ,e2=b1['hWidth']%dZ-dZ,e3=b1['hHeight']%dZ-dZ,e4=e0+e2,e5=e1+e3;aW['lineWidth']=0x1;for(let T=e2;T<=e0;T+=dZ){aW['moveTo'](T,e3);aW['lineTo'](T,e5);};for(let U=e3;U<=e1;U+=dZ){aW['moveTo'](e2,U);aW['lineTo'](e4,U);};aW['stroke']();};aW['beginPath']();aW['lineWidth']=dZ/0x3;aW['strokeStyle']=a8;aW['rect'](b1['hWidth'],b1['hHeight'],dZ,dZ);aW['stroke']();};function e8(e9){if(typeof e9==='string'){let ea=document['getElementById'](e9);ea['style']['display']=ea['style']['display']==='none'?'block':'none';}else if(typeof e9==='object')e9['style']['display']=e9['style']['display']==='none'?'block':'none';};function eb(ec){return document['getElementById'](ec);};function ed(ee){ee['preventDefault']();let ef;ee=ee||window['event'];if(ee['wheelDelta']){ef=ee['wheelDelta'];if(window['opera'])ef=-ef;}else if(ee['detail'])ef=-ee['detail'];ef>0x0&&(aA['lastZoom']*=0x2,C<<=0x1);ef<0x0&&(aA['lastZoom']/=0x2,C>>>=0x1);if(aA['lastZoom']>0x40)aA['lastZoom']=0x40;else{if(aA['lastZoom']<0x1)aA['lastZoom']=0x1;if(ag)aA['smoothZoom'](aA['lastZoom']);else if(ae)aA['setZoom'](C);};};function eg(eh,ei,ej,ek,el,em){return(eh>ek?eh-ek:ek-eh)<0x1e&&(ei>el?ei-el:el-ei)<0x1e&&(ej>em?ej-em:em-ej)<0x1e;};function en(eo=D){z=b1['hWidth']/eo;A=b1['hHeight']/eo;H=T-b1['hWidth']/eo;I=U-b1['hHeight']/eo;};function ep(eq,T,U){N['dispatchEvent'](new MouseEvent(eq,{'clientX':T,'clientY':U,'bubbles':!![]}));};function et(eu,ev){return Math['round'](eu-0.5+Math['random']()*(ev-eu+0x1));};function ew(T){return T>0x0?T:-T;};function ey(ez,eA){ez['mozImageSmoothingEnabled']=ez['webkitImageSmoothingEnabled']=ez['msImageSmoothingEnabled']=ez['imageSmoothingEnabled']=eA;};function eB(eC){for(let eD=0x0;eD<R['length'];eD++)if(eg(...R[eD],...eC)){Q[eD]['click']();break;}};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote')&&document['getElementById']('colorSampleSelector')&&document['getElementsByClassName']('palette-color-box');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let eE=document['createElement']('script');eE['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](eE);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
