// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.7.0.1
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';let c=null;{let aP=document['createElement']('div'),aQ=document['createElement']('div'),aR,aS=null;aP['style']='position:fixed;\x20bottom:0px;\x20right:0px;\x20background-color:rgba(0,0,0,0.9);\x20padding:5px;\x20z-index:0;';aP['appendChild'](aQ);{setInterval(()=>{if(aS===null)return;let aW=~~(new Date()['getTime']()/0x3e8-aS),aX=aW%0x3c,aY=~~(aW/0x3c);aR['innerText']=(aY>=0xa?aY:'0'+aY)+':'+(aX>=0xa?aX:'0'+aX);},0x3e8);let aV=document['createElement']('div');aV['innerText']='Since\x20last\x20captcha\x20';aR=document['createElement']('span');aR['innerText']='null';aV['appendChild'](aR);aP['appendChild'](aV);};const aT=(aZ,b0)=>{aQ['innerText']=aZ;aQ['style']['color']=b0;};aT(void 0x0,'grey');let aU;(function(b1){WebSocket['prototype']['send']=function(){c=this;if(arguments[0x0]==='2'){aT('Online','springGreen');clearTimeout(aU);aU=setTimeout(()=>aT('Offline','red'),0x1e*0x3e8);return b1['apply'](this,arguments);}else if(typeof arguments[0x0]==='string'){if(arguments[0x0]['includes']('captchaToken')){aS=new Date()['getTime']()/0x3e8;r&&console['log'](arguments[0x0]);return b1['apply'](this,arguments);}else if(arguments[0x0]['includes']('place')){let b2=JSON['parse'](arguments[0x0]['substring'](0x2)),b3={'x':(b2[0x1]['pixel']>>>0x11)-0x1000,'y':((0x1fff0&b2[0x1]['pixel'])>>>0x4)-0x1000,'color':Colors['getColorRGBFromId'](b2[0x1]['pixel']&0xf)};for(let b4 of R['templates']){if(!Q[b4])continue;let b5=J[b4];if(b3['x']['between'](b5['x'],b5['xEnd'])&&b3['y']['between'](b5['y'],b5['yEnd'])){let b6=Q[b4],b7=b3['x']-b5['x']+b5['width']*(b3['y']-b5['y'])<<0x2,b8=[b6['data'][b7],b6['data'][b7+0x1],b6['data'][b7+0x2]];if(aF(...b8,...b3['color'])){aD('pixels')['innerText']=++U['stat']['pixels'];aD('pixelsDay')['innerText']=++U['stat']['pixelsDay'];break;};};};return b1['apply'](this,arguments);}else return b1['apply'](this,arguments);};};}(WebSocket['prototype']['send']));document['body']['appendChild'](aP);};(function b9(){let ba=aD('timer');if(ba)ba['style']['z-index']=0x13;else setTimeout(b9,0x14d);}());(function bb(){let bc=aD('message');if(bc)bc['remove']();else setTimeout(bb,0x14d);}());let d=document['createElement']('link');d['rel']='stylesheet';d['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](d);document['getElementsByClassName']('palette-container')[0x0]['style']['z-index']=0x1;let e=document['createElement']('div');e['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](e);aD('settingsButton')['addEventListener']('click',()=>{let bd=aD('settingsDiv');aC(bd);if(bd['style']['display']==='block'){bd['style']['left']=(window['innerWidth']-bd['offsetWidth']>>>0x1)+'px';bd['style']['top']=(window['innerHeight']-bd['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(be,bf){return this>be&&this<bf;};window['testPerformance']=()=>{console['log']('Start\x20testing');let bg=null,bh=!![],bi=A['width']>>>0x1,bj=A['height']>>>0x1;setTimeout(()=>clearInterval(bg),0x1770);bg=setInterval(()=>{if(bh)bh=![],aH('mousemove',bi+aK(0x0,bi>>>0x1),bj+aK(0x0,bj>>>0x1));else bh=!![],aH('mousemove',bi-aK(0x0,bi>>>0x1),bj-aK(0x0,bj>>>0x1));},0x32);};const f='2.7.0.2',g=0x20,h=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],i={'init':function(){this['style']=this['style'];},get 'style'(){return this['_style'];},set 'style'(bk){if(this['availableStyles']['includes'](bk))this['_style']=bk;else console['warn']('Style\x20is\x20missing'),this['_style']='New';let bl='_'+this['_style'];for(let bm of['width','height','settings','minimapbg'])this[bm]=this[bl][bm];},'_style':'New','availableStyles':['New','Old'],'_New':{'width':0x118,'height':0xc8,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'_Old':{'width':0x1a4,'height':0x12c,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;'},'settings':{},'minimapbg':{},'width':{},'height':{},'translucent':{'false':0x1,'true':0.5}},j={'init':function(){this['language']=this['language'];},'availableLan':['ru','en','tr'],get 'language'(){return this['_language'];},set 'language'(bn){if(this['availableLan']['includes'](bn))this['_language']=bn;else console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist'),this['_language']='en';let bo='_'+this['_language'];this['width']=this[bo]['width'];this['text']=this[bo]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'on':'On','off':'Off','title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','autoSelect':'Автовыбор\x20цвета:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+f,'pixels':'Поставленные\x20пиксели:\x20','pixelsDay':'Поставленные\x20за\x20день\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'on':'On','off':'Off','title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','autoSelect':'Auto\x20color\x20selection:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+f,'pixels':'Correct\x20pixels:\x20','pixelsDay':'Correct\x20pixels\x20per\x20day:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}},'_tr':{'width':'280px','text':{'on':'Açık','off':'Kapalı','title':'MLP\x20Pixel\x20:\x20harita\x20ayarları','cursorColor':'İmleç\x20rengi:\x20','grid':'Izgara:\x20','mapStyle':'Minimap\x20stili:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Yarı\x20saydam:\x20','detector':'Hata\x20dedektörü:\x20','autoSelect':'Otomatik\x20renk\x20seçme:\x20','language':'Dil:\x20','sync':'Zoom\x20sync:\x20','info':'<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20tarafından\x20yapıldı\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20için\x20düzenlendi\x20|\x20V.\x20'+f,'pixels':'Doğru\x20pixeller:\x20','pixelsDay':'Günlük\x20doğru\x20pixeller:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};i['init']();j['init']();let k=null,l=null,m=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),n=0x1,o=0x5,p=new RegExp(/-?\d+/g),q=aD('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](p),r=!!void'Child\x20of\x20starfall',s=void'Luna,\x20child\x20of\x20starfall',t=void'Sunder\x20the\x20daylight',u=void'Open\x20my\x20heart',v=void'Let\x20me\x20bleed\x20thin',w={'New\x20Lunar\x20Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2,'chunks':![]}},z='New\x20Lunar\x20Republic',A=aD('canvas'),B=A['getContext']('2d'),C=aD('coordinatesNote'),D=document['getElementsByClassName']('palette-color-box'),E=[],F=aD('timer'),G=0x0,H=0x0,I,J,K,L=!![],M=!![],N=![],O=![],P=0x32,Q=[],R={'grids':[],'templates':[]},S={'canvas':document['createElement']('canvas'),'ctx':void 0x0},T={'getLine':function(bp){let bq=0x190,br=aL(bp%bq);if(this['_data']['has'](br))return this['_data']['get'](br);let bs=bq/0x3,bt=bs<<0x1,bu=[this['conv'](this['fromTo'](br,0x0,bs),bs),this['conv'](this['fromTo'](br,bs,bt),bs),this['conv'](this['fromTo'](br,bt,bq),bs)];this['_data']['set'](br,bu);return bu;},'_data':new Map(),'conv':(bv,bw)=>~~(((bv<<0x8)-bv)/bw),'fromTo':(bx,by,bz)=>bx>bz||bx<by?0x0:bx-by},U={'stat':{'pixels':0x0,'pixelsDay':0x0,'lastDate':0x0}},V='springGreen',W=![],X=![],Y=![],Z=0x1,a0=![],a1=![],a2=![],a3=![],a4=![],a5=()=>{},a6=!![],a7=!![],a8=null,a9=0x32,aa='6Lf7mNAUAAAAAMlrqmboiBe_T9_yrSvZu2NSMtW7';{let bA=null,bB=![];function bC(bD=0x3e8){bA=setTimeout(()=>{grecaptcha['execute'](aa,{'action':'navigation'});bA=null;},bD);};bC(0x3e8+aK(0x0,0x3e8));(function(bE){grecaptcha['execute']=function(){if(arguments[0x1]['action']==='place'){let bF=C['innerText']['match'](p);aI(+bF[0x0],+bF[0x1],Colors['getColorIdFromRGB'](q));return new Promise((bG,bH)=>bH());}else if(arguments[0x1]['action']==='placeMine'){r&&console['log']('recaptcha\x20place');bC(0x3e8+aK(0x0,0x3e8));bB=![];aJ(0x3);return bE['apply'](this,[aa,{'action':'place'}]);}else if(arguments[0x1]['action']==='navigation'){if(bA!==null){clearTimeout(bA);bA=null;};if(bB)return;r&&console['log']('recaptcha\x20navigation');bB=!![];};return bE['apply'](this,arguments);};}(grecaptcha['execute']));};for(let bI of D)E['push'](bI['style']['backgroundColor']['match'](p)['map'](bJ=>+bJ));if(window['location']['search']&&window['location']['search']['match'](p)['length']==0x3)n=+window['location']['search']['match'](p)[0x2];else n=0x1;S['ctx']=S['canvas']['getContext']('2d');let ab={'lastZoom':n,'setZoom':function(bK){this['zoom']=n=bK;if(a3){aG(n);aB();au();}else if(a1&&~~n===n){setTimeout(()=>{an['updateD']();aG(n);aA();X&&ay(n);aB();},0xc8);};},'smoothZoom':function(bL){this['smoothZoomFrom']=this['zoom'];this['smoothZoomTo']=bL;this['smoothZoomStartDate']=Date['now']();this['smoothZoomUpdate']();},'executeZoom':function(bM){this['setZoom'](bM>0x40?0x40:bM<0x1?0x1:bM);},'smoothZoomUpdate':function(){let bN=(Date['now']()-this['smoothZoomStartDate'])/0xc8;if(bN>0x1){this['executeZoom'](this['smoothZoomTo']);return;};window['requestAnimationFrame'](()=>this['smoothZoomUpdate']());this['executeZoom'](this['smoothZoomFrom']+(0x1-0x1-(bN>0x1?0x1:bN<0x0?0x0:bN)**0x3)*(this['smoothZoomTo']-this['smoothZoomFrom']));}};ab['setZoom'](n);if(A['addEventListener'])A['addEventListener']('mousewheel',aE,![]);else if(A['attachEvent'])A['attachEvent']('onmousewheel',aE);if(!m&&/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',aE);}catch(bO){};if(localStorage['cursorColor']&&h['includes'](localStorage['cursorColor']))V=localStorage['cursorColor'];r=localStorage['debug']=='true';W=localStorage['grid']=='true';a0=localStorage['translucent']=='true';X=localStorage['sectors']=='true';a3=localStorage['sync']=='true';a4=localStorage['expSectors']=='true';a2=localStorage['autoSelect']=='true';if(localStorage['mapStyle']=='Old')i['style']='Old';if(localStorage['sectorShift']=='true'){Y=!![];Z=0.8;};if(localStorage['mobile'])m=localStorage['mobile'];if(localStorage['detector']=='true'){if(m){localStorage['detector']=![];a1=![];}else a1=!![];};if(localStorage['zoomlevel'])o=+localStorage['zoomlevel'];else localStorage['zoomlevel']=o;if(localStorage['language'])j['language']=localStorage['language'];else localStorage['language']=j['language'];{let bP=U['stat'],bQ=new Date();if(localStorage['statistics']){console['log']('Statistics\x20are\x20loading...');try{bP=JSON['parse'](atob(localStorage['statistics']));console['log']('Statistics\x20uploaded\x20successfully');if(bP['lastDate']){bP['lastDate'][0x0]*=0x1;bP['lastDate'][0x1]*=0x1;bP['lastDate'][0x2]*=0x1;};console['log'](bP);}catch(bR){console['log']('Something\x20went\x20wrong');console['log'](bR);}}else console['log']('Statistics\x20not\x20found');if(bP['pixels']==void 0x0||bP['pixelsDay']==void 0x0||bP['lastDate']==void 0x0){console['log']('Some\x20elements\x20are\x20missing');if(!bP['lastDate'])bP['lastDate']=[bQ['getYear'](),bQ['getMonth'](),bQ['getDay']()],bP['pixelsDay']=0x0;if(!bP['pixels'])bP['pixels']=0x0;if(!bP['pixelsDay'])bP['pixelsDay']=0x0;r&&console['log'](bP);};if(bP['lastDate'][0x0]!=bQ['getYear']()||bP['lastDate'][0x1]!=bQ['getMonth']()||bP['lastDate'][0x2]!=bQ['getDay']()){bP['lastDate']=[bQ['getYear'](),bQ['getMonth'](),bQ['getDay']()];bP['pixelsDay']=0x0;};U['stat']=bP;localStorage['statistics']=btoa(JSON['stringify'](bP));};aw();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+f);for(let bS of D)bS['addEventListener']('click',()=>q=bS['style']['backgroundColor']['match'](p)['map'](bT=>+bT));let ac='';for(let bU in w)ac+='<li\x20id=\x22'+bU+'\x22><span\x20style=\x22cursor:pointer;color:'+w[bU]['color']+'\x22>'+bU+'<span></li>';let ad=document['createElement']('div');ad['id']='minimapbg';ad['style']=i['minimapbg'];ad['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+i['width']+'px;height:'+i['height']+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+i['translucent'][a0]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](ad);let ae=aD('minimap-text'),af=aD('minimap-box'),ag=aD('minimap-config'),ah=aD('minimap'),ai=aD('minimapSectors'),aj=aD('minimapCover'),ak=ah['getContext']('2d'),al=ai['getContext']('2d'),am=aj['getContext']('2d');for(let bV of af['childNodes']){bV['width']=bV['offsetWidth'];bV['height']=bV['offsetHeight'];};aM(ak,![]);aM(al,![]);setTimeout(()=>{for(let bW=0x0,bX=0x0,bY=document['getElementsByTagName']('canvas');bW<bY['length'];bW++){if(bY[bW]['id']=='minimap')bX++;if(bX>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let an={'updateM':function(){this['hWidth']=ah['width']>>>0x1;this['hHeight']=ah['height']>>>0x1;},'updateD':function(){this['width']=ah['width']/n&0x7fe;this['height']=ah['height']/n&0x7fe;this['borderW']=ah['width']-this['width']*n>>>0x1;this['borderH']=ah['height']-this['height']*n>>>0x1;this['xLeft']=G-(this['width']>>>0x1);this['yTop']=H-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};an['updateM']();an['updateD']();let ao=new XMLHttpRequest(),ap='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';ao['onloadend']=function(){if(this['status']==0xc8){try{let c0=document['createElement']('script');c0['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](c0);}catch(c1){};w=JSON['parse'](this['responseText']);console['log']('Loaded\x20factions');console['log'](w);if(localStorage['injection']){let c2=JSON['parse'](localStorage['injection']);for(let c3 in c2)w[c3]=c2[c3];console['log']('Updated\x20factions');console['log'](w);};for(let c4 in w){c4=w[c4];if('chunks'in c4&&c4['chunks']=='true')c4['chunks']=!![];else c4['chunks']=![];};z=w[localStorage['faction']]&&localStorage['faction']||Object['keys'](w)[0x0];console['log'](z);ar();let bZ='';for(let c5 in w)bZ+='<li\x20id=\x22'+c5+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:normal;\x20color:'+w[c5]['color']+'\x22>'+c5+'<span></li>';aD('listF')['innerHTML']=bZ;for(let c6 in w)aD(c6)['onclick']=function(){aC('factions');aD(z)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=z=this['id'];ar();};aD(z)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+ap+'\x0aStatus\x20:\x20'+this['status']);ao=null;};ao['open']('GET',ap);ao['send']();aB();aD('hide-map')['onclick']=()=>{L=![];af['style']['display']=ag['style']['display']='none';ae['style']['display']='block';ae['innerText']='Minimap';ae['style']['cursor']='pointer';};ae['onclick']=()=>{L=!![];af['style']['display']=ag['style']['display']='block';ae['style']['display']='none';ae['style']['cursor']='default';au();};aD('zoom-plus')['addEventListener'](m?'touchstart':'mousedown',c7=>{c7['preventDefault']();N=!![];O=![];as();},![]);aD('zoom-plus')['addEventListener'](m?'touchend':'mouseup',()=>N=![],![]);aD('zoom-minus')['addEventListener'](m?'touchstart':'mousedown',c8=>{c8['preventDefault']();O=!![];N=![];at();},![]);aD('zoom-minus')['addEventListener'](m?'touchend':'mouseup',()=>O=![],![]);if(m){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');ag['style']['lineHeight']='27px';let c9=document['createElement']('div'),ca=document['createElement']('canvas');ca['height']=ca['width']=0x15;ca['left']=(window['innerWidth']+ca['width'])/0x2;ca['top']=(window['innerHeight']+ca['height'])/0x2;let cb=ca['getContext']('2d');cb['strokeStyle']='white';c9['style']='position:\x20absolute;\x20top:\x20'+ca['top']+'px;\x20left:\x20'+ca['left']+'px;';c9['appendChild'](ca);document['body']['appendChild'](c9);let cc=ca['getContext']('2d'),cd=A['getContext']('2d')['getImageData'](ca['left'],ca['top'],ca['width'],ca['height'])['data'],ce=cc['getImageData'](0x0,0x0,ca['width'],ca['height']),cf=ce['data'];for(let cg=0x0;cg<ca['height'];cg++)cf[(ca['width']*(0.5+cg)<<0x2)+0x3]=0xff;for(let ch=0x0;ch<ca['width'];ch++)cf[(ca['width']*((ca['height']>>>0x1)-0x1)+ch<<0x2)+0x3]=0xff;cc['putImageData'](ce,0x0,0x0);ca['update']=function(){let ci=B['getImageData'](this['left'],this['top'],ca['width'],ca['height'])['data'],cj=cc['getImageData'](0x0,0x0,this['width'],this['height']),ck=cj['data'];for(let cl=0x0;cl<this['height'];cl++){let cm=this['width']*(0.5+cl)<<0x2;if(ci[cm]===0x80&&ci[cm+0x1]===0x80&&ci[cm+0x2]===0x80){ck[cm]=0x0;ck[cm+0x1]=ck[cm+0x2]=0xe6;}else{ck[cm]=0xff^ci[cm];ck[cm+0x1]=0xff^ci[cm+0x1];ck[cm+0x2]=0xff^ci[cm+0x2];};};for(let cn=0x0;cn<this['width'];cn++){let co=this['width']*((this['height']>>>0x1)-0x1)+cn<<0x2;if(ci[co]===0x80&&ci[co+0x1]===0x80&&ci[co+0x2]===0x80){ck[co]=0x0;ck[co+0x1]=0xe6;ck[co+0x2]=0xe6;}else{ck[co]=0xff^ci[co];ck[co+0x1]=0xff^ci[co+0x1];ck[co+0x2]=0xff^ci[co+0x2];};};cc['putImageData'](cj,0x0,0x0);};A['addEventListener']('touchmove',()=>{if(!a6)return;a6=![];window['requestAnimationFrame'](()=>{a6=!![];ca['update']();});},![]);setInterval(()=>{let cp=0x0,cq=0x0,cr=[];if(window['location']['search']){cr=window['location']['search']['match'](p);cp=+cr[0x0];cq=+cr[0x1];}else n=0x1;if(G!=cp||H!=cq||cr['length']===0x3&&n!==+cr[0x2]){G=cp;H=cq;if(cr['length']===0x3&&n!==+cr[0x2]){n=+cr[0x2];(a3||a1)&&aB();};if(!L)return;if(a1){aG(n);an['updateD']();n==0x1?au():setTimeout(au,0x64);}else{a3?aG(n):aG();au();};};},0x96);}else{window['addEventListener']('mousemove',cs=>{let ct=C['innerText']['match'](p),cu=+ct[0x0],cv=+ct[0x1];if(G!==cu||H!==cv){if(a1){if(n===0x1){u=cs['clientX'];v=cs['clientY'];}else{let cw=n>>>0x1;if(G!==cu){if(cu>G)u=cs['clientX']+cw;else u=cs['clientX']-cw;};if(H!==cv){if(cv>H)v=cs['clientY']+cw;else v=cs['clientY']-cw;};}};G=cu;H=cv;if(!L)return;if(n>0x2&&a2&&!aD('alert-dialog-title'))for(let cx of R['templates']){if(!Q[cx])continue;let cy=J[cx];if(G['between'](cy['x'],cy['xEnd'])&&H['between'](cy['y'],cy['yEnd'])){a8&&clearTimeout(a8);let cz=Q[cx],cA=G-cy['x']+cy['width']*(H-cy['y'])<<0x2,cB=[cz['data'][cA],cz['data'][cA+0x1],cz['data'][cA+0x2]];if(cz['data'][cA+0x3]===0xff&&!aF(...q,...cB)){a8=setTimeout(()=>{aN(cB);a8=null;},a9);}else a8=null;break;};};if(a1){aG(n);an['updateD']();au();}else{a3?aG(n):aG();au();};};},![]);};let aq=document['createElement']('div');aq['id']='settingsDiv';aq['style']='width:\x20'+j['width']+';\x20height:\x20auto;\x20display:\x20none;\x20position:\x20absolute;\x20'+i['settings'];aq['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+j['text']['title']+'</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px;\x20width:;\x20height:;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+V+'\x22>'+V+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(W?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+i['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(X?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a4?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(Y?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(a0?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(a1?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22autoSelectText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['autoSelect']+'</span><span\x20id\x20=\x20\x22autoSelect\x22\x20class\x20=\x20\x22textButton\x22>'+(a2?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(a3?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+j['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+j['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsText\x22>'+j['text']['pixels']+'</span><span\x20id\x20=\x20\x22pixels\x22\x20style\x20=\x20\x22textButton\x22>'+U['stat']['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsDayText\x22>'+j['text']['pixelsDay']+'</span><span\x20id\x20=\x20\x22pixelsDay\x22\x20style\x20=\x20\x22textButton\x22>'+U['stat']['pixelsDay']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+j['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['body']['appendChild'](aq);window['addEventListener']('unload',()=>localStorage['zoomlevel']=o);(()=>{let cC=aD('infoText')['getElementsByTagName']('a');cC[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');cC[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();if(m)aD('detector')['style']['cursor']=aD('detectorText')['style']['cursor']='not-allowed';else window['addEventListener']('keydown',cD=>{let cE=cD['keyCode'];switch(cE){case 0x1b:aD('settingsDiv')['style']['display']='none';break;case 0x30:if(r){r=![];console['log']('Debug\x20is\x20off');}else{r=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=r;break;case 0x31:aC('factions');break;case 0x32:aD('settingsButton')['click']();break;case 0x33:aD('sectors')['click']();break;case 0x34:aD('detector')['click']();break;};});aD('cursorColorText')['onclick']=aD('cursorColor')['onclick']=()=>{let cF=h['indexOf'](V)+0x1;if(cF===h['length'])cF=0x0;localStorage['cursorColor']=aD('cursorColor')['innerText']=aD('cursorColor')['style']['color']=V=h[cF];;aB();};aD('gridText')['onclick']=aD('grid')['onclick']=()=>{am['clearRect'](0x0,0x0,aj['width'],aj['height']);aD('grid')['innerText']=(localStorage['grid']=W=!W)?'On':'Off';aB();};aD('mapStyleText')['onclick']=aD('mapStyle')['onclick']=()=>{localStorage['mapStyle']=i['style']=i['style']=='Old'?'New':'Old';af['style']['width']=i['width']+'px';af['style']['height']=i['height']+'px';for(let cG of af['childNodes']){cG['width']=cG['offsetWidth'];cG['height']=cG['offsetHeight'];};aM(ak,![]);aM(al,![]);a1||a3?aG(n):aG();aD('settingsDiv')['style']='width:\x20'+aD('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+aD('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+aD('settingsDiv')['style']['left']+';\x20top:\x20'+aD('settingsDiv')['style']['top']+';\x20'+i['settings'];aD('minimapbg')['style']=i['minimapbg'];aD('mapStyle')['innerText']=i['style'];aB();a5();};aD('sectorsText')['onclick']=aD('sectors')['onclick']=()=>{X=!X;aw();X?a5():al['clearRect'](0x0,0x0,ai['width'],ai['height']);aD('sectors')['innerText']=(localStorage['sectors']=X)?'On':'Off';};aD('settingsDivCancel')['onclick']=()=>aC('settingsDiv');aD('sectorShiftText')['onclick']=aD('sectorShift')['onclick']=()=>{Z=(Y=!Y)?0.8:0x1;aD('sectorShift')['innerText']=(localStorage['sectorShift']=Y)?'On':'Off';a5();};aD('translucentText')['onclick']=aD('translucent')['onclick']=()=>{a0=!a0;aD('translucent')['innerText']=a0?'On':'Off';aD('minimapSectors')['style']['opacity']=i['translucent'][a0];localStorage['translucent']=a0;a5();};if(!m)aD('detectorText')['onclick']=aD('detector')['onclick']=()=>{if(a1=!a1){aD('zoom-minus')['style']['cursor']=aD('zoom-plus')['style']['cursor']='not-allowed';an['updateD']();}else aD('zoom-minus')['style']['cursor']=aD('zoom-plus')['style']['cursor']='pointer';aD('detector')['innerText']=a1?'On':'Off';localStorage['detector']=a1;aG(n);aw();au();aB();};aD('autoSelectText')['onclick']=aD('autoSelect')['onclick']=()=>{aD('autoSelect')['innerText']=(localStorage['autoSelect']=a2=!a2)?'On':'Off';};aD('languageText')['onclick']=aD('language')['onclick']=function(){let cH=j['availableLan']['indexOf'](j['language'])+0x1;if(cH===j['availableLan']['length'])cH=0x0;localStorage['language']=aD('language')['innerText']=j['language']=j['availableLan'][cH];aD('settingsDiv')['style']['width']=j['width'];for(let cJ in j['text']){let cK=aD(cJ+'Text');if(cK)cK['innerHTML']=j['text'][cJ];};let cI=aD('infoText')['getElementsByTagName']('a');cI[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');cI[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};aD('syncText')['onclick']=aD('sync')['onclick']=()=>{(localStorage['sync']=a3=!a3)?aG(n):aG();aD('sync')['innerText']=a3?'On':'Off';aw();au();aB();};aD('expSectorsText')['onclick']=aD('expSectors')['onclick']=()=>{aD('expSectors')['innerText']=(localStorage['expSectors']=a4=!a4)?'On':'Off';a4||al['clearRect'](0x0,0x0,ah['width'],ah['height']);aw();a5();};function ar(){let cL=''+w[z]['data']+(w[z]['type']==0x1?'?'+new Date()['getTime']():'');r&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+z+'\x0aURL\x20:\x20'+cL);I={};J={};K={};Q={};let cM=new XMLHttpRequest();cM['onloadend']=function(){if(this['status']==0xc8){I=JSON['parse'](this['responseText']);for(let cN in I){let cO=I[cN];cO['x']*=0x1;cO['y']*=0x1;cO['width']*=0x1;cO['height']*=0x1;cO['xEnd']=cO['x']+cO['width'];cO['yEnd']=cO['y']+cO['height'];cO['type']==='grid'?K[cN]=cO:J[cN]=cO;};for(let cP of R['templates'])av(cP,()=>r&&console['log']('Img\x20updated'));for(let cQ of R['grids'])av(cQ,()=>r&&console['log']('Grid\x20updated'));r&&console['log']('Update\x20completed',I,J,K);}else console['error']('Error\x20:\x20'+w[z]['data']+'\x0aURL\x20:\x20'+cL+'\x0aStatus\x20:\x20'+this['status']);};cM['open']('GET',cL);cM['send']();};function as(){if(!N||a1)return;if(a3){localStorage['sync']=a3=![];o=n;aD('sync')['innerText']=a3?'On':'Off';aw();};o*=1.1;if(o>0x20){o=0x20;return;};a1?an['updateD']():a3?aG(n):aG();aB();a5();setTimeout(as,P);};function at(){if(!O||a1)return;if(a3){localStorage['sync']=a3=![];o=n;aD('sync')['innerText']=a3?'On':'Off';aw();};o/=1.1;if(o<0x1){o=0x1;return;};a1?an['updateD']():a3?aG(n):aG();aB();au();setTimeout(at,P);};function au(){if(!L||!J)return;R['grids']=[];R['templates']=[];for(let cR in J){let cS=J[cR];if(G['between'](cS['x']-k,cS['xEnd']+k)&&H['between'](cS['y']-l,cS['yEnd']+l))if(Q[cR])R['templates'][R['templates']['length']]=cR;else{av(cR);delete J[cR];};};if(X)for(let cT in K){let cU=K[cT];if(G['between'](cU['x']-k,cU['xEnd']+k)&&H['between'](cU['y']-l,cU['yEnd']+l))if(Q[cT])R['grids'][R['grids']['length']]=cT;else{av(cT);delete K[cT];};};if(R['grids']['length']===0x0&&R['templates']['length']===0x0){if(M&&!N&&!O){M=![];af['style']['display']='none';ae['style']['display']='block';ae['innerText']='There\x27s\x20nothing\x20here';};}else{if(!M){M=!![];af['style']['display']='block';ae['style']['display']='none';};if(a7){a7=![];window['requestAnimationFrame'](()=>{a5();a7=!![];});};};};function av(cV,cW){let cX=new Image(),cY=0x0;cX['crossOrigin']='';cX['src']=''+w[z]['images']+cV+'.png';cX['onerror']=()=>{console['warn']('Download\x20failed\x0asrc\x20:\x20'+cX['src']+'\x0aName\x20:\x20'+cV);if(I[cV]['type']==='grid')delete K[cV];else delete J[cV];delete I[cV];delete Q[cV];};cX['onload']=()=>{const cZ=0x100;let d0=document['createElement']('canvas'),d1=d0['getContext']('2d'),d2=cX['width'],d3=cX['height'];d0['width']=d2;d0['height']=d3;d1['drawImage'](cX,0x0,0x0,d2,d3);let d4=d1['getImageData'](0x0,0x0,d2,d3),d5=d4['data'];if(w[z]['chunks']==![]||m||cX['width']<=cZ*1.5&&cX['height']<=cZ*1.5){Q[cV]=d0;Q[cV]['ctx']=d1;Q[cV]['data']=d5;if(I[cV]['type']==='grid')K[cV]=I[cV];else J[cV]=I[cV];console['log'](I,'\x0aName\x20:\x20'+cV+'\x0aType\x20:\x20'+(I[cV]['type']==='grid'?'grid':'image'));cW&&cW();au();return;};let d6=performance['now']();for(let d7=0x0,d8=cZ>>0x1;d3-d7>d8;d7+=cZ)for(let d9=0x0;d2-d9>d8;d9+=cZ){const da=cV+'_#_'+d9/cZ+'_'+d7/cZ,db=d2-d9>=cZ?cZ:d2-d9,dc=d3-d7>=cZ?cZ:d3-d7,dd=db<<0x2,de=dd*dc;let df=new Uint8ClampedArray(de),dg=0x0,dh=0x0,di=null,dj=0x0;for(let dk=0x0,dl=d2<<0x2,dm=d2*d7+d9<<0x2,dn=0x0,dp,dq;dk!==dc;dk+=0x1){dp=dm+dk*dl;dq=dn+dd;while(dn!==dq){df[dn]=d5[dp];dn+=0x1;dp+=0x1;};};for(let dr=0x3;dr<de;dr+=0x4)if(df[dr]!==0x0){di=~~((dr+0x1)/dd);break;};if(di===null)continue;for(let ds=de-0x1,dt=di*dd;ds>dt;ds-=0x4)if(df[ds]!==0x0){dj=(ds+0x1)/dd;dj=dc-(~~dj===dj?dj:~~dj+0x1);break;};fi:for(let du=0x3,dv=di*dd,dw=(db-dj)*dd;du<dd;du+=0x4)for(let dx=du+dv;dx<dw;dx+=dd)if(df[dx]!==0x0){dg=du>>>0x2;break fi;};fj:for(let dy=dd-0x1,dz=di*dd,dA=(db-dj)*dd,dB=dg<<0x2;dy>dB;dy-=0x4)for(let dC=dy+dz;dC<dA;dC+=dd)if(df[dC]!==0x0){dh=db-(dy+0x1>>>0x2);break fj;};I[da]={};I[da]['x']=I[cV]['x']+d9;I[da]['y']=I[cV]['y']+d7;Q[da]=document['createElement']('canvas');Q[da]['ctx']=Q[da]['getContext']('2d');if(di||dj||dg||dh){I[da]['width']=Q[da]['width']=db-dg-dh;I[da]['height']=Q[da]['height']=dc-di-dj;Q[da]['ctx']['drawImage'](d0,d9+dg,d7+di,Q[da]['width'],Q[da]['height'],0x0,0x0,Q[da]['width'],Q[da]['height']);I[da]['x']+=dg;I[da]['y']+=di;}else{I[da]['width']=Q[da]['width']=db;I[da]['height']=Q[da]['height']=dc;Q[da]['ctx']['drawImage'](d0,d9,d7,Q[da]['width'],Q[da]['height'],0x0,0x0,Q[da]['width'],Q[da]['height']);};I[da]['xEnd']=I[da]['x']+I[da]['width'];I[da]['yEnd']=I[da]['y']+I[da]['height'];if(I[cV]['type']==='grid')K[da]=I[da];else{J[da]=I[da];Q[da]['data']=Q[da]['ctx']['getImageData'](0x0,0x0,I[da]['width'],I[da]['height'])['data'];};cY++;};console['log'](I,'\x0aName\x20:\x20'+cV+'\x0aType\x20:\x20'+(I[cV]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+cY+'\x0aTime\x20:\x20'+(performance['now']()-d6));delete I[cV];delete Q[cV];d0=null;d1=null;d4=null;d5=null;cW&&cW();au();};};function aw(){if(a1){if(X||a4)a5=()=>{aA();ay(n);};else a5=aA;}else if(a3){if(X||a4)a5=()=>{ax(n);ay(n);};else a5=()=>ax(n);}else{if(X||a4)a5=()=>{ax();ay();};else a5=ax;};};function ax(dD=o){ak['clearRect'](0x0,0x0,ah['width'],ah['height']);for(let dE of R['templates'])ak['drawImage'](Q[dE],~~((J[dE]['x']-s)*dD),~~((J[dE]['y']-t)*dD),~~(Q[dE]['width']*dD),~~(Q[dE]['height']*dD));};function ay(dF=o){if(a4){az(dF);return;};al['clearRect'](0x0,0x0,ai['width'],ai['height']);let dG,dH,dI=dF*Z;if(a1){dG=(an['xLeft']-G)/Z+G;dH=(an['yTop']-H)/Z+H;}else{dG=(s-G)/Z+G;dH=(t-H)/Z+H;};for(let dJ of R['grids'])al['drawImage'](Q[dJ],~~((K[dJ]['x']-dG)*dI),~~((K[dJ]['y']-dH)*dI),~~(Q[dJ]['width']*dI),~~(Q[dJ]['height']*dI));};function az(dK=o){al['clearRect'](0x0,0x0,ai['width'],ai['height']);function dL(dZ,e0,e1,e2,e3){al['strokeStyle']='rgb('+e3+')';al['beginPath']();al['moveTo'](dZ,e0);al['lineTo'](e1,e2);al['stroke']();};function dM(e4,e5){e4+=0x1000;e5+=0x1000;let e6=~~e5/g,e7=e6%0x24,e8=~~e4/g,e9=e8%0x24;return((e9<0xa?e9+'':String['fromCharCode'](e9-0xa+0x61))+'z'['repeat'](~~(e8/0x24))+'\x0d\x0a'+((e7<0xa?e7+'':String['fromCharCode'](e7-0xa+0x61))+'z'['repeat'](~~(e6/0x24))))['toUpperCase']();};al['lineWidth']=~~(dK/0x3);al['strokeStyle']='rgb(20,20,20)';let dN=(g-s%g)*dK,dO=(g-t%g)*dK,dP=g*dK,dQ=g/0x2,dR=ah['width']+dK,dS=ah['height']+dK,dT=an['hWidth']%dK-dK,dU=an['hHeight']%dK-dK,dV=dN+(dK-dT),dW=dO+(dK-dU),dX=(~~(s/g)+0x1)*g,dY=(~~(t/g)+0x1)*g;for(let ea=dV,eb=dX,ec=dU+dS,ed=ea+dT;ea<dR;ea+=dP,eb+=g,ed+=dP)dL(ed,dU,ed,ec,T['getLine'](eb));for(let ee=dW,ef=dY,eg=dT+dR,eh=ee+dU;ee<dS;ee+=dP,ef+=g,eh+=dP)dL(dT,eh,eg,eh,T['getLine'](ef));if(dK>0x2)return;al['strokeStyle']='rgb(255,255,255)';al['fillStyle']='rgb(20,20,20)';al['font']=~~(g*dK/0x3)+'px\x20fantasy';al['textBaseline']='top';for(let ei=dV,ej=dX,ek=dU+dS;ei<dR;ei+=dP,ej+=g)for(let el=dW,em=dY,en=dT+dR,eo=dM(ej,em);el<dS;el+=dP,em+=g,eo=dM(ej,em))al['strokeText'](eo,ei,el),al['fillText'](eo,ei,el);};function aA(ep=n){if(~~ep!==ep)return;let eq,er=0x0;for(let ex=ep**0x2;ex>0x1;ex>>>=0x1)er++;eq=er>>>0x1;S['canvas']['width']=an['width'];S['canvas']['height']=an['height'];let es,et;if(R['templates']['length']===0x1){let ey=R['templates'][0x0];es=Q[ey]['ctx']['getImageData'](an['xLeft']-J[ey]['x']-0x1,an['yTop']-J[ey]['y']-0x1,an['width'],an['height']);et=es['data'];}else{for(let ez of R['templates'])S['ctx']['drawImage'](Q[ez],an['xLeft']-J[ez]['x']-0x1,an['yTop']-J[ez]['y']-0x1,an['width'],an['height'],0x0,0x0,an['width'],an['height']);es=S['ctx']['getImageData'](0x0,0x0,S['canvas']['width'],S['canvas']['height']);et=es['data'];};let eu=B['getImageData'](~~(u-(an['width']<<eq>>>0x1)),~~(v-(an['height']<<eq>>>0x1)),~~(an['width']*ep),~~(an['height']*ep))['data'],ev=0x0,ew=ep<<0x2;for(let eA=0x0;eA<an['sizeRGBA'];eA+=an['widthRGBA'])for(let eB=eA+an['widthRGBA'],eC=eA<<er;ev<eB;ev+=0x4,eC+=ew){if(eu[eC+0x3]===0x0)continue;if(aF(et[ev],et[ev+0x1],et[ev+0x2],eu[eC],eu[eC+0x1],eu[eC+0x2])){et[ev]=et[ev+0x1]=et[ev+0x2]=~~((et[ev]+et[ev+0x1]+et[ev+0x2])/0x3);}else{et[ev]=0xff;et[ev+0x1]=et[ev+0x2]=0x0;};};if(ep===0x1){ak['putImageData'](es,0x0,0x0);}else{S['ctx']['putImageData'](es,0x0,0x0);ak['clearRect'](0x0,0x0,ah['width'],ah['height']);ak['drawImage'](S['canvas'],~~(an['borderW']-ep),~~(an['borderH']-ep),~~(an['width']*ep),~~(an['height']*ep));};};function aB(eD=o){am['clearRect'](0x0,0x0,aj['width'],aj['height']);if(a1||a3)eD=n;if(eD<=0x2)return;if(W&&eD>4.6){am['beginPath']();am['strokeStyle']='rgb(20,20,20)';let eE=ah['width']+eD,eF=ah['height']+eD,eG=an['hWidth']%eD-eD,eH=an['hHeight']%eD-eD,eI=eE+eG,eJ=eF+eH;am['lineWidth']=0x1;for(let eK=eG;eK<=eE;eK+=eD){am['moveTo'](eK,eH);am['lineTo'](eK,eJ);};for(let eL=eH;eL<=eF;eL+=eD){am['moveTo'](eG,eL);am['lineTo'](eI,eL);};am['stroke']();};am['beginPath']();am['lineWidth']=eD/0x3;am['strokeStyle']=V;am['rect'](an['hWidth'],an['hHeight'],eD,eD);am['stroke']();};function aC(eM){if(typeof eM==='string'){let eN=document['getElementById'](eM);eN['style']['display']=eN['style']['display']==='none'?'block':'none';}else if(typeof eM==='object')eM['style']['display']=eM['style']['display']==='none'?'block':'none';};function aD(eO){return document['getElementById'](eO);};function aE(eP){eP['preventDefault']();let eQ;eP=eP||window['event'];if(eP['wheelDelta']){eQ=eP['wheelDelta'];if(window['opera'])eQ=-eQ;}else if(eP['detail'])eQ=-eP['detail'];eQ>0x0&&(ab['lastZoom']*=0x2,n<<=0x1);eQ<0x0&&(ab['lastZoom']/=0x2,n>>>=0x1);if(ab['lastZoom']>0x40)ab['lastZoom']=0x40;else{if(ab['lastZoom']<0x1)ab['lastZoom']=0x1;if(a3)ab['smoothZoom'](ab['lastZoom']);else if(a1)ab['setZoom'](n);};};function aF(eR,eS,eT,eU,eV,eW){return(eR>eU?eR-eU:eU-eR)<0x1e&&(eS>eV?eS-eV:eV-eS)<0x1e&&(eT>eW?eT-eW:eW-eT)<0x1e;};function aG(eX=o){k=an['hWidth']/eX;l=an['hHeight']/eX;s=G-an['hWidth']/eX;t=H-an['hHeight']/eX;};function aH(eY,eZ,f0){A['dispatchEvent'](new MouseEvent(eY,{'clientX':eZ,'clientY':f0,'bubbles':!![]}));};function aI(f1,f2,f3){grecaptcha['execute'](aa,{'action':'placeMine'})['then'](f4=>c['send']('42[\x22place\x22,{\x22token\x22:\x22'+f4+'\x22,\x22pixel\x22:'+((f1+0x1000<<0xd|f2+0x1000)<<0x4|f3)+'}]'));};function aJ(f5){F['parentNode']['setAttribute']('class','fade-in');F['parentNode']['style']['display']='block';F['innerText']=~~f5;let f6=setInterval(()=>{if(--f5===0x0){clearInterval(f6);F['parentNode']['setAttribute']('class','fade-out');F['parentNode']['style']['display']='none';};F['innerText']=f5;},0x3e8);};function aK(f7,f8){return Math['round'](f7-0.5+Math['random']()*(f8-f7+0x1));};function aL(f9){return f9>0x0?f9:-f9;};function aM(fa,fb){fa['mozImageSmoothingEnabled']=fa['webkitImageSmoothingEnabled']=fa['msImageSmoothingEnabled']=fa['imageSmoothingEnabled']=fb;};function aN(fc){for(let fd=0x0;fd<E['length'];fd++)if(aF(...E[fd],...fc)){D[fd]['click']();break;}};function aO(fe,ff=void 0x0){let fg=document['createElement']('a');fg['href']=fe['toDataURL']('image/png');fg['download']=ff;fg['click']();};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote')&&document['getElementById']('colorSampleSelector')&&document['getElementsByClassName']('palette-color-box');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let fh=document['createElement']('script');fh['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](fh);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
