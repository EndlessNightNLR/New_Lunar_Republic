// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.9.1
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';//PZ CHANGES
(function specialFirst(){if(dz('timer'))dz('timer')['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){if(dz('message'))dz('message')['remove']();else setTimeout(specialSecond,0x14d);}());let c=document['createElement']('link');c['rel']='stylesheet';c['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](c);let d=document['createElement']('div');d['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](d);dz('settingsButton')['addEventListener']('click',()=>{let e=dz('settingsDiv');dw(e);if(e['style']['display']==='block'){e['style']['left']=(window['innerWidth']-e['offsetWidth']>>>0x1)+'px';e['style']['top']=(window['innerHeight']-e['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(f,g){return this>f&&this<g;};window['testPerformance']=()=>{console['log']('Start\x20testing');let h=null,i=!![],j=I['width']>>>0x1,k=I['height']>>>0x1;setTimeout(()=>clearInterval(h),0x1770);h=setInterval(()=>{if(i)i=![],dN('mousemove',j+dR(0x0,j>>>0x1),k+dR(0x0,k>>>0x1));else i=!![],dN('mousemove',j-dR(0x0,j>>>0x1),k-dR(0x0,k>>>0x1));},0x32);};const l='2.6.9.2',m=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],n={'init':function(){this['style']=this['style'];},get 'style'(){return this['_style'];},set 'style'(p){if(this['availableStyles']['includes'](p))this['_style']=p;else console['warn']('Style\x20is\x20missing'),this['_style']='New';let q='_'+this['_style'];for(let r of['width','height','settings','minimapbg'])this[r]=this[q][r];},'_style':'New','availableStyles':['New','Old'],'_New':{'width':0x118,'height':0xc8,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'_Old':{'width':0x1a4,'height':0x12c,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;'},'settings':{},'minimapbg':{},'width':{},'height':{},'translucent':{'false':0x1,'true':0.5}},o={'init':function(){this['language']=this['language'];},'availableLan':['ru','en'],get 'language'(){return this['_language'];},set 'language'(s){if(this['availableLan']['includes'](s))this['_language']=s;else console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist'),this['_language']='en';let t='_'+this['_language'];this['width']=this[t]['width'];this['text']=this[t]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+l,'stat':'Поставленные\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+l,'stat':'Set\x20pixels:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};n['init']();o['init']();let u=null,v=null,w=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),x=0x1,y=0x5,z=new RegExp(/-?\d+/g),A=dz('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](z),B=!!void'Child\x20of\x20starfall',C=void'Luna,\x20child\x20of\x20starfall',D=void'Sunder\x20the\x20daylight',E=void'Open\x20my\x20heart',F=void'Let\x20me\x20bleed\x20thin',G={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2}},H='New\x20Lunar\x20Republic',I=dz('canvas'),J=I['getContext']('2d'),K=dz('coordinatesNote'),L=dz('timer'),M=0x0,N=0x0,O,P,Q,R=!![],S=!![],T=![],U=![],V=0x32,W=[],X={'grids':[],'templates':[]},Y={'canvas':document['createElement']('canvas'),'ctx':void 0x0},Z='springGreen',a0=![],a1=![],a2=![],a3=0x1,a4=![],a5=![],a6=![],a7=![],a8={'pixels':0x0},a9,aa=!![],ab=!![];if(window['location']['href']['match'](z)&&window['location']['href']['match'](z)['length']==0x3)x=+window['location']['href']['match'](z)[0x2];else x=0x1;Y['ctx']=Y['canvas']['getContext']('2d');if(I['addEventListener'])I['addEventListener']('mousewheel',dB,![]);else if(I['attachEvent'])I['attachEvent']('onmousewheel',dB);if(/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',ac=>{ac['wheelDelta']==0x3?x<<=0x1:x>>>=0x1;if(x>0x40)x=0x40;else if(x<0x1)x=0x1;else if(a6&&!a5){dL(x);dn();bp();}else if(a5){dL(x);aw['updateD']();setTimeout(()=>{d7();},0xc8);dn();if(a1)cg();};});}catch(ad){};if(localStorage['cursorColor']&&m['includes'](localStorage['cursorColor']))Z=localStorage['cursorColor'];B=localStorage['debug']=='true';a0=localStorage['grid']=='true';if(localStorage['mapStyle']=='Old')n['style']='Old';a1=localStorage['sectors']=='true';if(localStorage['sectorShift']=='true'){a2=!![];a3=0.8;};a4=localStorage['translucent']=='true';if(localStorage['mobile'])w=localStorage['mobile'];if(localStorage['detector']=='true'){if(w){localStorage['detector']=![];a5=![];}else a5=!![];};a6=localStorage['sync']=='true';if(localStorage['zoomlevel'])y=+localStorage['zoomlevel'];else localStorage['zoomlevel']=y;if(localStorage['language'])o['language']=localStorage['language'];else localStorage['language']=o['language'];if(localStorage['statistics'])try{a8=JSON['parse'](atob(localStorage['statistics']));}catch(ae){localStorage['statistics']=btoa(JSON['stringify'](a8));}else localStorage['statistics']=btoa(JSON['stringify'](a8));a7=localStorage['expSectors']==='true';cc();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+l);for(let af of document['getElementsByClassName']('palette-color-box'))af['addEventListener']('click',()=>{A=af['style']['backgroundColor']['match'](z);A[0x0]*=0x1;A[0x1]*=0x1;A[0x2]*=0x1;});let ag='';for(let ah in G)ag+='<li\x20id=\x22'+ah+'\x22><span\x20style=\x22cursor:pointer;color:'+G[ah]['color']+'\x22>'+ah+'<span></li>';let ai=document['createElement']('div');ai['id']='minimapbg';ai['style']=n['minimapbg'];ai['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+n['width']+'px;height:'+n['height']+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+n['translucent'][a4]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](ai);let aj=dz('minimap-text'),ak=dz('minimap-box'),al=dz('minimap-config');let am=dz('minimap'),an=dz('minimapSectors'),ao=dz('minimapCover'),ap=am['getContext']('2d'),aq=an['getContext']('2d'),ar=ao['getContext']('2d');for(let as of ak['childNodes']){as['width']=as['offsetWidth'];as['height']=as['offsetHeight'];};dW(ap,![]);dW(aq,![]);setTimeout(()=>{for(let at=0x0,au=0x0,ag=document['getElementsByTagName']('canvas');at<ag['length'];at++){if(ag[at]['id']=='minimap')au++;if(au>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let aw={'updateM':function(){this['hWidth']=am['width']>>>0x1;this['hHeight']=am['height']>>>0x1;},'updateD':function(){this['width']=am['width']/x&0x7fe;this['height']=am['height']/x&0x7fe;this['borderW']=am['width']-this['width']*x>>>0x1;this['borderH']=am['height']-this['height']*x>>>0x1;this['xLeft']=M-(this['width']>>>0x1);this['yTop']=N-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};aw['updateM']();aw['updateD']();let ax=new XMLHttpRequest(),ay='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';ax['onloadend']=function(){if(this['status']==0xc8){try{let az=document['createElement']('script');az['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](az);}catch(aA){};G=JSON['parse'](this['responseText']);for(let H in G){H=G[H];if(H['chunks']&&(H['chunks']=='true'||+H['chunks']==0x1))H['chunks']=!![];};if(B){console['log']('Factions\x20:');console['log'](G);};H=localStorage['faction']||Object['keys'](G)[0x0];bh();let aC='';for(let aD in G)aC+='<li\x20id=\x22'+aD+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:normal;\x20color:'+G[aD]['color']+'\x22>'+aD+'<span></li>';dz('listF')['innerHTML']=aC;for(let aE in G)dz(aE)['onclick']=function(){dw('factions');dz(H)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=H=this['id'];bh();};dz(H)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+ay+'\x0aStatus\x20:\x20'+this['status']);ax=null;};ax['open']('GET',ay);ax['send']();dn();dz('hide-map')['onclick']=()=>{R=![];ak['style']['display']='none';al['style']['display']='none';aj['style']['display']='block';aj['innerText']='Minimap';aj['style']['cursor']='pointer';};aj['onclick']=()=>{R=!![];ak['style']['display']='block';al['style']['display']='block';aj['style']['display']='none';aj['style']['cursor']='default';bp();};dz('zoom-plus')['addEventListener']('mousedown',aF=>{aF['preventDefault']();T=!![];U=![];bn();},![]);dz('zoom-plus')['addEventListener']('mouseup',()=>T=![],![]);dz('zoom-minus')['addEventListener']('mousedown',aG=>{aG['preventDefault']();U=!![];T=![];bo();},![]);dz('zoom-minus')['addEventListener']('mouseup',()=>U=![],![]);if(w){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');al['style']['lineHeight']='27px';let aH=document['createElement']('div'),aI=document['createElement']('canvas');aI['height']=aI['width']=0x15;let aJ=aI['getContext']('2d');aJ['strokeStyle']='white';aH['style']='position:\x20absolute;\x20top:\x20'+(window['innerHeight']+aI['height'])/0x2+'px;\x20left:\x20'+(window['innerWidth']+aI['width'])/0x2+'px;';aH['appendChild'](aI);document['body']['appendChild'](aH);let aK=aI['getContext']('2d'),aL=I['getContext']('2d')['getImageData'](+aH['style']['left']['replace']('px','')[0x0],+aH['style']['top']['replace']('px','')[0x0],aI['width'],aI['height'])['data'],aM=aK['getImageData'](0x0,0x0,aI['width'],aI['height']),aN=aM['data'];for(let N=0x0;N<aI['height'];N++)aN[(aI['width']*(0.5+N)<<0x2)+0x3]=0xff;for(let M=0x0;M<aI['width'];M++)aN[(aI['width']*((aI['height']>>>0x1)-0x1)+M<<0x2)+0x3]=0xff;aK['putImageData'](aM,0x0,0x0);aI['update']=function(){let aL=J['getImageData'](+aH['style']['left']['replace']('px','')[0x0],+aH['style']['top']['replace']('px','')[0x0],aI['width'],aI['height'])['data'],aM=aK['getImageData'](0x0,0x0,this['width'],this['height']),aN=aM['data'];for(let N=0x0;N<this['height'];N++){let aU=this['width']*(0.5+N)<<0x2;if(aL[aU]===0x80&&aL[aU+0x1]===0x80&&aL[aU+0x2]===0x80){aN[aU]=0x0;aN[aU+0x1]=0xe6;aN[aU+0x2]=0xe6;}else{aN[aU]=0xff^aL[aU];aN[aU+0x1]=0xff^aL[aU+0x1];aN[aU+0x2]=0xff^aL[aU+0x2];};};for(let M=0x0;M<this['width'];M++){let aU=this['width']*((this['height']>>>0x1)-0x1)+M<<0x2;if(aL[aU]===0x80&&aL[aU+0x1]===0x80&&aL[aU+0x2]===0x80){aN[aU]=0x0;aN[aU+0x1]=0xe6;aN[aU+0x2]=0xe6;}else{aN[aU]=0xff^aL[aU];aN[aU+0x1]=0xff^aL[aU+0x1];aN[aU+0x2]=0xff^aL[aU+0x2];};};aK['putImageData'](aM,0x0,0x0);};I['addEventListener']('touchmove',()=>{if(!aa)return;aa=![];window['requestAnimationFrame'](()=>{aa=!![];aI['update']();});},![]);setInterval(()=>{let aX=0x0,aY=0x0,aZ=[];if(window['location']['search']){aZ=window['location']['search']['match'](z);aX=+aZ[0x0];aY=+aZ[0x1];};if(M!=aX||N!=aY||aZ['length']===0x3&&x!==+aZ[0x2]){M=aX;N=aY;if(aZ['length']===0x3)x=+aZ[0x2];if(!R)return;if(a5){dL(x);aw['updateD']();x==0x1?bp():setTimeout(bp,0x64);}else{a6?dL(x):dL();bp();};};},0x96);}else{window['addEventListener']('mousemove',b0=>{let b1=K['innerText']['match'](z),b2=+b1[0x0],b3=+b1[0x1];if(M!=b2||N!=b3){M=b2;N=b3;E=b0['clientX'];F=b0['clientY'];if(!R)return;if(a5){dL(x);aw['updateD']();x==0x1?bp():setTimeout(bp,0x64);}else{a6?dL(x):dL();bp();};};},![]);};let b4=document['createElement']('div');b4['id']='settingsDiv';b4['style']='width:\x20'+o['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+n['settings'];b4['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+o['text']['title']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+Z+'\x22>'+Z+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(a0?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+n['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a1?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a7?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(a2?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(a4?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(a5?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(a6?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+o['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22statText\x22>'+o['text']['stat']+'</span><span\x20id\x20=\x20\x22stat\x22\x20style\x20=\x20\x22textButton\x22>'+a8['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+o['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](b4);window['addEventListener']('unload',()=>localStorage['zoomlevel']=y);(()=>{let b5=dz('infoText')['getElementsByTagName']('a');b5[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');b5[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();I['addEventListener']('click',()=>{if(L['innerText']!=0x3)return;let b6;for(let b7=0x0;b7<X['templates']['length'];b7++){let b8=X['templates'][b7];b6=W[b8]['ctx']['getImageData'](M-P[b8]['x'],N-P[b8]['y'],0x1,0x1)['data'];if(b6[0x3]===0xff)break;};if(dE(A[0x0],A[0x1],A[0x2],b6[0x0],b6[0x1],b6[0x2]))setTimeout(()=>{if(L['innerText']==0x2){dz('stat')['innerText']=a8['pixels']++;localStorage['statistics']=btoa(JSON['stringify'](a8));};},0x76c);});if(w){dz('detector')['style']['cursor']='not-allowed';dz('detectorText')['style']['cursor']='not-allowed';};window['addEventListener']('keydown',b9=>{let ba=b9['keyCode'];switch(ba){case 0x1b:dz('settingsDiv')['style']['display']='none';break;case 0x60:case 0x30:if(localStorage['debug']=='true'){B=![];console['log']('Debug\x20is\x20off');}else{B=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=B;break;case 0x61:case 0x31:dw('factions');break;case 0x62:case 0x32:dz('settingsButton')['click']();break;case 0x63:case 0x33:dz('sectors')['click']();break;case 0x64:case 0x34:dz('detector')['click']();break;};});dz('cursorColorText')['onclick']=dz('cursorColor')['onclick']=()=>{let bb=m['indexOf'](Z)+0x1;if(bb===m['length'])bb=0x0;localStorage['cursorColor']=dz('cursorColor')['innerText']=dz('cursorColor')['style']['color']=Z=m[bb];;dn();};dz('gridText')['onclick']=dz('grid')['onclick']=()=>{ar['clearRect'](0x0,0x0,ao['width'],ao['height']);dz('grid')['innerText']=(localStorage['grid']=a0=!a0)?'On':'Off';dn();};dz('mapStyleText')['onclick']=dz('mapStyle')['onclick']=()=>{localStorage['mapStyle']=n['style']=n['style']=='Old'?'New':'Old';ak['style']['width']=n['width']+'px';ak['style']['height']=n['height']+'px';for(let bc of ak['childNodes']){bc['width']=bc['offsetWidth'];bc['height']=bc['offsetHeight'];};dW(ap,![]);dW(aq,![]);a5||a6?dL(x):dL();dz('settingsDiv')['style']='width:\x20'+dz('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+dz('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+dz('settingsDiv')['style']['left']+';\x20top:\x20'+dz('settingsDiv')['style']['top']+';\x20'+n['settings'];dz('minimapbg')['style']=n['minimapbg'];dz('mapStyle')['innerText']=n['style'];dn();a9();};dz('sectorsText')['onclick']=dz('sectors')['onclick']=()=>{a1=!a1;cc();a1?a9():aq['clearRect'](0x0,0x0,an['width'],an['height']);dz('sectors')['innerText']=a1?'On':'Off';localStorage['sectors']=a1;};dz('settingsDivCancel')['onclick']=()=>dw('settingsDiv');dz('sectorShiftText')['onclick']=dz('sectorShift')['onclick']=()=>{a3=(a2=!a2)?0.8:0x1;dz('sectorShift')['innerText']=a2?'On':'Off';localStorage['sectorShift']=a2;a9();};dz('translucentText')['onclick']=dz('translucent')['onclick']=()=>{a4=!a4;dz('translucent')['innerText']=a4?'On':'Off';dz('minimapSectors')['style']['opacity']=n['translucent'][a4];localStorage['translucent']=a4;a9();};if(!w)dz('detectorText')['onclick']=dz('detector')['onclick']=()=>{if(a5=!a5){dz('zoom-minus')['style']['cursor']=dz('zoom-plus')['style']['cursor']='not-allowed';aw['updateD']();}else dz('zoom-minus')['style']['cursor']=dz('zoom-plus')['style']['cursor']='pointer';dz('detector')['innerText']=a5?'On':'Off';localStorage['detector']=a5;dL(x);cc();bp();dn();};dz('languageText')['onclick']=dz('language')['onclick']=function(){let bd=o['availableLan']['indexOf'](o['language'])+0x1;if(bd===o['availableLan']['length'])bd=0x0;o['language']=o['availableLan'][bd];localStorage['language']=dz('language')['innerText']=o['language'];dz('settingsDiv')['style']['width']=o['width'];for(let be in o['text']){let bf=dz(be+'Text');if(bf)bf['innerHTML']=o['text'][be];};let bg=dz('infoText')['getElementsByTagName']('a');bg[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bg[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};dz('syncText')['onclick']=dz('sync')['onclick']=()=>{(a6=!a6)?dL(x):dL();localStorage['sync']=a6;dz('sync')['innerText']=a6?'On':'Off';cc();bp();dn();};dz('expSectorsText')['onclick']=dz('expSectors')['onclick']=()=>{a7=!a7;dz('expSectors')['innerText']=a7?'On':'Off';localStorage['expSectors']=a7;!a7&&aq['clearRect'](0x0,0x0,am['width'],am['height']);cc();a9();};function bh(){let bi=''+G[H]['data']+(G[H]['type']==0x1?'?'+new Date()['getTime']():'');B&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+H+'\x0aURL\x20:\x20'+bi);O={};P={};Q={};W={};let bj=new XMLHttpRequest();bj['onloadend']=function(){if(this['status']==0xc8){O=JSON['parse'](this['responseText']);for(let bk in O){O[bk]['x']*=0x1;O[bk]['y']*=0x1;O[bk]['type']==='grid'?Q[bk]=O[bk]:P[bk]=O[bk];};for(let bl of X['templates'])bs(bl,()=>B&&console['log']('Img\x20updated'));for(let bm of X['grids'])bs(bm,()=>B&&console['log']('Grid\x20updated'));B&&console['log']('Update\x20completed',O,P,Q);}else console['error']('Error\x20:\x20'+G[H]['data']+'\x0aStatus\x20:\x20'+this['status']);};bj['open']('GET',bi);bj['send']();};function bn(){if(!T||a5)return;if(a6){localStorage['sync']=a6=![];y=x;dz('sync')['innerText']=a6?'On':'Off';cc();};y*=1.1;if(y>0x20){y=0x20;return;};a5?aw['updateD']():a6?dL(x):dL();dn();a9();setTimeout(bn,V);};function bo(){if(!U||a5)return;if(a6){localStorage['sync']=a6=![];y=x;dz('sync')['innerText']=a6?'On':'Off';cc();};y/=1.1;if(y<0x1){y=0x1;return;};a5?aw['updateD']():a6?dL(x):dL();dn();bp();setTimeout(bo,V);};function bp(){if(!R||!P)return;X['grids']=[];X['templates']=[];for(let bq in P)if(M['between'](P[bq]['x']-u,P[bq]['x']+P[bq]['width']+u)&&N['between'](P[bq]['y']-v,P[bq]['y']+P[bq]['height']+v))if(W[bq])X['templates'][X['templates']['length']]=bq;else{bs(bq);delete P[bq];};if(a1)for(let br in Q)if(M['between'](Q[br]['x']-u,Q[br]['x']+Q[br]['width']+u)&&N['between'](Q[br]['y']-v,Q[br]['y']+Q[br]['height']+v))if(W[br])X['grids'][X['grids']['length']]=br;else{bs(br);delete Q[br];};if(X['grids']['length']===0x0&&X['templates']['length']===0x0){if(S&&!T&&!U){S=![];ak['style']['display']='none';aj['style']['display']='block';aj['innerText']='There\x27s\x20nothing\x20here';};}else{if(!S){S=!![];ak['style']['display']='block';aj['style']['display']='none';};if(ab){ab=![];window['requestAnimationFrame'](()=>{a9();ab=!![];});};};};function bs(bt,bu){let bv=new Image(),bw=0x0;bv['crossOrigin']='';bv['src']=''+G[H]['images']+bt+'.png';bv['onerror']=()=>{console['log']('Download\x20failed\x0asrc\x20:\x20'+bv['src']+'\x0aName\x20:\x20'+bt);if(O[bt]['type']==='grid')delete Q[bt];else delete P[bt];delete O[bt];delete W[bt];};bv['onload']=()=>{const bx=0x100;let by=document['createElement']('canvas'),bz=by['getContext']('2d'),bA=bv['width'],bB=bv['height'];by['width']=bA;by['height']=bB;bz['drawImage'](bv,0x0,0x0,bA,bB);let bC=bz['getImageData'](0x0,0x0,bA,bB),bD=bC['data'];if(!G[H]['chunks']||w||bv['width']<=bx*1.5&&bv['height']<=bx*1.5){W[bt]=by;W[bt]['ctx']=bz;O[bt]['type']==='grid'?Q[bt]=O[bt]:P[bt]=O[bt];B&&console['log'](O,'\x0aName\x20:\x20'+bt+'\x0aType\x20:\x20'+(O[bt]['type']==='grid'?'grid':'image'));if(bu)bu();bp();return;};let bE=performance['now']();for(let N=0x0,bG=bx>>0x1;bB-N>bG;N+=bx)for(let M=0x0;bA-M>bG;M+=bx){const bI=bt+'_#_'+M/bx+'_'+N/bx,bJ=bA-M>=bx?bx:bA-M,bK=bB-N>=bx?bx:bB-N,bL=bJ<<0x2,bM=bL*bK;let bN=new Uint8ClampedArray(bM),bO=0x0,bP=0x0,bQ=null,bR=0x0;for(let bS=0x0,bT=bA<<0x2,bU=bA*N+M<<0x2,bV=0x0,bW,bG;bS!==bK;bS+=0x1){bW=bU+bS*bT;bG=bV+bL;while(bV!==bG){bN[bV]=bD[bW];bV+=0x1;bW+=0x1;};};for(let bY=0x3;bY<bM;bY+=0x4)if(bN[bY]!==0x0){bQ=~~((bY+0x1)/bL);break;};if(bQ===null)continue;for(let bZ=bM-0x1,bG=bQ*bL;bZ>bG;bZ-=0x4)if(bN[bZ]!==0x0){bR=(bZ+0x1)/bL;bR=bK-(~~bR===bR?bR:~~bR+0x1);break;};c1:for(let M=0x3,c3=bQ*bL,bG=(bJ-bR)*bL;M<bL;M+=0x4)for(let bV=M+c3;bV<bG;bV+=bL)if(bN[bV]!==0x0){bO=M>>>0x2;break c1;};c6:for(let M=bL-0x1,c8=bQ*bL,bG=(bJ-bR)*bL,ca=bO<<0x2;M>ca;M-=0x4)for(let bV=M+c8;bV<bG;bV+=bL)if(bN[bV]!==0x0){bP=bJ-(M+0x1>>>0x2);break c6;};O[bI]={'x':O[bt]['x']+M,'y':O[bt]['y']+N};W[bI]=document['createElement']('canvas');W[bI]['ctx']=W[bI]['getContext']('2d');if(bQ||bR||bO||bP){O[bI]['width']=W[bI]['width']=bJ-bO-bP;O[bI]['height']=W[bI]['height']=bK-bQ-bR;W[bI]['ctx']['drawImage'](by,M+bO,N+bQ,W[bI]['width'],W[bI]['height'],0x0,0x0,W[bI]['width'],W[bI]['height']);O[bI]['x']+=bO;O[bI]['y']+=bQ;}else{O[bI]['width']=W[bI]['width']=bJ;O[bI]['height']=W[bI]['height']=bK;W[bI]['ctx']['drawImage'](by,M,N,W[bI]['width'],W[bI]['height'],0x0,0x0,W[bI]['width'],W[bI]['height']);};O[bt]['type']==='grid'?Q[bI]=O[bI]:P[bI]=O[bI];bw+=0x1;};B&&console['log'](O,'\x0aName\x20:\x20'+bt+'\x0aType\x20:\x20'+(O[bt]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+bw+'\x0aTime\x20:\x20'+(performance['now']()-bE));delete O[bt];delete W[bt];by=null;bz=null;bC=null;bD=null;if(bu)bu();bp();};};function cc(){if(a5){if(a1||a7)a9=()=>{d7();cg(x);};else a9=d7;}else if(a6){if(a1||a7)a9=()=>{cd(x);cg(x);};else a9=()=>cd(x);}else{if(a1||a7)a9=()=>{cd();cg();};else a9=cd;};};function cd(ce=y){ap['clearRect'](0x0,0x0,am['width'],am['height']);for(let cf of X['templates'])ap['drawImage'](W[cf],~~((P[cf]['x']-C)*ce),~~((P[cf]['y']-D)*ce),~~(W[cf]['width']*ce),~~(W[cf]['height']*ce));};function cg(ch=y){if(a7){cm(ch);return;};aq['clearRect'](0x0,0x0,an['width'],an['height']);let ci,cj,ck=ch*a3;if(a5){ci=(aw['xLeft']-M)/a3+M;cj=(aw['yTop']-N)/a3+N;}else{ci=(C-M)/a3+M;cj=(D-N)/a3+N;};for(let cl of X['grids'])aq['drawImage'](W[cl],~~((Q[cl]['x']-ci)*ck),~~((Q[cl]['y']-cj)*ck),~~(W[cl]['width']*ck),~~(W[cl]['height']*ck));};function cm(cn=y){aq['clearRect'](0x0,0x0,an['width'],an['height']);const co=0x1e;function cp(M,N,cs,ct,cu){aq['strokeStyle']='rgb('+cu+')';aq['beginPath']();aq['moveTo'](M,N);aq['lineTo'](cs,ct);aq['stroke']();};function cv(M,cx){return~~(M*0xff/cx);};function cy(M,cA,cB){return M>cB||M<cA?0x0:M-cA;};aq['lineWidth']=~~(cn/0x3);aq['strokeStyle']='rgb(20,20,20)';let cC=(co-C%co)*cn,cD=(co-D%co)*cn,cE=co*cn,cF=co/0x2,cG=am['width']+cn,cH=am['height']+cn,cI=aw['hWidth']%cn-cn,cJ=aw['hHeight']%cn-cn,cK=cC+(cn-cI),cL=cD+(cn-cJ),cM=(~~(C/co)+0x1)*co,cN=(~~(D/co)+0x1)*co;const cO=0x190,cP=cO/0x3,cQ=cP<<0x1;for(let cR=cK,M=cM,cT=cJ+cH,cU=dU(M%cO),cV=cR+cI;cR<cG;cR+=cE,M+=co,cU=dU(M%cO),cV+=cE)cp(cV,cJ,cV,cT,[cv(cy(cU,0x0,cP),cP),cv(cy(cU,cP,cQ),cP),cv(cy(cU,cQ,cO),cP)]);for(let cW=cL,N=cN,cY=cI+cG,cZ=dU(N%cO),d0=cW+cJ;cW<cH;cW+=cE,N+=co,cZ=dU(N%cO),d0+=cE)cp(cI,d0,cY,d0,[cv(cy(cZ,0x0,cP),cP),cv(cy(cZ,cP,cQ),cP),cv(cy(cZ,cQ,cO),cP)]);if(cn>0x2)return;aq['strokeStyle']='rgb(255,255,255)';aq['fillStyle']='rgb(20,20,20)';aq['font']=~~(co*cn/0x3)+'px\x20fantasy';aq['textBaseline']='top';for(let d1=cK,M=cM,d3=cJ+cH;d1<cG;d1+=cE,M+=co)aq['strokeText'](M,d1,0x0),aq['fillText'](M,d1,0x0);for(let d4=cL,N=cN,d6=cI+cG;d4<cH;d4+=cE,N+=co)aq['strokeText'](N,0x0,d4),aq['fillText'](N,0x0,d4);};function d7(d8=x){let d9=0x0,da=0x0;for(let db=d8*d8;db>0x1;db>>>=0x1)da++;d9=da>>>0x1;Y['canvas']['width']=aw['width'];Y['canvas']['height']=aw['height'];let dc,dd;if(X['templates']['length']===0x1){let de=X['templates'][0x0];dc=W[de]['ctx']['getImageData'](aw['xLeft']-P[de]['x']-0x1,aw['yTop']-P[de]['y']-0x1,aw['width'],aw['height']);dd=dc['data'];}else{for(let df of X['templates'])Y['ctx']['drawImage'](W[df],aw['xLeft']-P[df]['x']-0x1,aw['yTop']-P[df]['y']-0x1,aw['width'],aw['height'],0x0,0x0,aw['width'],aw['height']);dc=Y['ctx']['getImageData'](0x0,0x0,Y['canvas']['width'],Y['canvas']['height']);dd=dc['data'];};let dg=J['getImageData'](~~(E-(aw['width']<<d9>>>0x1)),~~(F-(aw['height']<<d9>>>0x1)),~~(aw['width']*d8),~~(aw['height']*d8))['data'],dh=0x0,di=x<<0x2;for(let dj=0x0;dj<aw['sizeRGBA'];dj+=aw['widthRGBA']){dh=dj<<da;let dk=dj,dl=dh,dm=dj+aw['widthRGBA'];while(dk<dm){dk+=0x4;if(dg[(dl+=di)+0x3]===0x0)continue;if(dE(dd[dk],dd[dk+0x1],dd[dk+0x2],dg[dl],dg[dl+0x1],dg[dl+0x2]))dd[dk]=dd[dk+0x1]=dd[dk+0x2]=~~((dd[dk]+dd[dk+0x1]+dd[dk+0x2])/0x3);else dd[dk]=0xff,dd[dk+0x1]=dd[dk+0x2]=0x0;};};if(x===0x1){ap['putImageData'](dc,0x0,0x0);}else{Y['ctx']['putImageData'](dc,0x0,0x0);ap['clearRect'](0x0,0x0,am['width'],am['height']);ap['drawImage'](Y['canvas'],~~(aw['borderW']-d8),~~(aw['borderH']-d8),~~(aw['width']*d8),~~(aw['height']*d8));};dg=null;};function dn(dp=y){ar['clearRect'](0x0,0x0,ao['width'],ao['height']);if(a5||a6)dp=x;if(dp<=0x2)return;if(a0&&dp>4.6){ar['beginPath']();let dq=am['width']+dp,dr=am['height']+dp,ds=(am['width']>>>0x1)%dp-dp,dt=(am['height']>>>0x1)%dp-dp;ar['lineWidth']=0x1;for(let M=0x0;M<=dq;M+=dp){ar['moveTo'](M+ds,dt);ar['lineTo'](M+ds,dr+dt);};for(let N=0x0;N<=dr;N+=dp){ar['moveTo'](ds,N+dt);ar['lineTo'](dq+ds,N+dt);};ar['strokeStyle']='rgb(20,20,20)';ar['stroke']();};ar['beginPath']();ar['lineWidth']=dp/0x3;ar['strokeStyle']=Z;ar['rect'](am['width']>>>0x1,am['height']>>>0x1,dp,dp);ar['stroke']();};function dw(dx){if(typeof dx==='string'){let dy=document['getElementById'](dx);dy['style']['display']=dy['style']['display']==='none'?'block':'none';}else if(typeof dx==='object')dx['style']['display']=dx['style']['display']==='none'?'block':'none';};function dz(dA){return document['getElementById'](dA);};function dB(dC){let dD;dC=dC||window['event'];if(dC['wheelDelta']){dD=dC['wheelDelta']/0x78;if(window['opera'])dD=~dD+0x1;}else if(dC['detail'])dD=-dC['detail']/0x3;dD==0x1?x<<=0x1:x>>>=0x1;if(x>0x40)x=0x40;else if(x<0x1)x=0x1;else if(a5){setTimeout(()=>{aw['updateD']();dL(x);d7();a1&&cg(x);dn();},0xc8);}else if(a6){dL(x);dn();bp();};};function dE(dF,dG,dH,dI,dJ,dK){return(dF>dI?dF-dI:dI-dF)<0x1e&&(dG>dJ?dG-dJ:dJ-dG)<0x1e&&(dH>dK?dH-dK:dK-dH)<0x1e;};function dL(dM=y){u=(C=am['width']>>>0x1)/dM;v=(D=am['height']>>>0x1)/dM;C=M-C/dM;D=N-D/dM;};function dN(dO,M,N){if(M<0x0||N<0x0)return;I['dispatchEvent'](new MouseEvent(dO,{'clientX':M,'clientY':N,'bubbles':!![]}));};function dR(dS,dT){return Math['round'](dS-0.5+Math['random']()*(dT-dS+0x1));};function dU(M){return M>0x0?M:-M;};function dW(dX,dY){dX['mozImageSmoothingEnabled']=dX['webkitImageSmoothingEnabled']=dX['msImageSmoothingEnabled']=dX['imageSmoothingEnabled']=dY;};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote')&&document['getElementById']('colorSampleSelector');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let dZ=document['createElement']('script');dZ['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](dZ);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
