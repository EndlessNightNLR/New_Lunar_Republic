// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.9.1
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';//PZ CHANGES
(function specialFirst(){let c=dD('timer');if(c)c['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){let d=dD('message');if(d)d['remove']();else setTimeout(specialSecond,0x14d);}());let e=document['createElement']('link');e['rel']='stylesheet';e['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](e);let f=document['createElement']('div');f['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](f);dD('settingsButton')['addEventListener']('click',()=>{let g=dD('settingsDiv');dA(g);if(g['style']['display']==='block'){g['style']['left']=(window['innerWidth']-g['offsetWidth']>>>0x1)+'px';g['style']['top']=(window['innerHeight']-g['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(h,i){return this>h&&this<i;};window['testPerformance']=()=>{console['log']('Start\x20testing');let j=null,k=!![],l=K['width']>>>0x1,m=K['height']>>>0x1;setTimeout(()=>clearInterval(j),0x1770);j=setInterval(()=>{if(k)k=![],dR('mousemove',l+dV(0x0,l>>>0x1),m+dV(0x0,m>>>0x1));else k=!![],dR('mousemove',l-dV(0x0,l>>>0x1),m-dV(0x0,m>>>0x1));},0x32);};const n='2.6.9.2',o=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],p={'init':function(){this['style']=this['style'];},get 'style'(){return this['_style'];},set 'style'(r){if(this['availableStyles']['includes'](r))this['_style']=r;else console['warn']('Style\x20is\x20missing'),this['_style']='New';let s='_'+this['_style'];for(let t of['width','height','settings','minimapbg'])this[t]=this[s][t];},'_style':'New','availableStyles':['New','Old'],'_New':{'width':0x118,'height':0xc8,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'_Old':{'width':0x1a4,'height':0x12c,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;'},'settings':{},'minimapbg':{},'width':{},'height':{},'translucent':{'false':0x1,'true':0.5}},q={'init':function(){this['language']=this['language'];},'availableLan':['ru','en'],get 'language'(){return this['_language'];},set 'language'(u){if(this['availableLan']['includes'](u))this['_language']=u;else console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist'),this['_language']='en';let v='_'+this['_language'];this['width']=this[v]['width'];this['text']=this[v]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'stat':'Поставленные\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'stat':'Set\x20pixels:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};p['init']();q['init']();let w=null,x=null,y=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),z=0x1,A=0x5,B=new RegExp(/-?\d+/g),C=dD('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](B),D=!!void'Child\x20of\x20starfall',E=void'Luna,\x20child\x20of\x20starfall',F=void'Sunder\x20the\x20daylight',G=void'Open\x20my\x20heart',H=void'Let\x20me\x20bleed\x20thin',I={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2}},J='New\x20Lunar\x20Republic',K=dD('canvas'),L=K['getContext']('2d'),M=dD('coordinatesNote'),N=dD('timer'),O=0x0,P=0x0,Q,R,S,T=!![],U=!![],V=![],W=![],X=0x32,Y=[],Z={'grids':[],'templates':[]},a0={'canvas':document['createElement']('canvas'),'ctx':void 0x0},a1='springGreen',a2=![],a3=![],a4=![],a5=0x1,a6=![],a7=![],a8=![],a9=![],aa={'pixels':0x0},ab,ac=!![],ad=!![];if(window['location']['href']['match'](B)&&window['location']['href']['match'](B)['length']==0x3)z=+window['location']['href']['match'](B)[0x2];else z=0x1;a0['ctx']=a0['canvas']['getContext']('2d');if(K['addEventListener'])K['addEventListener']('mousewheel',dF,![]);else if(K['attachEvent'])K['attachEvent']('onmousewheel',dF);if(/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',ae=>{ae['wheelDelta']==0x3?z<<=0x1:z>>>=0x1;if(z>0x40)z=0x40;else if(z<0x1)z=0x1;else if(a8&&!a7){dP(z);ds();bt();}else if(a7){dP(z);ay['updateD']();setTimeout(()=>{db();},0xc8);ds();if(a3)ck();};});}catch(af){};if(localStorage['cursorColor']&&o['includes'](localStorage['cursorColor']))a1=localStorage['cursorColor'];D=localStorage['debug']=='true';a2=localStorage['grid']=='true';if(localStorage['mapStyle']=='Old')p['style']='Old';a3=localStorage['sectors']=='true';if(localStorage['sectorShift']=='true'){a4=!![];a5=0.8;};a6=localStorage['translucent']=='true';if(localStorage['mobile'])y=localStorage['mobile'];if(localStorage['detector']=='true'){if(y){localStorage['detector']=![];a7=![];}else a7=!![];};a8=localStorage['sync']=='true';if(localStorage['zoomlevel'])A=+localStorage['zoomlevel'];else localStorage['zoomlevel']=A;if(localStorage['language'])q['language']=localStorage['language'];else localStorage['language']=q['language'];if(localStorage['statistics'])try{aa=JSON['parse'](atob(localStorage['statistics']));}catch(ag){localStorage['statistics']=btoa(JSON['stringify'](aa));}else localStorage['statistics']=btoa(JSON['stringify'](aa));a9=localStorage['expSectors']==='true';cg();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+n);for(let ah of document['getElementsByClassName']('palette-color-box'))ah['addEventListener']('click',()=>{C=ah['style']['backgroundColor']['match'](B);C[0x0]*=0x1;C[0x1]*=0x1;C[0x2]*=0x1;});let ai='';for(let aj in I)ai+='<li\x20id=\x22'+aj+'\x22><span\x20style=\x22cursor:pointer;color:'+I[aj]['color']+'\x22>'+aj+'<span></li>';let ak=document['createElement']('div');ak['id']='minimapbg';ak['style']=p['minimapbg'];ak['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+p['width']+'px;height:'+p['height']+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+p['translucent'][a6]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](ak);let al=dD('minimap-text'),am=dD('minimap-box'),an=dD('minimap-config');let ao=dD('minimap'),ap=dD('minimapSectors'),aq=dD('minimapCover'),ar=ao['getContext']('2d'),as=ap['getContext']('2d'),at=aq['getContext']('2d');for(let au of am['childNodes']){au['width']=au['offsetWidth'];au['height']=au['offsetHeight'];};e0(ar,![]);e0(as,![]);setTimeout(()=>{for(let av=0x0,aw=0x0,ai=document['getElementsByTagName']('canvas');av<ai['length'];av++){if(ai[av]['id']=='minimap')aw++;if(aw>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let ay={'updateM':function(){this['hWidth']=ao['width']>>>0x1;this['hHeight']=ao['height']>>>0x1;},'updateD':function(){this['width']=ao['width']/z&0x7fe;this['height']=ao['height']/z&0x7fe;this['borderW']=ao['width']-this['width']*z>>>0x1;this['borderH']=ao['height']-this['height']*z>>>0x1;this['xLeft']=O-(this['width']>>>0x1);this['yTop']=P-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};ay['updateM']();ay['updateD']();let az=new XMLHttpRequest(),aA='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';az['onloadend']=function(){if(this['status']==0xc8){try{let aB=document['createElement']('script');aB['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](aB);}catch(aC){};I=JSON['parse'](this['responseText']);for(let J in I){J=I[J];if(J['chunks']&&(J['chunks']=='true'||+J['chunks']==0x1))J['chunks']=!![];};if(D){console['log']('Factions\x20:');console['log'](I);};J=localStorage['faction']||Object['keys'](I)[0x0];bl();let aE='';for(let aF in I)aE+='<li\x20id=\x22'+aF+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:normal;\x20color:'+I[aF]['color']+'\x22>'+aF+'<span></li>';dD('listF')['innerHTML']=aE;for(let aG in I)dD(aG)['onclick']=function(){dA('factions');dD(J)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=J=this['id'];bl();};dD(J)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+aA+'\x0aStatus\x20:\x20'+this['status']);az=null;};az['open']('GET',aA);az['send']();ds();dD('hide-map')['onclick']=()=>{T=![];am['style']['display']='none';an['style']['display']='none';al['style']['display']='block';al['innerText']='Minimap';al['style']['cursor']='pointer';};al['onclick']=()=>{T=!![];am['style']['display']='block';an['style']['display']='block';al['style']['display']='none';al['style']['cursor']='default';bt();};if(y){dD('zoom-plus')['addEventListener']('touchstart',aH=>{aH['preventDefault']();V=!![];W=![];br();},![]);dD('zoom-plus')['addEventListener']('touchend',()=>V=![],![]);dD('zoom-minus')['addEventListener']('touchstart',aI=>{aI['preventDefault']();W=!![];V=![];bs();},![]);dD('zoom-minus')['addEventListener']('touchend',()=>W=![],![]);}else{dD('zoom-plus')['addEventListener']('mousedown',aJ=>{aJ['preventDefault']();V=!![];W=![];br();},![]);dD('zoom-plus')['addEventListener']('mouseup',()=>V=![],![]);dD('zoom-minus')['addEventListener']('mousedown',aK=>{aK['preventDefault']();W=!![];V=![];bs();},![]);dD('zoom-minus')['addEventListener']('mouseup',()=>W=![],![]);};if(y){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');an['style']['lineHeight']='27px';let aL=document['createElement']('div'),aM=document['createElement']('canvas');aM['height']=aM['width']=0x15;let aN=aM['getContext']('2d');aN['strokeStyle']='white';aL['style']='position:\x20absolute;\x20top:\x20'+(window['innerHeight']+aM['height'])/0x2+'px;\x20left:\x20'+(window['innerWidth']+aM['width'])/0x2+'px;';aL['appendChild'](aM);document['body']['appendChild'](aL);let aO=aM['getContext']('2d'),aP=K['getContext']('2d')['getImageData'](+aL['style']['left']['replace']('px','')[0x0],+aL['style']['top']['replace']('px','')[0x0],aM['width'],aM['height'])['data'],aQ=aO['getImageData'](0x0,0x0,aM['width'],aM['height']),aR=aQ['data'];for(let P=0x0;P<aM['height'];P++)aR[(aM['width']*(0.5+P)<<0x2)+0x3]=0xff;for(let O=0x0;O<aM['width'];O++)aR[(aM['width']*((aM['height']>>>0x1)-0x1)+O<<0x2)+0x3]=0xff;aO['putImageData'](aQ,0x0,0x0);aM['update']=function(){let aP=L['getImageData'](+aL['style']['left']['replace']('px','')[0x0],+aL['style']['top']['replace']('px','')[0x0],aM['width'],aM['height'])['data'],aQ=aO['getImageData'](0x0,0x0,this['width'],this['height']),aR=aQ['data'];for(let P=0x0;P<this['height'];P++){let aY=this['width']*(0.5+P)<<0x2;if(aP[aY]===0x80&&aP[aY+0x1]===0x80&&aP[aY+0x2]===0x80){aR[aY]=0x0;aR[aY+0x1]=0xe6;aR[aY+0x2]=0xe6;}else{aR[aY]=0xff^aP[aY];aR[aY+0x1]=0xff^aP[aY+0x1];aR[aY+0x2]=0xff^aP[aY+0x2];};};for(let O=0x0;O<this['width'];O++){let aY=this['width']*((this['height']>>>0x1)-0x1)+O<<0x2;if(aP[aY]===0x80&&aP[aY+0x1]===0x80&&aP[aY+0x2]===0x80){aR[aY]=0x0;aR[aY+0x1]=0xe6;aR[aY+0x2]=0xe6;}else{aR[aY]=0xff^aP[aY];aR[aY+0x1]=0xff^aP[aY+0x1];aR[aY+0x2]=0xff^aP[aY+0x2];};};aO['putImageData'](aQ,0x0,0x0);};K['addEventListener']('touchmove',()=>{if(!ac)return;ac=![];window['requestAnimationFrame'](()=>{ac=!![];aM['update']();});},![]);setInterval(()=>{let b1=0x0,b2=0x0,b3=[];if(window['location']['search']){b3=window['location']['search']['match'](B);b1=+b3[0x0];b2=+b3[0x1];};if(O!=b1||P!=b2||b3['length']===0x3&&z!==+b3[0x2]){O=b1;P=b2;if(b3['length']===0x3&&z!==+b3[0x2]){z=+b3[0x2];ds(z);};if(!T)return;if(a7){dP(z);ay['updateD']();z==0x1?bt():setTimeout(bt,0x64);}else{a8?dP(z):dP();bt();};};},0x96);}else{window['addEventListener']('mousemove',b4=>{let b5=M['innerText']['match'](B),b6=+b5[0x0],b7=+b5[0x1];if(O!=b6||P!=b7){O=b6;P=b7;G=b4['clientX'];H=b4['clientY'];if(!T)return;if(a7){dP(z);ay['updateD']();z==0x1?bt():setTimeout(bt,0x64);}else{a8?dP(z):dP();bt();};};},![]);};let b8=document['createElement']('div');b8['id']='settingsDiv';b8['style']='width:\x20'+q['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+p['settings'];b8['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+q['text']['title']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+a1+'\x22>'+a1+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(a2?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+p['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a3?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a9?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(a4?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(a6?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(a7?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(a8?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+q['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+q['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22statText\x22>'+q['text']['stat']+'</span><span\x20id\x20=\x20\x22stat\x22\x20style\x20=\x20\x22textButton\x22>'+aa['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+q['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](b8);window['addEventListener']('unload',()=>localStorage['zoomlevel']=A);(()=>{let b9=dD('infoText')['getElementsByTagName']('a');b9[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');b9[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();K['addEventListener']('click',()=>{if(N['innerText']!=0x3)return;let ba;for(let bb=0x0;bb<Z['templates']['length'];bb++){let bc=Z['templates'][bb];ba=Y[bc]['ctx']['getImageData'](O-R[bc]['x'],P-R[bc]['y'],0x1,0x1)['data'];if(ba[0x3]===0xff)break;};if(dI(C[0x0],C[0x1],C[0x2],ba[0x0],ba[0x1],ba[0x2]))setTimeout(()=>{if(N['innerText']==0x2){dD('stat')['innerText']=aa['pixels']++;localStorage['statistics']=btoa(JSON['stringify'](aa));};},0x76c);});if(y){dD('detector')['style']['cursor']='not-allowed';dD('detectorText')['style']['cursor']='not-allowed';};window['addEventListener']('keydown',bd=>{let be=bd['keyCode'];switch(be){case 0x1b:dD('settingsDiv')['style']['display']='none';break;case 0x60:case 0x30:if(localStorage['debug']=='true'){D=![];console['log']('Debug\x20is\x20off');}else{D=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=D;break;case 0x61:case 0x31:dA('factions');break;case 0x62:case 0x32:dD('settingsButton')['click']();break;case 0x63:case 0x33:dD('sectors')['click']();break;case 0x64:case 0x34:dD('detector')['click']();break;};});dD('cursorColorText')['onclick']=dD('cursorColor')['onclick']=()=>{let bf=o['indexOf'](a1)+0x1;if(bf===o['length'])bf=0x0;localStorage['cursorColor']=dD('cursorColor')['innerText']=dD('cursorColor')['style']['color']=a1=o[bf];;ds();};dD('gridText')['onclick']=dD('grid')['onclick']=()=>{at['clearRect'](0x0,0x0,aq['width'],aq['height']);dD('grid')['innerText']=(localStorage['grid']=a2=!a2)?'On':'Off';ds();};dD('mapStyleText')['onclick']=dD('mapStyle')['onclick']=()=>{localStorage['mapStyle']=p['style']=p['style']=='Old'?'New':'Old';am['style']['width']=p['width']+'px';am['style']['height']=p['height']+'px';for(let bg of am['childNodes']){bg['width']=bg['offsetWidth'];bg['height']=bg['offsetHeight'];};e0(ar,![]);e0(as,![]);a7||a8?dP(z):dP();dD('settingsDiv')['style']='width:\x20'+dD('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+dD('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+dD('settingsDiv')['style']['left']+';\x20top:\x20'+dD('settingsDiv')['style']['top']+';\x20'+p['settings'];dD('minimapbg')['style']=p['minimapbg'];dD('mapStyle')['innerText']=p['style'];ds();ab();};dD('sectorsText')['onclick']=dD('sectors')['onclick']=()=>{a3=!a3;cg();a3?ab():as['clearRect'](0x0,0x0,ap['width'],ap['height']);dD('sectors')['innerText']=a3?'On':'Off';localStorage['sectors']=a3;};dD('settingsDivCancel')['onclick']=()=>dA('settingsDiv');dD('sectorShiftText')['onclick']=dD('sectorShift')['onclick']=()=>{a5=(a4=!a4)?0.8:0x1;dD('sectorShift')['innerText']=a4?'On':'Off';localStorage['sectorShift']=a4;ab();};dD('translucentText')['onclick']=dD('translucent')['onclick']=()=>{a6=!a6;dD('translucent')['innerText']=a6?'On':'Off';dD('minimapSectors')['style']['opacity']=p['translucent'][a6];localStorage['translucent']=a6;ab();};if(!y)dD('detectorText')['onclick']=dD('detector')['onclick']=()=>{if(a7=!a7){dD('zoom-minus')['style']['cursor']=dD('zoom-plus')['style']['cursor']='not-allowed';ay['updateD']();}else dD('zoom-minus')['style']['cursor']=dD('zoom-plus')['style']['cursor']='pointer';dD('detector')['innerText']=a7?'On':'Off';localStorage['detector']=a7;dP(z);cg();bt();ds();};dD('languageText')['onclick']=dD('language')['onclick']=function(){let bh=q['availableLan']['indexOf'](q['language'])+0x1;if(bh===q['availableLan']['length'])bh=0x0;q['language']=q['availableLan'][bh];localStorage['language']=dD('language')['innerText']=q['language'];dD('settingsDiv')['style']['width']=q['width'];for(let bi in q['text']){let bj=dD(bi+'Text');if(bj)bj['innerHTML']=q['text'][bi];};let bk=dD('infoText')['getElementsByTagName']('a');bk[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bk[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};dD('syncText')['onclick']=dD('sync')['onclick']=()=>{(a8=!a8)?dP(z):dP();localStorage['sync']=a8;dD('sync')['innerText']=a8?'On':'Off';cg();bt();ds();};dD('expSectorsText')['onclick']=dD('expSectors')['onclick']=()=>{a9=!a9;dD('expSectors')['innerText']=a9?'On':'Off';localStorage['expSectors']=a9;!a9&&as['clearRect'](0x0,0x0,ao['width'],ao['height']);cg();ab();};function bl(){let bm=''+I[J]['data']+(I[J]['type']==0x1?'?'+new Date()['getTime']():'');D&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+J+'\x0aURL\x20:\x20'+bm);Q={};R={};S={};Y={};let bn=new XMLHttpRequest();bn['onloadend']=function(){if(this['status']==0xc8){Q=JSON['parse'](this['responseText']);for(let bo in Q){Q[bo]['x']*=0x1;Q[bo]['y']*=0x1;Q[bo]['type']==='grid'?S[bo]=Q[bo]:R[bo]=Q[bo];};for(let bp of Z['templates'])bw(bp,()=>D&&console['log']('Img\x20updated'));for(let bq of Z['grids'])bw(bq,()=>D&&console['log']('Grid\x20updated'));D&&console['log']('Update\x20completed',Q,R,S);}else console['error']('Error\x20:\x20'+I[J]['data']+'\x0aStatus\x20:\x20'+this['status']);};bn['open']('GET',bm);bn['send']();};function br(){if(!V||a7)return;if(a8){localStorage['sync']=a8=![];A=z;dD('sync')['innerText']=a8?'On':'Off';cg();};A*=1.1;if(A>0x20){A=0x20;return;};a7?ay['updateD']():a8?dP(z):dP();ds();ab();setTimeout(br,X);};function bs(){if(!W||a7)return;if(a8){localStorage['sync']=a8=![];A=z;dD('sync')['innerText']=a8?'On':'Off';cg();};A/=1.1;if(A<0x1){A=0x1;return;};a7?ay['updateD']():a8?dP(z):dP();ds();bt();setTimeout(bs,X);};function bt(){if(!T||!R)return;Z['grids']=[];Z['templates']=[];for(let bu in R)if(O['between'](R[bu]['x']-w,R[bu]['x']+R[bu]['width']+w)&&P['between'](R[bu]['y']-x,R[bu]['y']+R[bu]['height']+x))if(Y[bu])Z['templates'][Z['templates']['length']]=bu;else{bw(bu);delete R[bu];};if(a3)for(let bv in S)if(O['between'](S[bv]['x']-w,S[bv]['x']+S[bv]['width']+w)&&P['between'](S[bv]['y']-x,S[bv]['y']+S[bv]['height']+x))if(Y[bv])Z['grids'][Z['grids']['length']]=bv;else{bw(bv);delete S[bv];};if(Z['grids']['length']===0x0&&Z['templates']['length']===0x0){if(U&&!V&&!W){U=![];am['style']['display']='none';al['style']['display']='block';al['innerText']='There\x27s\x20nothing\x20here';};}else{if(!U){U=!![];am['style']['display']='block';al['style']['display']='none';};if(ad){ad=![];window['requestAnimationFrame'](()=>{ab();ad=!![];});};};};function bw(bx,by){let bz=new Image(),bA=0x0;bz['crossOrigin']='';bz['src']=''+I[J]['images']+bx+'.png';bz['onerror']=()=>{console['log']('Download\x20failed\x0asrc\x20:\x20'+bz['src']+'\x0aName\x20:\x20'+bx);if(Q[bx]['type']==='grid')delete S[bx];else delete R[bx];delete Q[bx];delete Y[bx];};bz['onload']=()=>{const bB=0x100;let bC=document['createElement']('canvas'),bD=bC['getContext']('2d'),bE=bz['width'],bF=bz['height'];bC['width']=bE;bC['height']=bF;bD['drawImage'](bz,0x0,0x0,bE,bF);let bG=bD['getImageData'](0x0,0x0,bE,bF),bH=bG['data'];if(!I[J]['chunks']||y||bz['width']<=bB*1.5&&bz['height']<=bB*1.5){Y[bx]=bC;Y[bx]['ctx']=bD;Q[bx]['type']==='grid'?S[bx]=Q[bx]:R[bx]=Q[bx];D&&console['log'](Q,'\x0aName\x20:\x20'+bx+'\x0aType\x20:\x20'+(Q[bx]['type']==='grid'?'grid':'image'));if(by)by();bt();return;};let bI=performance['now']();for(let P=0x0,bK=bB>>0x1;bF-P>bK;P+=bB)for(let O=0x0;bE-O>bK;O+=bB){const bM=bx+'_#_'+O/bB+'_'+P/bB,bN=bE-O>=bB?bB:bE-O,bO=bF-P>=bB?bB:bF-P,bP=bN<<0x2,bQ=bP*bO;let bR=new Uint8ClampedArray(bQ),bS=0x0,bT=0x0,bU=null,bV=0x0;for(let bW=0x0,bX=bE<<0x2,bY=bE*P+O<<0x2,bZ=0x0,c0,bK;bW!==bO;bW+=0x1){c0=bY+bW*bX;bK=bZ+bP;while(bZ!==bK){bR[bZ]=bH[c0];bZ+=0x1;c0+=0x1;};};for(let c2=0x3;c2<bQ;c2+=0x4)if(bR[c2]!==0x0){bU=~~((c2+0x1)/bP);break;};if(bU===null)continue;for(let c3=bQ-0x1,bK=bU*bP;c3>bK;c3-=0x4)if(bR[c3]!==0x0){bV=(c3+0x1)/bP;bV=bO-(~~bV===bV?bV:~~bV+0x1);break;};c5:for(let O=0x3,c7=bU*bP,bK=(bN-bV)*bP;O<bP;O+=0x4)for(let bZ=O+c7;bZ<bK;bZ+=bP)if(bR[bZ]!==0x0){bS=O>>>0x2;break c5;};ca:for(let O=bP-0x1,cc=bU*bP,bK=(bN-bV)*bP,ce=bS<<0x2;O>ce;O-=0x4)for(let bZ=O+cc;bZ<bK;bZ+=bP)if(bR[bZ]!==0x0){bT=bN-(O+0x1>>>0x2);break ca;};Q[bM]={'x':Q[bx]['x']+O,'y':Q[bx]['y']+P};Y[bM]=document['createElement']('canvas');Y[bM]['ctx']=Y[bM]['getContext']('2d');if(bU||bV||bS||bT){Q[bM]['width']=Y[bM]['width']=bN-bS-bT;Q[bM]['height']=Y[bM]['height']=bO-bU-bV;Y[bM]['ctx']['drawImage'](bC,O+bS,P+bU,Y[bM]['width'],Y[bM]['height'],0x0,0x0,Y[bM]['width'],Y[bM]['height']);Q[bM]['x']+=bS;Q[bM]['y']+=bU;}else{Q[bM]['width']=Y[bM]['width']=bN;Q[bM]['height']=Y[bM]['height']=bO;Y[bM]['ctx']['drawImage'](bC,O,P,Y[bM]['width'],Y[bM]['height'],0x0,0x0,Y[bM]['width'],Y[bM]['height']);};Q[bx]['type']==='grid'?S[bM]=Q[bM]:R[bM]=Q[bM];bA+=0x1;};D&&console['log'](Q,'\x0aName\x20:\x20'+bx+'\x0aType\x20:\x20'+(Q[bx]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+bA+'\x0aTime\x20:\x20'+(performance['now']()-bI));delete Q[bx];delete Y[bx];bC=null;bD=null;bG=null;bH=null;if(by)by();bt();};};function cg(){if(a7){if(a3||a9)ab=()=>{db();ck(z);};else ab=db;}else if(a8){if(a3||a9)ab=()=>{ch(z);ck(z);};else ab=()=>ch(z);}else{if(a3||a9)ab=()=>{ch();ck();};else ab=ch;};};function ch(ci=A){ar['clearRect'](0x0,0x0,ao['width'],ao['height']);for(let cj of Z['templates'])ar['drawImage'](Y[cj],~~((R[cj]['x']-E)*ci),~~((R[cj]['y']-F)*ci),~~(Y[cj]['width']*ci),~~(Y[cj]['height']*ci));};function ck(cl=A){if(a9){cq(cl);return;};as['clearRect'](0x0,0x0,ap['width'],ap['height']);let cm,cn,co=cl*a5;if(a7){cm=(ay['xLeft']-O)/a5+O;cn=(ay['yTop']-P)/a5+P;}else{cm=(E-O)/a5+O;cn=(F-P)/a5+P;};for(let cp of Z['grids'])as['drawImage'](Y[cp],~~((S[cp]['x']-cm)*co),~~((S[cp]['y']-cn)*co),~~(Y[cp]['width']*co),~~(Y[cp]['height']*co));};function cq(cr=A){as['clearRect'](0x0,0x0,ap['width'],ap['height']);const cs=0x1e;function ct(O,P,cw,cx,cy){as['strokeStyle']='rgb('+cy+')';as['beginPath']();as['moveTo'](O,P);as['lineTo'](cw,cx);as['stroke']();};function cz(O,cB){return~~(O*0xff/cB);};function cC(O,cE,cF){return O>cF||O<cE?0x0:O-cE;};as['lineWidth']=~~(cr/0x3);as['strokeStyle']='rgb(20,20,20)';let cG=(cs-E%cs)*cr,cH=(cs-F%cs)*cr,cI=cs*cr,cJ=cs/0x2,cK=ao['width']+cr,cL=ao['height']+cr,cM=ay['hWidth']%cr-cr,cN=ay['hHeight']%cr-cr,cO=cG+(cr-cM),cP=cH+(cr-cN),cQ=(~~(E/cs)+0x1)*cs,cR=(~~(F/cs)+0x1)*cs;const cS=0x190,cT=cS/0x3,cU=cT<<0x1;for(let cV=cO,O=cQ,cX=cN+cL,cY=dY(O%cS),cZ=cV+cM;cV<cK;cV+=cI,O+=cs,cY=dY(O%cS),cZ+=cI)ct(cZ,cN,cZ,cX,[cz(cC(cY,0x0,cT),cT),cz(cC(cY,cT,cU),cT),cz(cC(cY,cU,cS),cT)]);for(let d0=cP,P=cR,d2=cM+cK,d3=dY(P%cS),d4=d0+cN;d0<cL;d0+=cI,P+=cs,d3=dY(P%cS),d4+=cI)ct(cM,d4,d2,d4,[cz(cC(d3,0x0,cT),cT),cz(cC(d3,cT,cU),cT),cz(cC(d3,cU,cS),cT)]);if(cr>0x2)return;as['strokeStyle']='rgb(255,255,255)';as['fillStyle']='rgb(20,20,20)';as['font']=~~(cs*cr/0x3)+'px\x20fantasy';as['textBaseline']='top';for(let d5=cO,O=cQ,d7=cN+cL;d5<cK;d5+=cI,O+=cs)as['strokeText'](O,d5,0x0),as['fillText'](O,d5,0x0);for(let d8=cP,P=cR,da=cM+cK;d8<cL;d8+=cI,P+=cs)as['strokeText'](P,0x0,d8),as['fillText'](P,0x0,d8);};function db(dc=z){let dd=0x0,de=0x0;for(let df=dc*dc;df>0x1;df>>>=0x1)de++;dd=de>>>0x1;a0['canvas']['width']=ay['width'];a0['canvas']['height']=ay['height'];let dg,dh;if(Z['templates']['length']===0x1){let di=Z['templates'][0x0];dg=Y[di]['ctx']['getImageData'](ay['xLeft']-R[di]['x']-0x1,ay['yTop']-R[di]['y']-0x1,ay['width'],ay['height']);dh=dg['data'];}else{for(let dj of Z['templates'])a0['ctx']['drawImage'](Y[dj],ay['xLeft']-R[dj]['x']-0x1,ay['yTop']-R[dj]['y']-0x1,ay['width'],ay['height'],0x0,0x0,ay['width'],ay['height']);dg=a0['ctx']['getImageData'](0x0,0x0,a0['canvas']['width'],a0['canvas']['height']);dh=dg['data'];};let dk=L['getImageData'](~~(G-(ay['width']<<dd>>>0x1)),~~(H-(ay['height']<<dd>>>0x1)),~~(ay['width']*dc),~~(ay['height']*dc))['data'],dl=0x0,dm=z<<0x2;for(let dn=0x0;dn<ay['sizeRGBA'];dn+=ay['widthRGBA']){dl=dn<<de;let dp=dn,dq=dl,dr=dn+ay['widthRGBA'];while(dp<dr){dp+=0x4;if(dk[(dq+=dm)+0x3]===0x0)continue;if(dI(dh[dp],dh[dp+0x1],dh[dp+0x2],dk[dq],dk[dq+0x1],dk[dq+0x2]))dh[dp]=dh[dp+0x1]=dh[dp+0x2]=~~((dh[dp]+dh[dp+0x1]+dh[dp+0x2])/0x3);else dh[dp]=0xff,dh[dp+0x1]=dh[dp+0x2]=0x0;};};if(z===0x1){ar['putImageData'](dg,0x0,0x0);}else{a0['ctx']['putImageData'](dg,0x0,0x0);ar['clearRect'](0x0,0x0,ao['width'],ao['height']);ar['drawImage'](a0['canvas'],~~(ay['borderW']-dc),~~(ay['borderH']-dc),~~(ay['width']*dc),~~(ay['height']*dc));};dk=null;};function ds(dt=A){at['clearRect'](0x0,0x0,aq['width'],aq['height']);if(a7||a8)dt=z;if(dt<=0x2)return;if(a2&&dt>4.6){at['beginPath']();let du=ao['width']+dt,dv=ao['height']+dt,dw=(ao['width']>>>0x1)%dt-dt,dx=(ao['height']>>>0x1)%dt-dt;at['lineWidth']=0x1;for(let O=0x0;O<=du;O+=dt){at['moveTo'](O+dw,dx);at['lineTo'](O+dw,dv+dx);};for(let P=0x0;P<=dv;P+=dt){at['moveTo'](dw,P+dx);at['lineTo'](du+dw,P+dx);};at['strokeStyle']='rgb(20,20,20)';at['stroke']();};at['beginPath']();at['lineWidth']=dt/0x3;at['strokeStyle']=a1;at['rect'](ao['width']>>>0x1,ao['height']>>>0x1,dt,dt);at['stroke']();};function dA(dB){if(typeof dB==='string'){let dC=document['getElementById'](dB);dC['style']['display']=dC['style']['display']==='none'?'block':'none';}else if(typeof dB==='object')dB['style']['display']=dB['style']['display']==='none'?'block':'none';};function dD(dE){return document['getElementById'](dE);};function dF(dG){let dH;dG=dG||window['event'];if(dG['wheelDelta']){dH=dG['wheelDelta']/0x78;if(window['opera'])dH=~dH+0x1;}else if(dG['detail'])dH=-dG['detail']/0x3;dH==0x1?z<<=0x1:z>>>=0x1;if(z>0x40)z=0x40;else if(z<0x1)z=0x1;else if(a7){setTimeout(()=>{ay['updateD']();dP(z);db();a3&&ck(z);ds();},0xc8);}else if(a8){dP(z);ds();bt();};};function dI(dJ,dK,dL,dM,dN,dO){return(dJ>dM?dJ-dM:dM-dJ)<0x1e&&(dK>dN?dK-dN:dN-dK)<0x1e&&(dL>dO?dL-dO:dO-dL)<0x1e;};function dP(dQ=A){w=(E=ao['width']>>>0x1)/dQ;x=(F=ao['height']>>>0x1)/dQ;E=O-E/dQ;F=P-F/dQ;};function dR(dS,O,P){if(O<0x0||P<0x0)return;K['dispatchEvent'](new MouseEvent(dS,{'clientX':O,'clientY':P,'bubbles':!![]}));};function dV(dW,dX){return Math['round'](dW-0.5+Math['random']()*(dX-dW+0x1));};function dY(O){return O>0x0?O:-O;};function e0(e1,e2){e1['mozImageSmoothingEnabled']=e1['webkitImageSmoothingEnabled']=e1['msImageSmoothingEnabled']=e1['imageSmoothingEnabled']=e2;};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote')&&document['getElementById']('colorSampleSelector');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let e3=document['createElement']('script');e3['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](e3);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
