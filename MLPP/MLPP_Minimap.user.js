// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.9.4
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';//PZ CHANGES
(function specialFirst(){let c=dI('timer');if(c)c['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){let d=dI('message');if(d)d['remove']();else setTimeout(specialSecond,0x14d);}());let e=document['createElement']('link');e['rel']='stylesheet';e['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](e);let f=document['createElement']('div');f['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](f);dI('settingsButton')['addEventListener']('click',()=>{let g=dI('settingsDiv');dF(g);if(g['style']['display']==='block'){g['style']['left']=(window['innerWidth']-g['offsetWidth']>>>0x1)+'px';g['style']['top']=(window['innerHeight']-g['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(h,i){return this>h&&this<i;};window['testPerformance']=()=>{console['log']('Start\x20testing');let j=null,k=!![],l=L['width']>>>0x1,m=L['height']>>>0x1;setTimeout(()=>clearInterval(j),0x1770);j=setInterval(()=>{if(k)k=![],dW('mousemove',l+e0(0x0,l>>>0x1),m+e0(0x0,m>>>0x1));else k=!![],dW('mousemove',l-e0(0x0,l>>>0x1),m-e0(0x0,m>>>0x1));},0x32);};const n='2.6.9.4',o=0x20,p=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],q={'init':function(){this['style']=this['style'];},get 'style'(){return this['_style'];},set 'style'(s){if(this['availableStyles']['includes'](s))this['_style']=s;else console['warn']('Style\x20is\x20missing'),this['_style']='New';let t='_'+this['_style'];for(let u of['width','height','settings','minimapbg'])this[u]=this[t][u];},'_style':'New','availableStyles':['New','Old'],'_New':{'width':0x118,'height':0xc8,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'_Old':{'width':0x1a4,'height':0x12c,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;'},'settings':{},'minimapbg':{},'width':{},'height':{},'translucent':{'false':0x1,'true':0.5}},r={'init':function(){this['language']=this['language'];},'availableLan':['ru','en'],get 'language'(){return this['_language'];},set 'language'(v){if(this['availableLan']['includes'](v))this['_language']=v;else console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist'),this['_language']='en';let w='_'+this['_language'];this['width']=this[w]['width'];this['text']=this[w]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'stat':'Поставленные\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'stat':'Set\x20pixels:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};q['init']();r['init']();let x=null,y=null,z=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),A=0x1,B=0x5,C=new RegExp(/-?\d+/g),D=dI('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](C),E=!!void'Child\x20of\x20starfall',F=void'Luna,\x20child\x20of\x20starfall',G=void'Sunder\x20the\x20daylight',H=void'Open\x20my\x20heart',I=void'Let\x20me\x20bleed\x20thin',J={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2}},K='New\x20Lunar\x20Republic',L=dI('canvas'),M=L['getContext']('2d'),N=dI('coordinatesNote'),O=dI('timer'),P=0x0,Q=0x0,R,S,T,U=!![],V=!![],W=![],X=![],Y=0x32,Z=[],a0={'grids':[],'templates':[]},a1={'canvas':document['createElement']('canvas'),'ctx':void 0x0},a2='springGreen',a3=![],a4=![],a5=![],a6=0x1,a7=![],a8=![],a9=![],aa=![],ab={'pixels':0x0},ac,ad=!![],ae=!![];if(window['location']['href']['match'](C)&&window['location']['href']['match'](C)['length']==0x3)A=+window['location']['href']['match'](C)[0x2];else A=0x1;a1['ctx']=a1['canvas']['getContext']('2d');if(L['addEventListener'])L['addEventListener']('mousewheel',dK,![]);else if(L['attachEvent'])L['attachEvent']('onmousewheel',dK);if(!z&&/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',af=>{af['wheelDelta']==0x3?A<<=0x1:A>>>=0x1;if(A>0x40)A=0x40;else if(A<0x1)A=0x1;else if(a9&&!a8){dU(A);dv();bs();}else if(a8){dU(A);az['updateD']();setTimeout(()=>{de();},0xc8);dv();if(a4)cj();};});}catch(ag){};if(localStorage['cursorColor']&&p['includes'](localStorage['cursorColor']))a2=localStorage['cursorColor'];E=localStorage['debug']=='true';a3=localStorage['grid']=='true';if(localStorage['mapStyle']=='Old')q['style']='Old';a4=localStorage['sectors']=='true';if(localStorage['sectorShift']=='true'){a5=!![];a6=0.8;};a7=localStorage['translucent']=='true';if(localStorage['mobile'])z=localStorage['mobile'];if(localStorage['detector']=='true'){if(z){localStorage['detector']=![];a8=![];}else a8=!![];};a9=localStorage['sync']=='true';if(localStorage['zoomlevel'])B=+localStorage['zoomlevel'];else localStorage['zoomlevel']=B;if(localStorage['language'])r['language']=localStorage['language'];else localStorage['language']=r['language'];if(localStorage['statistics'])try{ab=JSON['parse'](atob(localStorage['statistics']));}catch(ah){localStorage['statistics']=btoa(JSON['stringify'](ab));}else localStorage['statistics']=btoa(JSON['stringify'](ab));aa=localStorage['expSectors']==='true';cf();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+n);for(let ai of document['getElementsByClassName']('palette-color-box'))ai['addEventListener']('click',()=>{D=ai['style']['backgroundColor']['match'](C);D[0x0]*=0x1;D[0x1]*=0x1;D[0x2]*=0x1;});let aj='';for(let ak in J)aj+='<li\x20id=\x22'+ak+'\x22><span\x20style=\x22cursor:pointer;color:'+J[ak]['color']+'\x22>'+ak+'<span></li>';let al=document['createElement']('div');al['id']='minimapbg';al['style']=q['minimapbg'];al['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+q['width']+'px;height:'+q['height']+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+q['translucent'][a7]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](al);let am=dI('minimap-text'),an=dI('minimap-box'),ao=dI('minimap-config');let ap=dI('minimap'),aq=dI('minimapSectors'),ar=dI('minimapCover'),as=ap['getContext']('2d'),at=aq['getContext']('2d'),au=ar['getContext']('2d');for(let av of an['childNodes']){av['width']=av['offsetWidth'];av['height']=av['offsetHeight'];};e5(as,![]);e5(at,![]);setTimeout(()=>{for(let aw=0x0,ax=0x0,aj=document['getElementsByTagName']('canvas');aw<aj['length'];aw++){if(aj[aw]['id']=='minimap')ax++;if(ax>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let az={'updateM':function(){this['hWidth']=ap['width']>>>0x1;this['hHeight']=ap['height']>>>0x1;},'updateD':function(){this['width']=ap['width']/A&0x7fe;this['height']=ap['height']/A&0x7fe;this['borderW']=ap['width']-this['width']*A>>>0x1;this['borderH']=ap['height']-this['height']*A>>>0x1;this['xLeft']=P-(this['width']>>>0x1);this['yTop']=Q-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};az['updateM']();az['updateD']();let aA=new XMLHttpRequest(),aB='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';aA['onloadend']=function(){if(this['status']==0xc8){try{let aC=document['createElement']('script');aC['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](aC);}catch(aD){};J=JSON['parse'](this['responseText']);for(let K in J){K=J[K];if(K['chunks']&&(K['chunks']=='true'||+K['chunks']==0x1))K['chunks']=!![];};if(E){console['log']('Factions\x20:');console['log'](J);};K=localStorage['faction']||Object['keys'](J)[0x0];bk();let aF='';for(let aG in J)aF+='<li\x20id=\x22'+aG+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:normal;\x20color:'+J[aG]['color']+'\x22>'+aG+'<span></li>';dI('listF')['innerHTML']=aF;for(let aH in J)dI(aH)['onclick']=function(){dF('factions');dI(K)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=K=this['id'];bk();};dI(K)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+aB+'\x0aStatus\x20:\x20'+this['status']);aA=null;};aA['open']('GET',aB);aA['send']();dv();dI('hide-map')['onclick']=()=>{U=![];an['style']['display']='none';ao['style']['display']='none';am['style']['display']='block';am['innerText']='Minimap';am['style']['cursor']='pointer';};am['onclick']=()=>{U=!![];an['style']['display']='block';ao['style']['display']='block';am['style']['display']='none';am['style']['cursor']='default';bs();};dI('zoom-plus')['addEventListener'](z?'touchstart':'mousedown',aI=>{aI['preventDefault']();W=!![];X=![];bq();},![]);dI('zoom-plus')['addEventListener'](z?'touchend':'mouseup',()=>W=![],![]);dI('zoom-minus')['addEventListener'](z?'touchstart':'mousedown',aJ=>{aJ['preventDefault']();X=!![];W=![];br();},![]);dI('zoom-minus')['addEventListener'](z?'touchend':'mouseup',()=>X=![],![]);if(z){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');ao['style']['lineHeight']='27px';let aK=document['createElement']('div'),aL=document['createElement']('canvas');aL['height']=aL['width']=0x15;aL['left']=(window['innerWidth']+aL['width'])/0x2;aL['top']=(window['innerHeight']+aL['height'])/0x2;let aM=aL['getContext']('2d');aM['strokeStyle']='white';aK['style']='position:\x20absolute;\x20top:\x20'+aL['top']+'px;\x20left:\x20'+aL['left']+'px;';aK['appendChild'](aL);document['body']['appendChild'](aK);let aN=aL['getContext']('2d'),aO=L['getContext']('2d')['getImageData'](aL['left'],aL['top'],aL['width'],aL['height'])['data'],aP=aN['getImageData'](0x0,0x0,aL['width'],aL['height']),aQ=aP['data'];for(let Q=0x0;Q<aL['height'];Q++)aQ[(aL['width']*(0.5+Q)<<0x2)+0x3]=0xff;for(let P=0x0;P<aL['width'];P++)aQ[(aL['width']*((aL['height']>>>0x1)-0x1)+P<<0x2)+0x3]=0xff;aN['putImageData'](aP,0x0,0x0);aL['update']=function(){let aO=M['getImageData'](this['left'],this['top'],aL['width'],aL['height'])['data'],aP=aN['getImageData'](0x0,0x0,this['width'],this['height']),aQ=aP['data'];for(let Q=0x0;Q<this['height'];Q++){let aX=this['width']*(0.5+Q)<<0x2;if(aO[aX]===0x80&&aO[aX+0x1]===0x80&&aO[aX+0x2]===0x80){aQ[aX]=0x0;aQ[aX+0x1]=0xe6;aQ[aX+0x2]=0xe6;}else{aQ[aX]=0xff^aO[aX];aQ[aX+0x1]=0xff^aO[aX+0x1];aQ[aX+0x2]=0xff^aO[aX+0x2];};};for(let P=0x0;P<this['width'];P++){let aX=this['width']*((this['height']>>>0x1)-0x1)+P<<0x2;if(aO[aX]===0x80&&aO[aX+0x1]===0x80&&aO[aX+0x2]===0x80){aQ[aX]=0x0;aQ[aX+0x1]=0xe6;aQ[aX+0x2]=0xe6;}else{aQ[aX]=0xff^aO[aX];aQ[aX+0x1]=0xff^aO[aX+0x1];aQ[aX+0x2]=0xff^aO[aX+0x2];};};aN['putImageData'](aP,0x0,0x0);};L['addEventListener']('touchmove',()=>{if(!ad)return;ad=![];window['requestAnimationFrame'](()=>{ad=!![];aL['update']();});},![]);setInterval(()=>{let b0=0x0,b1=0x0,b2=[];if(window['location']['search']){b2=window['location']['search']['match'](C);b0=+b2[0x0];b1=+b2[0x1];};if(P!=b0||Q!=b1||b2['length']===0x3&&A!==+b2[0x2]){P=b0;Q=b1;if(b2['length']===0x3&&A!==+b2[0x2]){A=+b2[0x2];(a9||a8)&&dv();};if(!U)return;if(a8){dU(A);az['updateD']();A==0x1?bs():setTimeout(bs,0x64);}else{a9?dU(A):dU();bs();};};},0x96);}else{window['addEventListener']('mousemove',b3=>{let b4=N['innerText']['match'](C),b5=+b4[0x0],b6=+b4[0x1];if(P!=b5||Q!=b6){P=b5;Q=b6;H=b3['clientX'];I=b3['clientY'];if(!U)return;if(a8){dU(A);az['updateD']();A==0x1?bs():setTimeout(bs,0x64);}else{a9?dU(A):dU();bs();};};},![]);};let b7=document['createElement']('div');b7['id']='settingsDiv';b7['style']='width:\x20'+r['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+q['settings'];b7['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+r['text']['title']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+a2+'\x22>'+a2+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(a3?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+q['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a4?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(aa?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(a5?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(a7?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(a8?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(a9?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+r['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22statText\x22>'+r['text']['stat']+'</span><span\x20id\x20=\x20\x22stat\x22\x20style\x20=\x20\x22textButton\x22>'+ab['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+r['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](b7);window['addEventListener']('unload',()=>localStorage['zoomlevel']=B);(()=>{let b8=dI('infoText')['getElementsByTagName']('a');b8[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');b8[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();L['addEventListener'](z?'touchend':'click',()=>{if(O['innerText']!=0x3)return;let b9;for(let ba=0x0;ba<a0['templates']['length'];ba++){let bb=a0['templates'][ba];b9=Z[bb]['ctx']['getImageData'](P-S[bb]['x'],Q-S[bb]['y'],0x1,0x1)['data'];if(b9[0x3]===0xff)break;};if(dN(D[0x0],D[0x1],D[0x2],b9[0x0],b9[0x1],b9[0x2]))setTimeout(()=>{if(O['innerText']==0x2){dI('stat')['innerText']=ab['pixels']++;localStorage['statistics']=btoa(JSON['stringify'](ab));};},0x76c);});if(z){dI('detector')['style']['cursor']='not-allowed';dI('detectorText')['style']['cursor']='not-allowed';};if(!z)window['addEventListener']('keydown',bc=>{let bd=bc['keyCode'];switch(bd){case 0x1b:dI('settingsDiv')['style']['display']='none';break;case 0x60:case 0x30:if(E){E=![];console['log']('Debug\x20is\x20off');}else{E=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=E;break;case 0x61:case 0x31:dF('factions');break;case 0x62:case 0x32:dI('settingsButton')['click']();break;case 0x63:case 0x33:dI('sectors')['click']();break;case 0x64:case 0x34:dI('detector')['click']();break;};});dI('cursorColorText')['onclick']=dI('cursorColor')['onclick']=()=>{let be=p['indexOf'](a2)+0x1;if(be===p['length'])be=0x0;localStorage['cursorColor']=dI('cursorColor')['innerText']=dI('cursorColor')['style']['color']=a2=p[be];;dv();};dI('gridText')['onclick']=dI('grid')['onclick']=()=>{au['clearRect'](0x0,0x0,ar['width'],ar['height']);dI('grid')['innerText']=(localStorage['grid']=a3=!a3)?'On':'Off';dv();};dI('mapStyleText')['onclick']=dI('mapStyle')['onclick']=()=>{localStorage['mapStyle']=q['style']=q['style']=='Old'?'New':'Old';an['style']['width']=q['width']+'px';an['style']['height']=q['height']+'px';for(let bf of an['childNodes']){bf['width']=bf['offsetWidth'];bf['height']=bf['offsetHeight'];};e5(as,![]);e5(at,![]);a8||a9?dU(A):dU();dI('settingsDiv')['style']='width:\x20'+dI('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+dI('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+dI('settingsDiv')['style']['left']+';\x20top:\x20'+dI('settingsDiv')['style']['top']+';\x20'+q['settings'];dI('minimapbg')['style']=q['minimapbg'];dI('mapStyle')['innerText']=q['style'];dv();ac();};dI('sectorsText')['onclick']=dI('sectors')['onclick']=()=>{a4=!a4;cf();a4?ac():at['clearRect'](0x0,0x0,aq['width'],aq['height']);dI('sectors')['innerText']=a4?'On':'Off';localStorage['sectors']=a4;};dI('settingsDivCancel')['onclick']=()=>dF('settingsDiv');dI('sectorShiftText')['onclick']=dI('sectorShift')['onclick']=()=>{a6=(a5=!a5)?0.8:0x1;dI('sectorShift')['innerText']=a5?'On':'Off';localStorage['sectorShift']=a5;ac();};dI('translucentText')['onclick']=dI('translucent')['onclick']=()=>{a7=!a7;dI('translucent')['innerText']=a7?'On':'Off';dI('minimapSectors')['style']['opacity']=q['translucent'][a7];localStorage['translucent']=a7;ac();};if(!z)dI('detectorText')['onclick']=dI('detector')['onclick']=()=>{if(a8=!a8){dI('zoom-minus')['style']['cursor']=dI('zoom-plus')['style']['cursor']='not-allowed';az['updateD']();}else dI('zoom-minus')['style']['cursor']=dI('zoom-plus')['style']['cursor']='pointer';dI('detector')['innerText']=a8?'On':'Off';localStorage['detector']=a8;dU(A);cf();bs();dv();};dI('languageText')['onclick']=dI('language')['onclick']=function(){let bg=r['availableLan']['indexOf'](r['language'])+0x1;if(bg===r['availableLan']['length'])bg=0x0;r['language']=r['availableLan'][bg];localStorage['language']=dI('language')['innerText']=r['language'];dI('settingsDiv')['style']['width']=r['width'];for(let bh in r['text']){let bi=dI(bh+'Text');if(bi)bi['innerHTML']=r['text'][bh];};let bj=dI('infoText')['getElementsByTagName']('a');bj[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bj[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};dI('syncText')['onclick']=dI('sync')['onclick']=()=>{(a9=!a9)?dU(A):dU();localStorage['sync']=a9;dI('sync')['innerText']=a9?'On':'Off';cf();bs();dv();};dI('expSectorsText')['onclick']=dI('expSectors')['onclick']=()=>{aa=!aa;dI('expSectors')['innerText']=aa?'On':'Off';localStorage['expSectors']=aa;!aa&&at['clearRect'](0x0,0x0,ap['width'],ap['height']);cf();ac();};function bk(){let bl=''+J[K]['data']+(J[K]['type']==0x1?'?'+new Date()['getTime']():'');E&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+K+'\x0aURL\x20:\x20'+bl);R={};S={};T={};Z={};let bm=new XMLHttpRequest();bm['onloadend']=function(){if(this['status']==0xc8){R=JSON['parse'](this['responseText']);for(let bn in R){R[bn]['x']*=0x1;R[bn]['y']*=0x1;R[bn]['type']==='grid'?T[bn]=R[bn]:S[bn]=R[bn];};for(let bo of a0['templates'])bv(bo,()=>E&&console['log']('Img\x20updated'));for(let bp of a0['grids'])bv(bp,()=>E&&console['log']('Grid\x20updated'));E&&console['log']('Update\x20completed',R,S,T);}else console['error']('Error\x20:\x20'+J[K]['data']+'\x0aStatus\x20:\x20'+this['status']);};bm['open']('GET',bl);bm['send']();};function bq(){if(!W||a8)return;if(a9){localStorage['sync']=a9=![];B=A;dI('sync')['innerText']=a9?'On':'Off';cf();};B*=1.1;if(B>0x20){B=0x20;return;};a8?az['updateD']():a9?dU(A):dU();dv();ac();setTimeout(bq,Y);};function br(){if(!X||a8)return;if(a9){localStorage['sync']=a9=![];B=A;dI('sync')['innerText']=a9?'On':'Off';cf();};B/=1.1;if(B<0x1){B=0x1;return;};a8?az['updateD']():a9?dU(A):dU();dv();bs();setTimeout(br,Y);};function bs(){if(!U||!S)return;a0['grids']=[];a0['templates']=[];for(let bt in S)if(P['between'](S[bt]['x']-x,S[bt]['x']+S[bt]['width']+x)&&Q['between'](S[bt]['y']-y,S[bt]['y']+S[bt]['height']+y))if(Z[bt])a0['templates'][a0['templates']['length']]=bt;else{bv(bt);delete S[bt];};if(a4)for(let bu in T)if(P['between'](T[bu]['x']-x,T[bu]['x']+T[bu]['width']+x)&&Q['between'](T[bu]['y']-y,T[bu]['y']+T[bu]['height']+y))if(Z[bu])a0['grids'][a0['grids']['length']]=bu;else{bv(bu);delete T[bu];};if(a0['grids']['length']===0x0&&a0['templates']['length']===0x0){if(V&&!W&&!X){V=![];an['style']['display']='none';am['style']['display']='block';am['innerText']='There\x27s\x20nothing\x20here';};}else{if(!V){V=!![];an['style']['display']='block';am['style']['display']='none';};if(ae){ae=![];window['requestAnimationFrame'](()=>{ac();ae=!![];});};};};function bv(bw,bx){let by=new Image(),bz=0x0;by['crossOrigin']='';by['src']=''+J[K]['images']+bw+'.png';by['onerror']=()=>{console['log']('Download\x20failed\x0asrc\x20:\x20'+by['src']+'\x0aName\x20:\x20'+bw);if(R[bw]['type']==='grid')delete T[bw];else delete S[bw];delete R[bw];delete Z[bw];};by['onload']=()=>{const bA=0x100;let bB=document['createElement']('canvas'),bC=bB['getContext']('2d'),bD=by['width'],bE=by['height'];bB['width']=bD;bB['height']=bE;bC['drawImage'](by,0x0,0x0,bD,bE);let bF=bC['getImageData'](0x0,0x0,bD,bE),bG=bF['data'];if(!J[K]['chunks']||z||by['width']<=bA*1.5&&by['height']<=bA*1.5){Z[bw]=bB;Z[bw]['ctx']=bC;R[bw]['type']==='grid'?T[bw]=R[bw]:S[bw]=R[bw];E&&console['log'](R,'\x0aName\x20:\x20'+bw+'\x0aType\x20:\x20'+(R[bw]['type']==='grid'?'grid':'image'));if(bx)bx();bs();return;};let bH=performance['now']();for(let Q=0x0,bJ=bA>>0x1;bE-Q>bJ;Q+=bA)for(let P=0x0;bD-P>bJ;P+=bA){const bL=bw+'_#_'+P/bA+'_'+Q/bA,bM=bD-P>=bA?bA:bD-P,bN=bE-Q>=bA?bA:bE-Q,bO=bM<<0x2,bP=bO*bN;let bQ=new Uint8ClampedArray(bP),bR=0x0,bS=0x0,bT=null,bU=0x0;for(let bV=0x0,bW=bD<<0x2,bX=bD*Q+P<<0x2,bY=0x0,bZ,bJ;bV!==bN;bV+=0x1){bZ=bX+bV*bW;bJ=bY+bO;while(bY!==bJ){bQ[bY]=bG[bZ];bY+=0x1;bZ+=0x1;};};for(let c1=0x3;c1<bP;c1+=0x4)if(bQ[c1]!==0x0){bT=~~((c1+0x1)/bO);break;};if(bT===null)continue;for(let c2=bP-0x1,bJ=bT*bO;c2>bJ;c2-=0x4)if(bQ[c2]!==0x0){bU=(c2+0x1)/bO;bU=bN-(~~bU===bU?bU:~~bU+0x1);break;};c4:for(let P=0x3,c6=bT*bO,bJ=(bM-bU)*bO;P<bO;P+=0x4)for(let bY=P+c6;bY<bJ;bY+=bO)if(bQ[bY]!==0x0){bR=P>>>0x2;break c4;};c9:for(let P=bO-0x1,cb=bT*bO,bJ=(bM-bU)*bO,cd=bR<<0x2;P>cd;P-=0x4)for(let bY=P+cb;bY<bJ;bY+=bO)if(bQ[bY]!==0x0){bS=bM-(P+0x1>>>0x2);break c9;};R[bL]={'x':R[bw]['x']+P,'y':R[bw]['y']+Q};Z[bL]=document['createElement']('canvas');Z[bL]['ctx']=Z[bL]['getContext']('2d');if(bT||bU||bR||bS){R[bL]['width']=Z[bL]['width']=bM-bR-bS;R[bL]['height']=Z[bL]['height']=bN-bT-bU;Z[bL]['ctx']['drawImage'](bB,P+bR,Q+bT,Z[bL]['width'],Z[bL]['height'],0x0,0x0,Z[bL]['width'],Z[bL]['height']);R[bL]['x']+=bR;R[bL]['y']+=bT;}else{R[bL]['width']=Z[bL]['width']=bM;R[bL]['height']=Z[bL]['height']=bN;Z[bL]['ctx']['drawImage'](bB,P,Q,Z[bL]['width'],Z[bL]['height'],0x0,0x0,Z[bL]['width'],Z[bL]['height']);};R[bw]['type']==='grid'?T[bL]=R[bL]:S[bL]=R[bL];bz+=0x1;};E&&console['log'](R,'\x0aName\x20:\x20'+bw+'\x0aType\x20:\x20'+(R[bw]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+bz+'\x0aTime\x20:\x20'+(performance['now']()-bH));delete R[bw];delete Z[bw];bB=null;bC=null;bF=null;bG=null;if(bx)bx();bs();};};function cf(){if(a8){if(a4||aa)ac=()=>{de();cj(A);};else ac=de;}else if(a9){if(a4||aa)ac=()=>{cg(A);cj(A);};else ac=()=>cg(A);}else{if(a4||aa)ac=()=>{cg();cj();};else ac=cg;};};function cg(ch=B){as['clearRect'](0x0,0x0,ap['width'],ap['height']);for(let ci of a0['templates'])as['drawImage'](Z[ci],~~((S[ci]['x']-F)*ch),~~((S[ci]['y']-G)*ch),~~(Z[ci]['width']*ch),~~(Z[ci]['height']*ch));};function cj(ck=B){if(aa){cp(ck);return;};at['clearRect'](0x0,0x0,aq['width'],aq['height']);let cl,cm,cn=ck*a6;if(a8){cl=(az['xLeft']-P)/a6+P;cm=(az['yTop']-Q)/a6+Q;}else{cl=(F-P)/a6+P;cm=(G-Q)/a6+Q;};for(let co of a0['grids'])at['drawImage'](Z[co],~~((T[co]['x']-cl)*cn),~~((T[co]['y']-cm)*cn),~~(Z[co]['width']*cn),~~(Z[co]['height']*cn));};function cp(cq=B){at['clearRect'](0x0,0x0,aq['width'],aq['height']);function cr(P,Q,cu,cv,cw){at['strokeStyle']='rgb('+cw+')';at['beginPath']();at['moveTo'](P,Q);at['lineTo'](cu,cv);at['stroke']();};function cx(P,cz){return~~(((P<<0x8)-P)/cz);};function cA(P,cC,cD){return P>cD||P<cC?0x0:P-cC;};function cE(P,Q){if(P<0x0)P=-P;if(Q<0x0)Q=-Q;let cH=~~Q/o;return(~~(P/o)+'\x20'+(String['fromCharCode'](cH%0x1a+0x61)+'z'['repeat'](~~(cH/0x1a))))['toUpperCase']();};at['lineWidth']=~~(cq/0x3);at['strokeStyle']='rgb(20,20,20)';let cI=(o-F%o)*cq,cJ=(o-G%o)*cq,cK=o*cq,cL=o/0x2,cM=ap['width']+cq,cN=ap['height']+cq,cO=az['hWidth']%cq-cq,cP=az['hHeight']%cq-cq,cQ=cI+(cq-cO),cR=cJ+(cq-cP),cS=(~~(F/o)+0x1)*o,cT=(~~(G/o)+0x1)*o;const cU=0x190,cV=cU/0x3,cW=cV<<0x1;for(let cX=cQ,P=cS,cZ=cP+cN,d0=e3(P%cU),d1=cX+cO;cX<cM;cX+=cK,P+=o,d0=e3(P%cU),d1+=cK)cr(d1,cP,d1,cZ,[cx(cA(d0,0x0,cV),cV),cx(cA(d0,cV,cW),cV),cx(cA(d0,cW,cU),cV)]);for(let d2=cR,Q=cT,d4=cO+cM,d5=e3(Q%cU),d6=d2+cP;d2<cN;d2+=cK,Q+=o,d5=e3(Q%cU),d6+=cK)cr(cO,d6,d4,d6,[cx(cA(d5,0x0,cV),cV),cx(cA(d5,cV,cW),cV),cx(cA(d5,cW,cU),cV)]);if(cq>0x2)return;at['strokeStyle']='rgb(255,255,255)';at['fillStyle']='rgb(20,20,20)';at['font']=~~(o*cq/0x3)+'px\x20fantasy';at['textBaseline']='top';for(let d7=cQ,P=cS,d9=cP+cN;d7<cM;d7+=cK,P+=o)for(let d2=cR,Q=cT,d9=cO+cM,dd=cE(P,Q);d2<cN;d2+=cK,Q+=o,dd=cE(P,Q))at['strokeText'](dd,d7,d2),at['fillText'](dd,d7,d2);};function de(df=A){let dg,dh=0x0;for(let di=df*df;di>0x1;di>>>=0x1)dh++;dg=dh>>>0x1;a1['canvas']['width']=az['width'];a1['canvas']['height']=az['height'];let dj,dk;if(a0['templates']['length']===0x1){let dl=a0['templates'][0x0];dj=Z[dl]['ctx']['getImageData'](az['xLeft']-S[dl]['x']-0x1,az['yTop']-S[dl]['y']-0x1,az['width'],az['height']);dk=dj['data'];}else{for(let dm of a0['templates'])a1['ctx']['drawImage'](Z[dm],az['xLeft']-S[dm]['x']-0x1,az['yTop']-S[dm]['y']-0x1,az['width'],az['height'],0x0,0x0,az['width'],az['height']);dj=a1['ctx']['getImageData'](0x0,0x0,a1['canvas']['width'],a1['canvas']['height']);dk=dj['data'];};let dn=M['getImageData'](~~(H-(az['width']<<dg>>>0x1)),~~(I-(az['height']<<dg>>>0x1)),~~(az['width']*df),~~(az['height']*df))['data'],dp=0x0,dq=A<<0x2;for(let dr=0x0;dr<az['sizeRGBA'];dr+=az['widthRGBA']){dp=dr<<dh;let ds=dr,dt=dp,du=dr+az['widthRGBA'];while(ds<du){ds+=0x4;if(dn[(dt+=dq)+0x3]===0x0)continue;if(dN(dk[ds],dk[ds+0x1],dk[ds+0x2],dn[dt],dn[dt+0x1],dn[dt+0x2]))dk[ds]=dk[ds+0x1]=dk[ds+0x2]=~~((dk[ds]+dk[ds+0x1]+dk[ds+0x2])/0x3);else dk[ds]=0xff,dk[ds+0x1]=dk[ds+0x2]=0x0;};};if(A===0x1){as['putImageData'](dj,0x0,0x0);}else{a1['ctx']['putImageData'](dj,0x0,0x0);as['clearRect'](0x0,0x0,ap['width'],ap['height']);as['drawImage'](a1['canvas'],~~(az['borderW']-df),~~(az['borderH']-df),~~(az['width']*df),~~(az['height']*df));};};function dv(dw=B){au['clearRect'](0x0,0x0,ar['width'],ar['height']);if(a8||a9)dw=A;if(dw<=0x2)return;if(a3&&dw>4.6){au['beginPath']();au['strokeStyle']='rgb(20,20,20)';let dx=ap['width']+dw,dy=ap['height']+dw,dz=az['hWidth']%dw-dw,dA=az['hHeight']%dw-dw,dB=dx+dz,dC=dy+dA;au['lineWidth']=0x1;for(let P=dz;P<=dx;P+=dw){au['moveTo'](P,dA);au['lineTo'](P,dC);};for(let Q=dA;Q<=dy;Q+=dw){au['moveTo'](dz,Q);au['lineTo'](dB,Q);};au['stroke']();};au['beginPath']();au['lineWidth']=dw/0x3;au['strokeStyle']=a2;au['rect'](az['hWidth'],az['hHeight'],dw,dw);au['stroke']();};function dF(dG){if(typeof dG==='string'){let dH=document['getElementById'](dG);dH['style']['display']=dH['style']['display']==='none'?'block':'none';}else if(typeof dG==='object')dG['style']['display']=dG['style']['display']==='none'?'block':'none';};function dI(dJ){return document['getElementById'](dJ);};function dK(dL){let dM;dL=dL||window['event'];if(dL['wheelDelta']){dM=dL['wheelDelta']/0x78;if(window['opera'])dM=~dM+0x1;}else if(dL['detail'])dM=-dL['detail']/0x3;dM==0x1?A<<=0x1:A>>>=0x1;if(A>0x40)A=0x40;else if(A<0x1)A=0x1;else if(a8){setTimeout(()=>{az['updateD']();dU(A);de();a4&&cj(A);dv();},0xc8);}else if(a9){dU(A);dv();bs();};};function dN(dO,dP,dQ,dR,dS,dT){return(dO>dR?dO-dR:dR-dO)<0x1e&&(dP>dS?dP-dS:dS-dP)<0x1e&&(dQ>dT?dQ-dT:dT-dQ)<0x1e;};function dU(dV=B){x=az['hWidth']/dV;y=az['hHeight']/dV;F=P-az['hWidth']/dV;G=Q-az['hHeight']/dV;};function dW(dX,P,Q){if(P<0x0||Q<0x0)return;L['dispatchEvent'](new MouseEvent(dX,{'clientX':P,'clientY':Q,'bubbles':!![]}));};function e0(e1,e2){return Math['round'](e1-0.5+Math['random']()*(e2-e1+0x1));};function e3(P){return P>0x0?P:-P;};function e5(e6,e7){e6['mozImageSmoothingEnabled']=e6['webkitImageSmoothingEnabled']=e6['msImageSmoothingEnabled']=e6['imageSmoothingEnabled']=e7;};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote')&&document['getElementById']('colorSampleSelector');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let e8=document['createElement']('script');e8['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](e8);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
