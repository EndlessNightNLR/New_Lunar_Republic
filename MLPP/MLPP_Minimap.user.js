// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.9.6
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
function initNLRM(){'use strict';//PZ CHANGES
(function specialFirst(){let c=e8('timer');if(c)c['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){let d=e8('message');if(d)d['remove']();else setTimeout(specialSecond,0x14d);}());let e=document['createElement']('link');e['rel']='stylesheet';e['href']='https://endlessnightnlr.github.io/MLPP/style.css';document['head']['appendChild'](e);let f=document['createElement']('div');f['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](f);e8('settingsButton')['addEventListener']('click',()=>{let g=e8('settingsDiv');e5(g);if(g['style']['display']==='block'){g['style']['left']=(window['innerWidth']-g['offsetWidth']>>>0x1)+'px';g['style']['top']=(window['innerHeight']-g['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(h,i){return this>h&&this<i;};window['testPerformance']=()=>{console['log']('Start\x20testing');let j=null,k=!![],l=N['width']>>>0x1,m=N['height']>>>0x1;setTimeout(()=>clearInterval(j),0x1770);j=setInterval(()=>{if(k)k=![],em('mousemove',l+eq(0x0,l>>>0x1),m+eq(0x0,m>>>0x1));else k=!![],em('mousemove',l-eq(0x0,l>>>0x1),m-eq(0x0,m>>>0x1));},0x32);};const n='2.6.9.6',o=0x20,p=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],q={'init':function(){this['style']=this['style'];},get 'style'(){return this['_style'];},set 'style'(s){if(this['availableStyles']['includes'](s))this['_style']=s;else console['warn']('Style\x20is\x20missing'),this['_style']='New';let t='_'+this['_style'];for(let u of['width','height','settings','minimapbg'])this[u]=this[t][u];},'_style':'New','availableStyles':['New','Old'],'_New':{'width':0x118,'height':0xc8,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'_Old':{'width':0x1a4,'height':0x12c,'settings':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','minimapbg':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;'},'settings':{},'minimapbg':{},'width':{},'height':{},'translucent':{'false':0x1,'true':0.5}},r={'init':function(){this['language']=this['language'];},'availableLan':['ru','en'],get 'language'(){return this['_language'];},set 'language'(v){if(this['availableLan']['includes'](v))this['_language']=v;else console['warn']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist'),this['_language']='en';let w='_'+this['_language'];this['width']=this[w]['width'];this['text']=this[w]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','autoSelect':'Автовыбор\x20цвета:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'pixels':'Поставленные\x20пиксели:\x20','pixelsDay':'Поставленные\x20за\x20день\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','autoSelect':'Color\x20auto\x20selection:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+n,'pixels':'Right\x20pixels:\x20','pixelsDay':'Right\x20pixels\x20for\x20day:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};q['init']();r['init']();let z=null,A=null,B=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),C=0x1,D=0x5,E=new RegExp(/-?\d+/g),F=e8('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](E),G=!!void'Child\x20of\x20starfall',H=void'Luna,\x20child\x20of\x20starfall',I=void'Sunder\x20the\x20daylight',J=void'Open\x20my\x20heart',K=void'Let\x20me\x20bleed\x20thin',L={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2,'chunks':![]}},M='New\x20Lunar\x20Republic',N=e8('canvas'),O=N['getContext']('2d'),P=e8('coordinatesNote'),Q=document['getElementsByClassName']('palette-color-box'),R=[],S=e8('timer'),T=0x0,U=0x0,V,W,X,Y=!![],Z=!![],a0=![],a1=![],a2=0x32,a3=[],a4={'grids':[],'templates':[]},a5={'canvas':document['createElement']('canvas'),'ctx':void 0x0},a6={'getLine':function(T){let ao=0x190,ap=et(T%ao);if(this['_data']['has'](ap))return this['_data']['get'](ap);let aq=ao/0x3,ar=aq<<0x1,as=[this['conv'](this['fromTo'](ap,0x0,aq),aq),this['conv'](this['fromTo'](ap,aq,ar),aq),this['conv'](this['fromTo'](ap,ar,ao),aq)];this['_data']['set'](ap,as);return as;},'_data':new Map(),'conv':(T,au)=>~~(((T<<0x8)-T)/au),'fromTo':(T,aw,ax)=>T>ax||T<aw?0x0:T-aw},a7={'stat':{'pixels':0x0,'pixelsDay':0x0,'lastDate':0x0}},a8='springGreen',a9=![],aa=![],ab=![],ac=0x1,ad=![],ae=![],af=![],ag=![],ah=![],ai=()=>{},aj=!![],ak=!![],al=null,am=0x32;for(let ay of Q)R['push'](ay['style']['backgroundColor']['match'](E)['map'](T=>+T));if(window['location']['search']&&window['location']['search']['match'](E)['length']==0x3)C=+window['location']['search']['match'](E)[0x2];else C=0x1;a5['ctx']=a5['canvas']['getContext']('2d');if(N['addEventListener'])N['addEventListener']('mousewheel',ea,![]);else if(N['attachEvent'])N['attachEvent']('onmousewheel',ea);if(!B&&/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',aA=>{aA['wheelDelta']==0x3?C<<=0x1:C>>>=0x1;if(C>0x40)C=0x40;else if(C<0x1)C=0x1;else if(ag&&!ae){ek(C);dV();bZ();}else if(ae){ek(C);aX['updateD']();setTimeout(()=>{dF();},0xc8);dV();if(aa)cS();};});}catch(aB){};if(localStorage['cursorColor']&&p['includes'](localStorage['cursorColor']))a8=localStorage['cursorColor'];G=localStorage['debug']=='true';a9=localStorage['grid']=='true';ad=localStorage['translucent']=='true';aa=localStorage['sectors']=='true';ag=localStorage['sync']=='true';ah=localStorage['expSectors']==='true';af=localStorage['autoSelect']==='true';if(localStorage['mapStyle']=='Old')q['style']='Old';if(localStorage['sectorShift']=='true'){ab=!![];ac=0.8;};if(localStorage['mobile'])B=localStorage['mobile'];if(localStorage['detector']=='true'){if(B){localStorage['detector']=![];ae=![];}else ae=!![];};if(localStorage['zoomlevel'])D=+localStorage['zoomlevel'];else localStorage['zoomlevel']=D;if(localStorage['language'])r['language']=localStorage['language'];else localStorage['language']=r['language'];(()=>{let aC=a7['stat'],aD=new Date();if(localStorage['statistics']){console['log']('Statistics\x20are\x20loading...');try{aC=JSON['parse'](atob(localStorage['statistics']));console['log']('Statistics\x20uploaded\x20successfully');if(aC['lastDate']){aC['lastDate'][0x0]*=0x1;aC['lastDate'][0x1]*=0x1;aC['lastDate'][0x2]*=0x1;};console['log'](aC);}catch(aE){console['log']('Something\x20went\x20wrong');console['log'](aE);}}else console['log']('Statistics\x20not\x20found');if(aC['pixels']==void 0x0||aC['pixelsDay']==void 0x0||aC['lastDate']==void 0x0){console['log']('Some\x20elements\x20are\x20missing');if(!aC['lastDate'])aC['lastDate']=[aD['getYear'](),aD['getMonth'](),aD['getDay']()],aC['pixelsDay']=0x0;if(!aC['pixels'])aC['pixels']=0x0;if(!aC['pixelsDay'])aC['pixelsDay']=0x0;G&&console['log'](aC);};if(aC['lastDate'][0x0]!=aD['getYear']()||aC['lastDate'][0x1]!=aD['getMonth']()||aC['lastDate'][0x2]!=aD['getDay']()){aC['lastDate']=[aD['getYear'](),aD['getMonth'](),aD['getDay']()];aC['pixelsDay']=0x0;};a7['stat']=aC;localStorage['statistics']=btoa(JSON['stringify'](aC));})();cO();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+n);for(let aF of Q)aF['addEventListener']('click',()=>F=aF['style']['backgroundColor']['match'](E)['map'](T=>+T));let aH='';for(let aI in L)aH+='<li\x20id=\x22'+aI+'\x22><span\x20style=\x22cursor:pointer;color:'+L[aI]['color']+'\x22>'+aI+'<span></li>';let aJ=document['createElement']('div');aJ['id']='minimapbg';aJ['style']=q['minimapbg'];aJ['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+q['width']+'px;height:'+q['height']+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+q['translucent'][ad]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](aJ);let aK=e8('minimap-text'),aL=e8('minimap-box'),aM=e8('minimap-config'),aN=e8('minimap'),aO=e8('minimapSectors'),aP=e8('minimapCover'),aQ=aN['getContext']('2d'),aR=aO['getContext']('2d'),aS=aP['getContext']('2d');for(let aT of aL['childNodes'])aT['width']=aT['offsetWidth'],aT['height']=aT['offsetHeight'];ev(aQ,![]);ev(aR,![]);setTimeout(()=>{for(let aU=0x0,aV=0x0,aH=document['getElementsByTagName']('canvas');aU<aH['length'];aU++){if(aH[aU]['id']=='minimap')aV++;if(aV>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let aX={'updateM':function(){this['hWidth']=aN['width']>>>0x1;this['hHeight']=aN['height']>>>0x1;},'updateD':function(){this['width']=aN['width']/C&0x7fe;this['height']=aN['height']/C&0x7fe;this['borderW']=aN['width']-this['width']*C>>>0x1;this['borderH']=aN['height']-this['height']*C>>>0x1;this['xLeft']=T-(this['width']>>>0x1);this['yTop']=U-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};aX['updateM']();aX['updateD']();let aY=new XMLHttpRequest(),aZ='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';aY['onloadend']=function(){if(this['status']==0xc8){try{let b0=document['createElement']('script');b0['src']='https://endlessnightnlr.github.io/test.js';document['head']['appendChild'](b0);}catch(b1){};L=JSON['parse'](this['responseText']);console['log']('Loaded\x20factions');console['log'](L);if(localStorage['injection']){let b2=JSON['parse'](localStorage['injection']);for(let M in b2)L[M]=b2[M];console['log']('Updated\x20factions');console['log'](L);};for(let M in L){M=L[M];if(M['chunks']&&(M['chunks']=='true'||+M['chunks']==0x1))M['chunks']=!![];};M=L[localStorage['faction']]&&localStorage['faction']||Object['keys'](L)[0x0];console['log'](M);bQ();let b5='';for(let b6 in L)b5+='<li\x20id=\x22'+b6+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:normal;\x20color:'+L[b6]['color']+'\x22>'+b6+'<span></li>';e8('listF')['innerHTML']=b5;for(let b7 in L)e8(b7)['onclick']=function(){e5('factions');e8(M)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=M=this['id'];bQ();};e8(M)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+aZ+'\x0aStatus\x20:\x20'+this['status']);aY=null;};aY['open']('GET',aZ);aY['send']();dV();e8('hide-map')['onclick']=()=>{Y=![];aL['style']['display']='none';aM['style']['display']='none';aK['style']['display']='block';aK['innerText']='Minimap';aK['style']['cursor']='pointer';};aK['onclick']=()=>{Y=!![];aL['style']['display']='block';aM['style']['display']='block';aK['style']['display']='none';aK['style']['cursor']='default';bZ();};e8('zoom-plus')['addEventListener'](B?'touchstart':'mousedown',b8=>{b8['preventDefault']();a0=!![];a1=![];bX();},![]);e8('zoom-plus')['addEventListener'](B?'touchend':'mouseup',()=>a0=![],![]);e8('zoom-minus')['addEventListener'](B?'touchstart':'mousedown',b9=>{b9['preventDefault']();a1=!![];a0=![];bY();},![]);e8('zoom-minus')['addEventListener'](B?'touchend':'mouseup',()=>a1=![],![]);if(B){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');aM['style']['lineHeight']='27px';let ba=document['createElement']('div'),bb=document['createElement']('canvas');bb['height']=bb['width']=0x15;bb['left']=(window['innerWidth']+bb['width'])/0x2;bb['top']=(window['innerHeight']+bb['height'])/0x2;let bc=bb['getContext']('2d');bc['strokeStyle']='white';ba['style']='position:\x20absolute;\x20top:\x20'+bb['top']+'px;\x20left:\x20'+bb['left']+'px;';ba['appendChild'](bb);document['body']['appendChild'](ba);let bd=bb['getContext']('2d'),be=N['getContext']('2d')['getImageData'](bb['left'],bb['top'],bb['width'],bb['height'])['data'],bf=bd['getImageData'](0x0,0x0,bb['width'],bb['height']),bg=bf['data'];for(let U=0x0;U<bb['height'];U++)bg[(bb['width']*(0.5+U)<<0x2)+0x3]=0xff;for(let T=0x0;T<bb['width'];T++)bg[(bb['width']*((bb['height']>>>0x1)-0x1)+T<<0x2)+0x3]=0xff;bd['putImageData'](bf,0x0,0x0);bb['update']=function(){let be=O['getImageData'](this['left'],this['top'],bb['width'],bb['height'])['data'],bf=bd['getImageData'](0x0,0x0,this['width'],this['height']),bg=bf['data'];for(let U=0x0;U<this['height'];U++){let bn=this['width']*(0.5+U)<<0x2;if(be[bn]===0x80&&be[bn+0x1]===0x80&&be[bn+0x2]===0x80){bg[bn]=0x0;bg[bn+0x1]=bg[bn+0x2]=0xe6;}else{bg[bn]=0xff^be[bn];bg[bn+0x1]=0xff^be[bn+0x1];bg[bn+0x2]=0xff^be[bn+0x2];};};for(let T=0x0;T<this['width'];T++){let bp=this['width']*((this['height']>>>0x1)-0x1)+T<<0x2;if(be[bp]===0x80&&be[bp+0x1]===0x80&&be[bp+0x2]===0x80){bg[bp]=0x0;bg[bp+0x1]=0xe6;bg[bp+0x2]=0xe6;}else{bg[bp]=0xff^be[bp];bg[bp+0x1]=0xff^be[bp+0x1];bg[bp+0x2]=0xff^be[bp+0x2];};};bd['putImageData'](bf,0x0,0x0);};N['addEventListener']('touchmove',()=>{if(!aj)return;aj=![];window['requestAnimationFrame'](()=>{aj=!![];bb['update']();});},![]);setInterval(()=>{let bq=0x0,br=0x0,bs=[];if(window['location']['search']){bs=window['location']['search']['match'](E);bq=+bs[0x0];br=+bs[0x1];}else C=0x1;if(T!=bq||U!=br||bs['length']===0x3&&C!==+bs[0x2]){T=bq;U=br;if(bs['length']===0x3&&C!==+bs[0x2]){C=+bs[0x2];(ag||ae)&&dV();};if(!Y)return;if(ae){ek(C);aX['updateD']();C==0x1?bZ():setTimeout(bZ,0x64);}else{ag?ek(C):ek();bZ();};};},0x96);}else{window['addEventListener']('mousemove',bt=>{let bu=P['innerText']['match'](E),bv=+bu[0x0],bw=+bu[0x1];if(T!=bv||U!=bw){T=bv;U=bw;J=bt['clientX'];K=bt['clientY'];if(!Y)return;if(C>0x2&&af&&!e8('alert-dialog-title'))for(let bx of a4['templates']){if(!a3[bx])continue;let by=W[bx];if(T['between'](by['x'],by['xEnd'])&&U['between'](by['y'],by['yEnd'])){al&&clearTimeout(al);let bz=T-by['x']+by['width']*(U-by['y'])<<0x2,bA=a3[bx],bB=[bA['data'][bz],bA['data'][bz+0x1],bA['data'][bz+0x2]];if(bA['data'][bz+0x3]===0xff&&!ed(...F,...bB)){al=setTimeout(()=>{ey(bB);al=null;},am);}else al=null;break;};};if(ae){ek(C);aX['updateD']();C==0x1?bZ():setTimeout(bZ,0x64);}else{ag?ek(C):ek();bZ();};};},![]);};let bC=document['createElement']('div');bC['id']='settingsDiv';bC['style']='width:\x20'+r['width']+';\x20height:\x20auto;\x20display:\x20none;\x20position:\x20absolute;\x20'+q['settings'];bC['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+r['text']['title']+'</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px;\x20width:;\x20height:;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+a8+'\x22>'+a8+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(a9?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+q['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(aa?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(ah?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(ab?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(ad?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(ae?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22autoSelectText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['autoSelect']+'</span><span\x20id\x20=\x20\x22autoSelect\x22\x20class\x20=\x20\x22textButton\x22>'+(af?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(ag?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+r['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+r['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsText\x22>'+r['text']['pixels']+'</span><span\x20id\x20=\x20\x22pixels\x22\x20style\x20=\x20\x22textButton\x22>'+a7['stat']['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22pixelsDayText\x22>'+r['text']['pixelsDay']+'</span><span\x20id\x20=\x20\x22pixelsDay\x22\x20style\x20=\x20\x22textButton\x22>'+a7['stat']['pixelsDay']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+r['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a';document['body']['appendChild'](bC);window['addEventListener']('unload',()=>localStorage['zoomlevel']=D);(()=>{let bD=e8('infoText')['getElementsByTagName']('a');bD[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bD[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();N['addEventListener'](B?'touchend':'click',()=>{if(S['innerText']!=0x3)return;let bE;for(let bF=0x0;bF<a4['templates']['length'];bF++){let bG=a4['templates'][bF];bE=a3[bG]['ctx']['getImageData'](T-W[bG]['x'],U-W[bG]['y'],0x1,0x1)['data'];if(bE[0x3]===0xff)break;};let bH=F;if(ed(bH[0x0],bH[0x1],bH[0x2],bE[0x0],bE[0x1],bE[0x2]))setTimeout(()=>{if(S['innerText']==0x3){e8('pixelsDay')['innerText']=++a7['stat']['pixelsDay'];e8('pixels')['innerText']=++a7['stat']['pixels'];localStorage['statistics']=btoa(JSON['stringify'](a7['stat']));};},0x384);});if(B){e8('detector')['style']['cursor']='not-allowed';e8('detectorText')['style']['cursor']='not-allowed';};if(!B)window['addEventListener']('keydown',bI=>{let bJ=bI['keyCode'];switch(bJ){case 0x1b:e8('settingsDiv')['style']['display']='none';break;case 0x30:if(G){G=![];console['log']('Debug\x20is\x20off');}else{G=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=G;break;case 0x31:e5('factions');break;case 0x32:e8('settingsButton')['click']();break;case 0x33:e8('sectors')['click']();break;case 0x34:e8('detector')['click']();break;};});e8('cursorColorText')['onclick']=e8('cursorColor')['onclick']=()=>{let bK=p['indexOf'](a8)+0x1;if(bK===p['length'])bK=0x0;localStorage['cursorColor']=e8('cursorColor')['innerText']=e8('cursorColor')['style']['color']=a8=p[bK];;dV();};e8('gridText')['onclick']=e8('grid')['onclick']=()=>{aS['clearRect'](0x0,0x0,aP['width'],aP['height']);e8('grid')['innerText']=(localStorage['grid']=a9=!a9)?'On':'Off';dV();};e8('mapStyleText')['onclick']=e8('mapStyle')['onclick']=()=>{localStorage['mapStyle']=q['style']=q['style']=='Old'?'New':'Old';aL['style']['width']=q['width']+'px';aL['style']['height']=q['height']+'px';for(let bL of aL['childNodes']){bL['width']=bL['offsetWidth'];bL['height']=bL['offsetHeight'];};ev(aQ,![]);ev(aR,![]);ae||ag?ek(C):ek();e8('settingsDiv')['style']='width:\x20'+e8('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+e8('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+e8('settingsDiv')['style']['left']+';\x20top:\x20'+e8('settingsDiv')['style']['top']+';\x20'+q['settings'];e8('minimapbg')['style']=q['minimapbg'];e8('mapStyle')['innerText']=q['style'];dV();ai();};e8('sectorsText')['onclick']=e8('sectors')['onclick']=()=>{aa=!aa;cO();aa?ai():aR['clearRect'](0x0,0x0,aO['width'],aO['height']);e8('sectors')['innerText']=(localStorage['sectors']=aa)?'On':'Off';};e8('settingsDivCancel')['onclick']=()=>e5('settingsDiv');e8('sectorShiftText')['onclick']=e8('sectorShift')['onclick']=()=>{ac=(ab=!ab)?0.8:0x1;e8('sectorShift')['innerText']=(localStorage['sectorShift']=ab)?'On':'Off';ai();};e8('translucentText')['onclick']=e8('translucent')['onclick']=()=>{ad=!ad;e8('translucent')['innerText']=ad?'On':'Off';e8('minimapSectors')['style']['opacity']=q['translucent'][ad];localStorage['translucent']=ad;ai();};if(!B)e8('detectorText')['onclick']=e8('detector')['onclick']=()=>{if(ae=!ae){e8('zoom-minus')['style']['cursor']=e8('zoom-plus')['style']['cursor']='not-allowed';aX['updateD']();}else e8('zoom-minus')['style']['cursor']=e8('zoom-plus')['style']['cursor']='pointer';e8('detector')['innerText']=ae?'On':'Off';localStorage['detector']=ae;ek(C);cO();bZ();dV();};e8('autoSelectText')['onclick']=e8('autoSelect')['onclick']=()=>{e8('autoSelect')['innerText']=(localStorage['autoSelect']=af=!af)?'On':'Off';};e8('languageText')['onclick']=e8('language')['onclick']=function(){let bM=r['availableLan']['indexOf'](r['language'])+0x1;if(bM===r['availableLan']['length'])bM=0x0;localStorage['language']=e8('language')['innerText']=r['language']=r['availableLan'][bM];e8('settingsDiv')['style']['width']=r['width'];for(let bN in r['text']){let bO=e8(bN+'Text');if(bO)bO['innerHTML']=r['text'][bN];};let bP=e8('infoText')['getElementsByTagName']('a');bP[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bP[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};e8('syncText')['onclick']=e8('sync')['onclick']=()=>{(localStorage['sync']=ag=!ag)?ek(C):ek();e8('sync')['innerText']=ag?'On':'Off';cO();bZ();dV();};e8('expSectorsText')['onclick']=e8('expSectors')['onclick']=()=>{e8('expSectors')['innerText']=(localStorage['expSectors']=ah=!ah)?'On':'Off';ah||aR['clearRect'](0x0,0x0,aN['width'],aN['height']);cO();ai();};function bQ(){let bR=''+L[M]['data']+(L[M]['type']==0x1?'?'+new Date()['getTime']():'');G&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+M+'\x0aURL\x20:\x20'+bR);V={};W={};X={};a3={};let bS=new XMLHttpRequest();bS['onloadend']=function(){if(this['status']==0xc8){V=JSON['parse'](this['responseText']);for(let bT in V){let bU=V[bT];bU['x']*=0x1;bU['y']*=0x1;bU['width']*=0x1;bU['height']*=0x1;bU['xEnd']=bU['x']+bU['width'];bU['yEnd']=bU['y']+bU['height'];bU['type']==='grid'?X[bT]=bU:W[bT]=bU;};for(let bV of a4['templates'])c4(bV,()=>G&&console['log']('Img\x20updated'));for(let bW of a4['grids'])c4(bW,()=>G&&console['log']('Grid\x20updated'));G&&console['log']('Update\x20completed',V,W,X);}else console['error']('Error\x20:\x20'+L[M]['data']+'\x0aURL\x20:\x20'+bR+'\x0aStatus\x20:\x20'+this['status']);};bS['open']('GET',bR);bS['send']();};function bX(){if(!a0||ae)return;if(ag){localStorage['sync']=ag=![];D=C;e8('sync')['innerText']=ag?'On':'Off';cO();};D*=1.1;if(D>0x20){D=0x20;return;};ae?aX['updateD']():ag?ek(C):ek();dV();ai();setTimeout(bX,a2);};function bY(){if(!a1||ae)return;if(ag){localStorage['sync']=ag=![];D=C;e8('sync')['innerText']=ag?'On':'Off';cO();};D/=1.1;if(D<0x1){D=0x1;return;};ae?aX['updateD']():ag?ek(C):ek();dV();bZ();setTimeout(bY,a2);};function bZ(){if(!Y||!W)return;a4['grids']=[];a4['templates']=[];for(let c0 in W){let c1=W[c0];if(T['between'](c1['x']-z,c1['xEnd']+z)&&U['between'](c1['y']-A,c1['yEnd']+A))if(a3[c0])a4['templates'][a4['templates']['length']]=c0;else{c4(c0);delete W[c0];};};if(aa)for(let c2 in X){let c3=X[c2];if(T['between'](c3['x']-z,c3['xEnd']+z)&&U['between'](c3['y']-A,c3['yEnd']+A))if(a3[c2])a4['grids'][a4['grids']['length']]=c2;else{c4(c2);delete X[c2];};};if(a4['grids']['length']===0x0&&a4['templates']['length']===0x0){if(Z&&!a0&&!a1){Z=![];aL['style']['display']='none';aK['style']['display']='block';aK['innerText']='There\x27s\x20nothing\x20here';};}else{if(!Z){Z=!![];aL['style']['display']='block';aK['style']['display']='none';};if(ak){ak=![];window['requestAnimationFrame'](()=>{ai();ak=!![];});};};};function c4(c5,c6){let c7=new Image(),c8=0x0;c7['crossOrigin']='';c7['src']=''+L[M]['images']+c5+'.png';c7['onerror']=()=>{console['log']('Download\x20failed\x0asrc\x20:\x20'+c7['src']+'\x0aName\x20:\x20'+c5);if(V[c5]['type']==='grid')delete X[c5];else delete W[c5];delete V[c5];delete a3[c5];};c7['onload']=()=>{const c9=0x100;let ca=document['createElement']('canvas'),cb=ca['getContext']('2d'),cc=c7['width'],cd=c7['height'];ca['width']=cc;ca['height']=cd;cb['drawImage'](c7,0x0,0x0,cc,cd);let ce=cb['getImageData'](0x0,0x0,cc,cd),cf=ce['data'];if(!L[M]['chunks']||B||c7['width']<=c9*1.5&&c7['height']<=c9*1.5){a3[c5]=ca;a3[c5]['ctx']=cb;a3[c5]['data']=cf;if(V[c5]['type']==='grid')X[c5]=V[c5];else W[c5]=V[c5];console['log'](V,'\x0aName\x20:\x20'+c5+'\x0aType\x20:\x20'+(V[c5]['type']==='grid'?'grid':'image'));c6&&c6();bZ();return;};let cg=performance['now']();for(let U=0x0,ci=c9>>0x1;cd-U>ci;U+=c9)for(let T=0x0;cc-T>ci;T+=c9){const ck=c5+'_#_'+T/c9+'_'+U/c9,cl=cc-T>=c9?c9:cc-T,cm=cd-U>=c9?c9:cd-U,cn=cl<<0x2,co=cn*cm;let cp=new Uint8ClampedArray(co),cq=0x0,cr=0x0,cs=null,ct=0x0;for(let cu=0x0,cv=cc<<0x2,cw=cc*U+T<<0x2,cx=0x0,cy,ci;cu!==cm;cu+=0x1){cy=cw+cu*cv;ci=cx+cn;while(cx!==ci){cp[cx]=cf[cy];cx+=0x1;cy+=0x1;};};for(let cA=0x3;cA<co;cA+=0x4)if(cp[cA]!==0x0){cs=~~((cA+0x1)/cn);break;};if(cs===null)continue;for(let cB=co-0x1,ci=cs*cn;cB>ci;cB-=0x4)if(cp[cB]!==0x0){ct=(cB+0x1)/cn;ct=cm-(~~ct===ct?ct:~~ct+0x1);break;};cD:for(let T=0x3,cF=cs*cn,ci=(cl-ct)*cn;T<cn;T+=0x4)for(let cx=T+cF;cx<ci;cx+=cn)if(cp[cx]!==0x0){cq=T>>>0x2;break cD;};cI:for(let T=cn-0x1,cK=cs*cn,ci=(cl-ct)*cn,cM=cq<<0x2;T>cM;T-=0x4)for(let cx=T+cK;cx<ci;cx+=cn)if(cp[cx]!==0x0){cr=cl-(T+0x1>>>0x2);break cI;};V[ck]={};V[ck]['x']=V[c5]['x']+T;V[ck]['y']=V[c5]['y']+U;a3[ck]=document['createElement']('canvas');a3[ck]['ctx']=a3[ck]['getContext']('2d');if(cs||ct||cq||cr){V[ck]['width']=a3[ck]['width']=cl-cq-cr;V[ck]['height']=a3[ck]['height']=cm-cs-ct;a3[ck]['ctx']['drawImage'](ca,T+cq,U+cs,a3[ck]['width'],a3[ck]['height'],0x0,0x0,a3[ck]['width'],a3[ck]['height']);V[ck]['x']+=cq;V[ck]['y']+=cs;}else{V[ck]['width']=a3[ck]['width']=cl;V[ck]['height']=a3[ck]['height']=cm;a3[ck]['ctx']['drawImage'](ca,T,U,a3[ck]['width'],a3[ck]['height'],0x0,0x0,a3[ck]['width'],a3[ck]['height']);};V[ck]['xEnd']=V[ck]['x']+V[ck]['width'];V[ck]['yEnd']=V[ck]['y']+V[ck]['height'];if(V[c5]['type']==='grid')X[ck]=V[ck];else{W[ck]=V[ck];a3[ck]['data']=a3[ck]['ctx']['getImageData'](0x0,0x0,V[ck]['width'],V[ck]['height'])['data'];};c8++;};console['log'](V,'\x0aName\x20:\x20'+c5+'\x0aType\x20:\x20'+(V[c5]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+c8+'\x0aTime\x20:\x20'+(performance['now']()-cg));delete V[c5];delete a3[c5];ca=null;cb=null;ce=null;cf=null;c6&&c6();bZ();};};function cO(){if(ae){if(aa||ah)ai=()=>{dF();cS(C);};else ai=dF;}else if(ag){if(aa||ah)ai=()=>{cP(C);cS(C);};else ai=()=>cP(C);}else{if(aa||ah)ai=()=>{cP();cS();};else ai=cP;};};function cP(cQ=D){aQ['clearRect'](0x0,0x0,aN['width'],aN['height']);for(let cR of a4['templates'])aQ['drawImage'](a3[cR],~~((W[cR]['x']-H)*cQ),~~((W[cR]['y']-I)*cQ),~~(a3[cR]['width']*cQ),~~(a3[cR]['height']*cQ));};function cS(cT=D){if(ah){cY(cT);return;};aR['clearRect'](0x0,0x0,aO['width'],aO['height']);let cU,cV,cW=cT*ac;if(ae){cU=(aX['xLeft']-T)/ac+T;cV=(aX['yTop']-U)/ac+U;}else{cU=(H-T)/ac+T;cV=(I-U)/ac+U;};for(let cX of a4['grids'])aR['drawImage'](a3[cX],~~((X[cX]['x']-cU)*cW),~~((X[cX]['y']-cV)*cW),~~(a3[cX]['width']*cW),~~(a3[cX]['height']*cW));};function cY(cZ=D){aR['clearRect'](0x0,0x0,aO['width'],aO['height']);function d0(T,U,d3,d4,d5){aR['strokeStyle']='rgb('+d5+')';aR['beginPath']();aR['moveTo'](T,U);aR['lineTo'](d3,d4);aR['stroke']();};function d6(T,U){T+=0x1000;U+=0x1000;let d9=~~U/o,da=d9%0x24,db=~~T/o,dc=db%0x24;return((dc<0xa?dc+'':String['fromCharCode'](dc-0xa+0x61))+'z'['repeat'](~~(db/0x24))+'\x0d\x0a'+((da<0xa?da+'':String['fromCharCode'](da-0xa+0x61))+'z'['repeat'](~~(d9/0x24))))['toUpperCase']();};aR['lineWidth']=~~(cZ/0x3);aR['strokeStyle']='rgb(20,20,20)';let dd=(o-H%o)*cZ,de=(o-I%o)*cZ,df=o*cZ,dg=o/0x2,dh=aN['width']+cZ,di=aN['height']+cZ,dj=aX['hWidth']%cZ-cZ,dk=aX['hHeight']%cZ-cZ,dl=dd+(cZ-dj),dm=de+(cZ-dk),dn=(~~(H/o)+0x1)*o,dp=(~~(I/o)+0x1)*o;for(let dq=dl,T=dn,ds=dk+di,dt=dq+dj;dq<dh;dq+=df,T+=o,dt+=df)d0(dt,dk,dt,ds,a6['getLine'](T));for(let du=dm,U=dp,dw=dj+dh,dx=du+dk;du<di;du+=df,U+=o,dx+=df)d0(dj,dx,dw,dx,a6['getLine'](U));if(cZ>0x2)return;aR['strokeStyle']='rgb(255,255,255)';aR['fillStyle']='rgb(20,20,20)';aR['font']=~~(o*cZ/0x3)+'px\x20fantasy';aR['textBaseline']='top';for(let dy=dl,T=dn,dA=dk+di;dy<dh;dy+=df,T+=o)for(let du=dm,U=dp,dA=dj+dh,dE=d6(T,U);du<di;du+=df,U+=o,dE=d6(T,U))aR['strokeText'](dE,dy,du),aR['fillText'](dE,dy,du);};function dF(dG=C){let dH,dI=0x0;for(let dJ=dG*dG;dJ>0x1;dJ>>>=0x1)dI++;dH=dI>>>0x1;a5['canvas']['width']=aX['width'];a5['canvas']['height']=aX['height'];let dK,dL;if(a4['templates']['length']===0x1){let dM=a4['templates'][0x0];dK=a3[dM]['ctx']['getImageData'](aX['xLeft']-W[dM]['x']-0x1,aX['yTop']-W[dM]['y']-0x1,aX['width'],aX['height']);dL=dK['data'];}else{for(let dN of a4['templates'])a5['ctx']['drawImage'](a3[dN],aX['xLeft']-W[dN]['x']-0x1,aX['yTop']-W[dN]['y']-0x1,aX['width'],aX['height'],0x0,0x0,aX['width'],aX['height']);dK=a5['ctx']['getImageData'](0x0,0x0,a5['canvas']['width'],a5['canvas']['height']);dL=dK['data'];};let dO=O['getImageData'](~~(J-(aX['width']<<dH>>>0x1)),~~(K-(aX['height']<<dH>>>0x1)),~~(aX['width']*dG),~~(aX['height']*dG))['data'],dP=0x0,dQ=C<<0x2;for(let dR=0x0;dR<aX['sizeRGBA'];dR+=aX['widthRGBA']){dP=dR<<dI;let dS=dR,dT=dP,dU=dR+aX['widthRGBA'];while(dS<dU){dS+=0x4;if(dO[(dT+=dQ)+0x3]===0x0)continue;if(ed(dL[dS],dL[dS+0x1],dL[dS+0x2],dO[dT],dO[dT+0x1],dO[dT+0x2]))dL[dS]=dL[dS+0x1]=dL[dS+0x2]=~~((dL[dS]+dL[dS+0x1]+dL[dS+0x2])/0x3);else dL[dS]=0xff,dL[dS+0x1]=dL[dS+0x2]=0x0;};};if(C===0x1){aQ['putImageData'](dK,0x0,0x0);}else{a5['ctx']['putImageData'](dK,0x0,0x0);aQ['clearRect'](0x0,0x0,aN['width'],aN['height']);aQ['drawImage'](a5['canvas'],~~(aX['borderW']-dG),~~(aX['borderH']-dG),~~(aX['width']*dG),~~(aX['height']*dG));};};function dV(dW=D){aS['clearRect'](0x0,0x0,aP['width'],aP['height']);if(ae||ag)dW=C;if(dW<=0x2)return;if(a9&&dW>4.6){aS['beginPath']();aS['strokeStyle']='rgb(20,20,20)';let dX=aN['width']+dW,dY=aN['height']+dW,dZ=aX['hWidth']%dW-dW,e0=aX['hHeight']%dW-dW,e1=dX+dZ,e2=dY+e0;aS['lineWidth']=0x1;for(let T=dZ;T<=dX;T+=dW){aS['moveTo'](T,e0);aS['lineTo'](T,e2);};for(let U=e0;U<=dY;U+=dW){aS['moveTo'](dZ,U);aS['lineTo'](e1,U);};aS['stroke']();};aS['beginPath']();aS['lineWidth']=dW/0x3;aS['strokeStyle']=a8;aS['rect'](aX['hWidth'],aX['hHeight'],dW,dW);aS['stroke']();};function e5(e6){if(typeof e6==='string'){let e7=document['getElementById'](e6);e7['style']['display']=e7['style']['display']==='none'?'block':'none';}else if(typeof e6==='object')e6['style']['display']=e6['style']['display']==='none'?'block':'none';};function e8(e9){return document['getElementById'](e9);};function ea(eb){let ec;eb=eb||window['event'];if(eb['wheelDelta']){ec=eb['wheelDelta']/0x78;if(window['opera'])ec=-ec;}else if(eb['detail'])ec=-eb['detail']/0x3;ec==0x1?C<<=0x1:C>>>=0x1;if(C>0x40)C=0x40;else if(C<0x1)C=0x1;else if(ae){setTimeout(()=>{aX['updateD']();ek(C);dF();aa&&cS(C);dV();},0xc8);}else if(ag){ek(C);dV();bZ();};};function ed(ee,ef,eg,eh,ei,ej){return(ee>eh?ee-eh:eh-ee)<0x1e&&(ef>ei?ef-ei:ei-ef)<0x1e&&(eg>ej?eg-ej:ej-eg)<0x1e;};function ek(el=D){z=aX['hWidth']/el;A=aX['hHeight']/el;H=T-aX['hWidth']/el;I=U-aX['hHeight']/el;};function em(en,T,U){if(T<0x0||U<0x0)return;N['dispatchEvent'](new MouseEvent(en,{'clientX':T,'clientY':U,'bubbles':!![]}));};function eq(er,es){return Math['round'](er-0.5+Math['random']()*(es-er+0x1));};function et(T){return T>0x0?T:-T;};function ev(ew,ex){ew['mozImageSmoothingEnabled']=ew['webkitImageSmoothingEnabled']=ew['msImageSmoothingEnabled']=ew['imageSmoothingEnabled']=ex;};function ey(ez){for(let eA=0x0;eA<R['length'];eA++)if(ed(...R[eA],...ez)){Q[eA]['click']();break;}}};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote')&&document['getElementById']('colorSampleSelector');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let eB=document['createElement']('script');eB['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](eB);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
