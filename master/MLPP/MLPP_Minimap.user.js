// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.8.5
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
//
var $jscomp=$jscomp||{};$jscomp['scope']={};$jscomp['arrayIteratorImpl']=function(c){var d=0x0;return function(){return d<c['length']?{'done':!0x1,'value':c[d++]}:{'done':!0x0};};};$jscomp['arrayIterator']=function(e){return{'next':$jscomp['arrayIteratorImpl'](e)};};$jscomp['makeIterator']=function(f){var g='undefined'!=typeof Symbol&&Symbol['iterator']&&f[Symbol['iterator']];return g?g['call'](f):$jscomp['arrayIterator'](f);};function initNLRM(){function h(){var i=''+bc[bd]['data']+(0x1==bc[bd]['type']?'?'+new Date()['getTime']():'');b7&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+bd+'\x0aURL\x20:\x20'+i);bi={};bj={};bk={};bp={};var j=new XMLHttpRequest();j['onloadend']=function(){if(0xc8==this['status']){bi=JSON['parse'](this['responseText']);for(var k in bi)bi[k]['x']*=0x1,bi[k]['y']*=0x1,'grid'===bi[k]['type']?bk[k]=bi[k]:bj[k]=bi[k];var i=$jscomp['makeIterator'](bq['templates']);for(k=i['next']();!k['done'];k=i['next']())r(k['value'],function(){return b7&&console['log']('Img\x20updated');});i=$jscomp['makeIterator'](bq['grids']);for(k=i['next']();!k['done'];k=i['next']())r(k['value'],function(){return b7&&console['log']('Grid\x20updated');});b7&&console['log']('Update\x20completed',bi,bj,bk);}else console['error']('Error\x20:\x20'+bc[bd]['data']+'\x0aStatus\x20:\x20'+this['status']);};j['open']('GET',i);j['send']();}function m(){bn&&!bx&&(by&&(localStorage['sync']=by=!0x1,b6=b5,ay('sync')['innerText']=by?'On':'Off',V()),b6*=1.1,0x20<b6?b6=0x20:(bx?bO['override']():by?aD(b5):aD(),ap(),bB(),setTimeout(m,0x32)));}function n(){bo&&!bx&&(by&&(localStorage['sync']=by=!0x1,b6=b5,ay('sync')['innerText']=by?'On':'Off',V()),b6/=1.1,0x1>b6?b6=0x1:(bx?bO['override']():by?aD(b5):aD(),ap(),o(),setTimeout(n,0x32)));}function o(){if(bl&&bj){bq['grids']=[];bq['templates']=[];for(var p in bj)bg['between'](bj[p]['x']-b2,bj[p]['x']+bj[p]['width']+b2)&&bh['between'](bj[p]['y']-b3,bj[p]['y']+bj[p]['height']+b3)&&(bp[p]?bq['templates'][bq['templates']['length']]=p:(r(p),delete bj[p]));if(bt)for(var q in bk)bg['between'](bk[q]['x']-b2,bk[q]['x']+bk[q]['width']+b2)&&bh['between'](bk[q]['y']-b3,bk[q]['y']+bk[q]['height']+b3)&&(bp[q]?bq['grids'][bq['grids']['length']]=q:(r(q),delete bk[q]));0x0===bq['grids']['length']&&0x0===bq['templates']['length']?!bm||bn||bo||(bm=!0x1,ay('minimap-box')['style']['display']='none',ay('minimap-text')['style']['display']='block',ay('minimap-text')['innerText']='There\x27s\x20nothing\x20here'):(bm||(bm=!0x0,ay('minimap-box')['style']['display']='block',ay('minimap-text')['style']['display']='none'),bC&&(bC=!0x1,window['requestAnimationFrame'](function(){bB();bC=!0x0;})));}}function r(s,t){var u=new Image(),v=0x0;u['crossOrigin']='';u['src']=''+bc[bd]['images']+s+'.png';u['onerror']=function(){console['log']('Download\x20failed\x0aName\x20:\x20'+s);'grid'===bi[s]['type']?delete bk[s]:delete bj[s];delete bi[s];delete bp[s];};u['onload']=function(){if(0x180>=u['width']&&0x180>=u['height'])bp[s]=u,'grid'===bi[s]['type']?bk[s]=bi[s]:bj[s]=bi[s],b7&&console['log'](bi,'\x0aName\x20:\x20'+s+'\x0aType\x20:\x20'+('grid'===bi[s]['type']?'grid':'image'));else{var w=document['createElement']('canvas'),x=w['getContext']('2d');w['width']=u['width'];w['height']=u['height'];x['drawImage'](u,0x0,0x0,u['width'],u['height']);var y=u['width'],z=u['height'];x=x['getImageData'](0x0,0x0,y,z)['data'];for(var A=performance['now'](),B=0x0;0x80<z-B;B+=0x100)for(var C=0x0;0x80<y-C;C+=0x100){for(var D=s+'_#_'+C/0x100+'_'+B/0x100,E=0x100<=y-C?0x100:y-C,F=0x100<=z-B?0x100:z-B,G=E<<0x2,H=G*F,I=new Uint8ClampedArray(H),J=0x0,K=0x0,P=null,M=0x0,N=0x0,O=y<<0x2,h=y*B+C<<0x2,Q=0x0,R,S;N!==F;N+=0x1)for(R=h+N*O,S=Q+G;Q!==S;)I[Q]=x[R],Q+=0x1,R+=0x1;for(N=0x3;N<H;N+=0x4)if(0x0!==I[N]){P=~~((N+0x1)/G);break;}if(null!==P){--H;for(N=P*G;H>N;H-=0x4)if(0x0!==I[H]){M=(H+0x1)/G;M=F-(~~M===M?M:~~M+0x1);break;}H=0x3;N=P*G;O=(E-M)*G;T:for(;H<G;H+=0x4)for(h=H+N;h<O;h+=G)if(0x0!==I[h]){J=H>>>0x2;break T;}H=G-0x1;N=P*G;O=(E-M)*G;h=J<<0x2;U:for(;H>h;H-=0x4)for(Q=H+N;Q<O;Q+=G)if(0x0!==I[Q]){K=E-(H+0x1>>>0x2);break U;}bi[D]={'x':bi[s]['x']+C,'y':bi[s]['y']+B};bp[D]=document['createElement']('canvas');0x0!==P||0x0!==M||0x0!==J||0x0!==K?(bi[D]['width']=bp[D]['width']=E-J-K,bi[D]['height']=bp[D]['height']=F-P-M,bp[D]['getContext']('2d')['drawImage'](w,C+J,B+P,bp[D]['width'],bp[D]['height'],0x0,0x0,bp[D]['width'],bp[D]['height']),bi[D]['x']+=J,bi[D]['y']+=P):(bi[D]['width']=bp[D]['width']=E,bi[D]['height']=bp[D]['height']=F,bp[D]['getContext']('2d')['drawImage'](w,C,B,bp[D]['width'],bp[D]['height'],0x0,0x0,bp[D]['width'],bp[D]['height']));'grid'===bi[s]['type']?bk[D]=bi[D]:bj[D]=bi[D];v+=0x1;}}A=performance['now']()-A;b7&&console['log'](bi,'\x0aName\x20:\x20'+s+'\x0aType\x20:\x20'+('grid'===bi[s]['type']?'grid':'image')+'\x0aChunks\x20:\x20'+v+'\x0aTime\x20:\x20'+A);delete bi[s];delete bp[s];}t&&t();o();};}function V(){bB=bx?bt?function(){a6();a0(b5);}:a6:by?bt?function(){W(b5);a0(b5);}:function(){return W(b5);}:bt?function(){W();a0();}:W;}function W(X){X=void 0x0===X?b6:X;bJ['clearRect'](0x0,0x0,bG['width'],bG['height']);for(var Y=$jscomp['makeIterator'](bq['templates']),Z=Y['next']();!Z['done'];Z=Y['next']())Z=Z['value'],bJ['drawImage'](bp[Z],~~((bj[Z]['x']-b8)*X),~~((bj[Z]['y']-b9)*X),~~(bp[Z]['width']*X),~~(bp[Z]['height']*X));}function a0(a1){a1=void 0x0===a1?b6:a1;bK['clearRect'](0x0,0x0,bH['width'],bH['height']);var a2=a1*bv;if(bx){a1=(bO['xLeft']-bg)/bv+bg;var a3=(bO['yTop']-bh)/bv+bh;}else a1=(b8-bg)/bv+bg,a3=(b9-bh)/bv+bh;for(var a4=$jscomp['makeIterator'](bq['grids']),a5=a4['next']();!a5['done'];a5=a4['next']())a5=a5['value'],bK['drawImage'](bp[a5],~~((bk[a5]['x']-a1)*a2),~~((bk[a5]['y']-a3)*a2),~~(bp[a5]['width']*a2),~~(bp[a5]['height']*a2));}function a6(a7){a7=void 0x0===a7?b5:a7;bJ['clearRect'](0x0,0x0,bG['width'],bG['height']);for(var a8=document['createElement']('canvas'),a9=a8['getContext']('2d'),aa,ab=0x0,ac=a7*a7;0x1<ac;ac>>>=0x1)ab++;aa=ab>>>0x1;a8['width']=bO['width'];a8['height']=bO['height'];ac=$jscomp['makeIterator'](bq['templates']);for(var ad=ac['next']();!ad['done'];ad=ac['next']())ad=ad['value'],a9['drawImage'](bp[ad],bO['xLeft']-bj[ad]['x']-0x1,bO['yTop']-bj[ad]['y']-0x1,bO['width'],bO['height'],0x0,0x0,bO['width'],bO['height']);ac=a9['getImageData'](0x0,0x0,a8['width'],a8['height']);ad=ac['data'];aa=be['getContext']('2d')['getImageData'](~~(ba-(bO['width']<<aa>>>0x1)),~~(bb-(bO['height']<<aa>>>0x1)),~~(bO['width']*a7),~~(bO['height']*a7))['data'];for(var ae=bO['sizeRGBA'],af,ag=b5<<0x2;ae-=bO['widthRGBA'];){af=ae<<ab;for(var ah=ae,ai=ae+bO['widthRGBA'];(ah+=0x4)<ai;)if(0x0!==aa[(af+=ag)+0x3]){var aj=ad[ah],ak=ad[ah+0x1],al=ad[ah+0x2],am=aa[af],an=aa[af+0x1],ao=aa[af+0x2];0x28>(aj>am?aj-am:am-aj)+(ak>an?ak-an:an-ak)+(al>ao?al-ao:ao-al)?ad[ah]=ad[ah+0x1]=ad[ah+0x2]=~~((ad[ah]+ad[ah+0x1]+ad[ah+0x2])/0x3):(ad[ah]=0xff,ad[ah+0x1]=ad[ah+0x2]=0x0);}}0x1===b5?bJ['putImageData'](ac,0x0,0x0):(a9['putImageData'](ac,0x0,0x0),bJ['drawImage'](a8,~~(bO['borderW']-a7),~~(bO['borderH']-a7),~~(bO['width']*a7),~~(bO['height']*a7)));}function ap(aq){aq=void 0x0===aq?b6:aq;bL['clearRect'](0x0,0x0,bI['width'],bI['height']);if(bx||by)aq=b5;if(!(0x2>=aq)){if(bs&&4.6<aq){bL['beginPath']();var ar=bG['width']+aq,as=bG['height']+aq,at=(bG['width']>>>0x1)%aq-aq,au=(bG['height']>>>0x1)%aq-aq;bL['lineWidth']=0x1;for(var av=0x0;av<=ar;av+=aq)bL['moveTo'](av+at,au),bL['lineTo'](av+at,as+au);for(av=0x0;av<=as;av+=aq)bL['moveTo'](at,av+au),bL['lineTo'](ar+at,av+au);bL['strokeStyle']='rgb(20,20,20)';bL['stroke']();}bL['beginPath']();bL['lineWidth']=aq/0x3;bL['strokeStyle']=br;bL['rect'](bG['width']>>>0x1,bG['height']>>>0x1,aq,aq);bL['stroke']();}}function aw(ax){'string'===typeof ax?(ax=document['getElementById'](ax),ax['style']['display']='none'===ax['style']['display']?'block':'none'):'object'===typeof ax&&(ax['style']['display']='none'===ax['style']['display']?'block':'none');}function ay(az){return document['getElementById'](az);}function aA(aB){aB=aB||window['event'];if(aB['wheelDelta']){var ay=aB['wheelDelta']/0x78;window['opera']&&(ay=~ay+0x1);}else aB['detail']&&(ay=-aB['detail']/0x3);0x1==ay?b5<<=0x1:b5>>>=0x1;0x40<b5?b5=0x40:0x1>b5?b5=0x1:bx?setTimeout(function(){bO['override']();aD(b5);a6();bt&&a0(b5);ap();},0xc8):by&&(aD(b5),ap(),o());}function aD(ay){ay=void 0x0===ay?b6:ay;b8=bg-(bG['width']>>>0x1)/ay;b9=bh-(bG['height']>>>0x1)/ay;b2=bG['width']/ay>>>0x1;b3=bG['height']/ay>>>0x1;}function aF(ay,aH,aI){0x0>aH||0x0>aI||(ay=new MouseEvent(ay,{'clientX':aH,'clientY':aI,'bubbles':!0x0}),be['dispatchEvent'](ay));}function aJ(ay,aL){return Math['round'](ay-0.5+Math['random']()*(aL-ay+0x1));}(function E(){ay('timer')?ay('timer')['style']['z-index']=0x5:setTimeout(E,0x14d);}());(function d(){ay('message')?ay('message')['remove']():setTimeout(d,0x14d);}());var aM=document['createElement']('link');aM['rel']='stylesheet';aM['href']='https://endlessnightnlr.github.io/master/MLPP/style.css';document['head']['appendChild'](aM);aM=document['createElement']('div');aM['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';aM['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/master/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](aM);ay('settingsButton')['addEventListener']('click',function(){var aN=ay('settingsDiv');aw(aN);'block'===aN['style']['display']&&(aN['style']['left']=(window['innerWidth']-aN['offsetWidth']>>>0x1)+'px',aN['style']['top']=(window['innerHeight']-aN['offsetHeight']>>>0x1)+'px');});Number['prototype']['between']=function(ay,aP){return this>ay&&this<aP;};window['testPerformance']=function(){console['log']('Start\x20testing');var ay=null,aR=!0x0,aS=be['width']>>>0x1,aT=be['height']>>>0x1;setTimeout(function(){clearInterval(ay);console['log']('Done');},0x1770);ay=setInterval(function(){aR?(aR=!0x1,aF('mousemove',aS+aJ(0x0,aS>>>0x1),aT+aJ(0x0,aT>>>0x1))):(aR=!0x0,aF('mousemove',aS-aJ(0x0,aS>>>0x1),aT-aJ(0x0,aT>>>0x1)));},0x32);};window['mouse']=aF;var aU='black\x20gray\x20white\x20Fuchsia\x20red\x20yellow\x20lime\x20springGreen\x20aqua\x20blue'['split']('\x20'),aV='New',aW={'Old':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','New':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;'},aX={'Old':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;','New':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},aY={'Old':0x1a4,'New':0x118},aZ={'Old':0x12c,'New':0xc8},b0={'false':0x1,'true':0.5},b1={'ru':{'width':'280px','title':{'filling':'MLP\x20Pixel\x20миникарта:\x20настройки'},'cursorColor':{'filling':'Цвет\x20курсора:\x20','true':'On','false':'Off'},'grid':{'filling':'Сетка:\x20','true':'On','false':'Off'},'mapStyle':{'filling':'Стиль\x20миникарты:\x20','New':'New','Old':'Old'},'sectors':{'filling':'Сектора:\x20','true':'On','false':'Off'},'sectorShift':{'filling':'Сдвиг\x20секторов:\x20','true':'On','false':'Off'},'translucent':{'filling':'Прозрачность\x20секторов:\x20','true':'On','false':'Off'},'detector':{'filling':'Детектор\x20ошибок:\x20','true':'On','false':'Off'},'language':{'filling':'Язык:\x20'},'sync':{'filling':'Синхронизация\x20зума:\x20'},'info':{'filling':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20при\x20поддержке\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>'}},'en':{'width':'250px','title':{'filling':'MLP\x20Pixel\x20minimap:\x20settings'},'cursorColor':{'filling':'Cursor\x20color:\x20','true':'On','Off':'Off'},'grid':{'filling':'Grid:\x20','true':'On','Off':'Off'},'mapStyle':{'filling':'Minimap\x20style:\x20','New':'New','Old':'Old'},'sectors':{'filling':'Sectors:\x20','true':'On','false':'Off'},'sectorShift':{'filling':'Sectors\x20shift:\x20','true':'On','false':'Off'},'translucent':{'filling':'Translucent:\x20','true':'On','false':'Off'},'detector':{'filling':'Error\x20detector:\x20','true':'On','false':'Off'},'language':{'filling':'Language:\x20'},'sync':{'filling':'Zoom\x20sync:\x20'},'info':{'filling':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20sponsored\x20by\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>'}}},b2=null,b3=null,b4=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),b5=0x1,b6=0x5,b7=!0x1,b8=void 0x0,b9=void 0x0,ba=void 0x0,bb=void 0x0,bc={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2}},bd='New\x20Lunar\x20Republic',be=ay('canvas'),bf=ay('coordinatesNote'),bg=0x0,bh=0x0,bi,bj,bk,bl=!0x0,bm=!0x0,bn=!0x1,bo=!0x1,bp=[],bq={'grids':[],'templates':[]},br='springGreen',bs=!0x1,bt=!0x1,bu=!0x1,bv=0x1,bw=!0x1,bx=!0x1,by=!0x1,bz=(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),bA=new RegExp(/-?\d+/g),bB,bC=!0x0;b5=window['location']['href']['match'](bA)&&0x3==window['location']['href']['match'](bA)['length']?+window['location']['href']['match'](bA)[0x2]:0x1;b1[bz]||(bz='en');be['addEventListener']?be['addEventListener']('mousewheel',aA,!0x1):be['attachEvent']&&be['attachEvent']('onmousewheel',aA);if(/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',function(ay){0x3==ay['wheelDelta']?b5<<=0x1:b5>>>=0x1;0x40<b5?b5=0x40:0x1>b5?b5=0x1:by&&!bx?(aD(b5),ap(),o()):bx&&(aD(b5),bO['override'](),setTimeout(function(){a6();},0xc8),ap(),bt&&a0());});}catch(bE){}localStorage['cursorColor']?br=localStorage['cursorColor']:localStorage['cursorColor']=br;b7='true'==localStorage['debug'];bs='true'==localStorage['grid'];'Old'==localStorage['mapStyle']&&(aV='Old');bt='true'==localStorage['sectors'];'true'==localStorage['sectorShift']&&(bu=!0x0,bv=0.8);bw='true'==localStorage['translucent'];localStorage['mobile']&&(b4=localStorage['mobile']);'true'==localStorage['detector']&&(bx=b4?localStorage['detector']=!0x1:!0x0);by='true'==localStorage['sync'];localStorage['zoomlevel']?b6=+localStorage['zoomlevel']:localStorage['zoomlevel']=b6;localStorage['language']?b1[localStorage['language']]?bz=localStorage['language']:bz='en':localStorage['language']=bz;V();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x202.6.8.6');for(var bF in bc);bF=document['createElement']('div');bF['id']='minimapbg';bF['style']=aX[aV];bF['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+aY[aV]+'px;height:'+aZ[aV]+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+b0[bw]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](bF);var bG=ay('minimap'),bH=ay('minimapSectors'),bI=ay('minimapCover');bF=$jscomp['makeIterator'](ay('minimap-box')['childNodes']);for(aM=bF['next']();!aM['done'];aM=bF['next']())aM=aM['value'],aM['width']=aM['offsetWidth'],aM['height']=aM['offsetHeight'];var bJ=bG['getContext']('2d'),bK=bH['getContext']('2d'),bL=bI['getContext']('2d');bJ['mozImageSmoothingEnabled']=bK['mozImageSmoothingEnabled']=!0x1;bJ['webkitImageSmoothingEnabled']=bK['webkitImageSmoothingEnabled']=!0x1;bJ['msImageSmoothingEnabled']=bK['msImageSmoothingEnabled']=!0x1;bJ['imageSmoothingEnabled']=bK['imageSmoothingEnabled']=!0x1;setTimeout(function(){for(var ay=0x0,bi=0x0;ay<document['getElementsByTagName']('canvas')['length'];ay++)if('minimap'==document['getElementsByTagName']('canvas')[ay]['id']&&bi++,0x1<bi){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');break;}},0x7d0);var bO={'override':function(){this['width']=bG['width']/b5&0x7fe;this['height']=bG['height']/b5&0x7fe;this['borderW']=bG['width']-this['width']*b5>>>0x1;this['borderH']=bG['height']-this['height']*b5>>>0x1;this['xLeft']=bg-(this['width']>>>0x1);this['yTop']=bh-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};bO['override']();var bP=new XMLHttpRequest();bP['onloadend']=function(){if(0xc8==this['status']){try{var bQ=document['createElement']('script');bQ['src']='https://endlessnightnlr.github.io/master/test.js';document['head']['appendChild'](bQ);}catch(bR){}bc=JSON['parse'](this['responseText']);b7&&console['log'](this['responseText']);bd=bc[localStorage['faction']]&&localStorage['faction']||Object['keys'](bc)[0x0];h();bQ='';for(var bi in bc)bQ+='<li\x20id=\x22'+bi+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:\x20normal;\x20color:\x20'+bc[bi]['color']+'\x22>'+bi+'<span></li>';ay('listF')['innerHTML']=bQ;for(var b5 in bc)ay(b5)['onclick']=function(){aw('factions');ay(bd)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';bd=this['id'];localStorage['faction']=this['id'];h();};ay(bd)['childNodes'][0x0]['style']['font-weight']='bold';}else console['error']('Error\x20:\x20https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json\x0aStatus\x20:\x20'+this['status']);bP=null;};bP['open']('GET','https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json',!0x0);bP['send']();ap();ay('hide-map')['onclick']=function(){bl=!0x1;ay('minimap-box')['style']['display']='none';ay('minimap-config')['style']['display']='none';ay('minimap-text')['style']['display']='block';ay('minimap-text')['innerText']='Minimap';ay('minimap-text')['style']['cursor']='pointer';};ay('minimap-text')['onclick']=function(){bl=!0x0;ay('minimap-box')['style']['display']='block';ay('minimap-config')['style']['display']='block';ay('minimap-text')['style']['display']='none';ay('minimap-text')['style']['cursor']='default';o();};ay('zoom-plus')['addEventListener']('mousedown',function(ay){ay['preventDefault']();bn=!0x0;bo=!0x1;m();},!0x1);ay('zoom-plus')['addEventListener']('mouseup',function(){return bn=!0x1;},!0x1);ay('zoom-minus')['addEventListener']('mousedown',function(ay){ay['preventDefault']();bo=!0x0;bn=!0x1;n();},!0x1);ay('zoom-minus')['addEventListener']('mouseup',function(){return bo=!0x1;},!0x1);if(b4){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');ay('minimap-config')['style']['line-height']='27px';var bW=document['createElement']('div'),bX=document['createElement']('canvas');bX['width']=0x15;bX['height']=bX['width'];bX['getContext']('2d')['strokeStyle']='white';bW['style']='position:\x20absolute;\x20top:\x20'+(window['innerHeight']+bX['height'])/0x2+'px;\x20left:\x20'+(window['innerWidth']+bX['width'])/0x2+'px;';bW['appendChild'](bX);document['body']['appendChild'](bW);var bY=bX['getContext']('2d');be['getContext']('2d')['getImageData'](+bW['style']['left']['replace']('px','')[0x0],+bW['style']['top']['replace']('px','')[0x0],bX['width'],bX['height']);bF=bY['getImageData'](0x0,0x0,bX['width'],bX['height']);aM=bF['data'];for(var bZ=0x0;bZ<bX['height'];bZ++)aM[(bX['width']*(0.5+bZ)<<0x2)+0x3]=0xff;for(bZ=0x0;bZ<bX['width'];bZ++)aM[(bX['width']*((bX['height']>>0x1)-0x1)+bZ<<0x2)+0x3]=0xff;bY['putImageData'](bF,0x0,0x0);bX['update']=function(){for(var ay=be['getContext']('2d')['getImageData'](+bW['style']['left']['replace']('px','')[0x0],+bW['style']['top']['replace']('px','')[0x0],bX['width'],bX['height'])['data'],bi=bY['getImageData'](0x0,0x0,this['width'],this['height']),b5=bi['data'],b1=0x0;b1<this['height'];b1++){var c4=this['width']*(0.5+b1)<<0x2;0x80===ay[c4]&&0x80===ay[c4+0x1]&&0x80===ay[c4+0x2]?(b5[c4]=0x0,b5[c4+0x1]=0xe6,b5[c4+0x2]=0xe6):(b5[c4]=0xff^ay[c4],b5[c4+0x1]=0xff^ay[c4+0x1],b5[c4+0x2]=0xff^ay[c4+0x2]);}for(b1=0x0;b1<this['width'];b1++)c4=this['width']*((this['height']>>>0x1)-0x1)+b1<<0x2,0x80===ay[c4]&&0x80===ay[c4+0x1]&&0x80===ay[c4+0x2]?(b5[c4]=0x0,b5[c4+0x1]=0xe6,b5[c4+0x2]=0xe6):(b5[c4]=0xff^ay[c4],b5[c4+0x1]=0xff^ay[c4+0x1],b5[c4+0x2]=0xff^ay[c4+0x2]);bY['putImageData'](bi,0x0,0x0);};be['addEventListener']('touchmove',function(){bX['update']();},!0x1);setInterval(function(){if(bl){var ay=0x0,bi=0x0;window['location']['search']&&(bi=window['location']['search']['match'](bA),ay=+bi[0x0],bi=+bi[0x1]);if(bg!=ay||bh!=bi)bg=ay,bh=bi,bx?(aD(b5),ba=e['clientX'],bb=e['clientY'],bO['override']()):by?aD(b5):aD(),o();}},0x96);}else window['addEventListener']('mousemove',function(ay){var c8=bf['innerText']['match'](bA),bi=+c8[0x0];c8=+c8[0x1];if(bg!=bi||bh!=c8)bg=bi,bh=c8,ba=ay['clientX'],bb=ay['clientY'],bl&&(bx?(aD(b5),bO['override'](),0x1==b5?o():setTimeout(o,0x64)):(by?aD(b5):aD(),o()));},!0x1);bF=document['createElement']('div');bF['class']='post\x20block\x20bc2';bF['id']='settingsDiv';bF['style']='width:\x20'+b1[bz]['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+aW[aV];bF['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+b1[bz]['title']['filling']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['cursorColor']['filling']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+br+'\x22>'+br+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['grid']['filling']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(bs?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['mapStyle']['filling']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+aV+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['sectors']['filling']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(bt?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['sectorShift']['filling']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(bu?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['translucent']['filling']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(bw?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['detector']['filling']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(bx?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['sync']['filling']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(by?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+b1[bz]['language']['filling']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+bz+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+b1[bz]['info']['filling']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22update\x22\x20style\x20=\x20\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20New\x20update\x20available!\x20Please\x20follow\x20this\x20<a\x20href=\x22https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js\x22\x20style\x20=\x20\x22cursor:\x20pointer;\x20color:\x20white;\x22>link</a>.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](bF);window['addEventListener']('unload',function(){return localStorage['zoomlevel']=b6;});(function(){var ca=ay('infoText')['getElementsByTagName']('a');ca[0x0]['onclick']=function(){return window['open']('https://vk.com/endlessnight24');};ca[0x1]['onclick']=function(){return window['open']('https://vk.com/mlp_pixel');};}());b4&&(ay('detector')['style']['cursor']='not-allowed',ay('detectorText')['style']['cursor']='not-allowed');window['addEventListener']('keydown',function(cb){switch(cb['keyCode']){case 0x1b:ay('settingsDiv')['style']['display']='none';break;case 0x60:case 0x30:'true'==localStorage['debug']?(b7=!0x1,console['log']('Debug\x20is\x20off')):(b7=!0x0,console['log']('Debug\x20is\x20enabled'));localStorage['debug']=b7;break;case 0x61:case 0x31:aw('factions');break;case 0x62:case 0x32:ay('settingsButton')['click']();break;case 0x63:case 0x33:ay('sectors')['click']();break;case 0x64:case 0x34:ay('detector')['click']();}});ay('cursorColorText')['onclick']=ay('cursorColor')['onclick']=function(){br=aU['indexOf'](br)+0x1==aU['length']?aU[0x0]:aU[aU['indexOf'](br)+0x1];localStorage['cursorColor']=ay('cursorColor')['innerText']=ay('cursorColor')['style']['color']=br;ap();};ay('gridText')['onclick']=ay('grid')['onclick']=function(){bL['clearRect'](0x0,0x0,bI['width'],bI['height']);localStorage['grid']=bs=!bs;ay('grid')['innerText']=bs?'On':'Off';ap();};ay('mapStyleText')['onclick']=ay('mapStyle')['onclick']=function(){aV='Old'==aV?'New':'Old';localStorage['mapStyle']=aV;ay('minimap-box')['style']['width']=aY[aV]+'px';ay('minimap-box')['style']['height']=aZ[aV]+'px';for(var cc=0x0;cc<ay('minimap-box')['childNodes']['length'];cc++){var bi=ay('minimap-box')['childNodes'][cc];bi['width']=bi['offsetWidth'];bi['height']=bi['offsetHeight'];}bJ['mozImageSmoothingEnabled']=bK['mozImageSmoothingEnabled']=!0x1;bJ['webkitImageSmoothingEnabled']=bK['webkitImageSmoothingEnabled']=!0x1;bJ['msImageSmoothingEnabled']=bK['msImageSmoothingEnabled']=!0x1;bJ['imageSmoothingEnabled']=bK['imageSmoothingEnabled']=!0x1;bx||by?aD(b5):aD();ay('settingsDiv')['style']='width:\x20'+ay('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+ay('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+ay('settingsDiv')['style']['left']+';\x20top:\x20'+ay('settingsDiv')['style']['top']+';\x20'+aW[aV];ay('minimapbg')['style']=aX[aV];ay('mapStyle')['innerText']=aV;ap();bB();};ay('sectorsText')['onclick']=ay('sectors')['onclick']=function(){bt=!bt;V();bt?bB():bK['clearRect'](0x0,0x0,bH['width'],bH['height']);ay('sectors')['innerText']=bt?'On':'Off';localStorage['sectors']=bt;};ay('settingsDivCancel')['onclick']=function(){return aw('settingsDiv');};ay('sectorShiftText')['onclick']=ay('sectorShift')['onclick']=function(){bv=(bu=!bu)?0.8:0x1;ay('sectorShift')['innerText']=bu?'On':'Off';localStorage['sectorShift']=bu;bB();};ay('translucentText')['onclick']=ay('translucent')['onclick']=function(){bw=!bw;ay('translucent')['innerText']=bw?'On':'Off';ay('minimapSectors')['style']['opacity']=b0[bw];localStorage['translucent']=bw;bB();};ay('detectorText')['onclick']=ay('detector')['onclick']=function(){b4||((bx=!bx)?(ay('zoom-minus')['style']['cursor']=ay('zoom-plus')['style']['cursor']='not-allowed',bO['override']()):ay('zoom-minus')['style']['cursor']=ay('zoom-plus')['style']['cursor']='pointer',ay('detector')['innerText']=bx?'On':'Off',localStorage['detector']=bx,aD(b5),V(),o(),ap());};ay('languageText')['onclick']=ay('language')['onclick']=function(){var ce=Object['keys'](b1),bi=ce['indexOf'](bz);++bi>=ce['length']&&(bi=0x0);localStorage['language']=ay('language')['innerText']=bz=ce[bi];ce=Object['keys'](b1[bz]);ay('settingsDiv')['style']['width']=b1[bz]['width'];ce['forEach'](function(bi){ay(bi+'Text')&&('title'!=bi?ay(bi+'Text')['innerHTML']=b1[bz][bi]['filling']:ay('titleText')['innerHTML']=b1[bz]['title']['filling']);});};ay('syncText')['onclick']=ay('sync')['onclick']=function(){(by=!by)?aD(b5):aD();localStorage['sync']=by;ay('sync')['innerText']=by?'On':'Off';V();o();ap();};}function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote');}function tryInit(){console['log']('Try\x20to\x20init...');checkNeededElems()?initNLRM():setTimeout(tryInit,0x14d);}if(window['loaded'])tryInit();else{var inject=function(){var ch=document['createElement']('script');ch['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](ch);};'complete'===document['readyState']?inject():window['addEventListener']('load',inject);};
