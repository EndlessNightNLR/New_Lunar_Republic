// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.8.8
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
//
var $jscomp=$jscomp||{};$jscomp['scope']={};$jscomp['arrayIteratorImpl']=function(c){var d=0x0;return function(){return d<c['length']?{'done':!0x1,'value':c[d++]}:{'done':!0x0};};};$jscomp['arrayIterator']=function(e){return{'next':$jscomp['arrayIteratorImpl'](e)};};$jscomp['makeIterator']=function(f){var g='undefined'!=typeof Symbol&&Symbol['iterator']&&f[Symbol['iterator']];return g?g['call'](f):$jscomp['arrayIterator'](f);};function initNLRM(){function h(){var i=''+bb[bc]['data']+(0x1==bb[bc]['type']?'?'+new Date()['getTime']():'');b6&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+bc+'\x0aURL\x20:\x20'+i);bi={};bj={};bk={};bp={};var j=new XMLHttpRequest();j['onloadend']=function(){if(0xc8==this['status']){bi=JSON['parse'](this['responseText']);for(var k in bi)bi[k]['x']*=0x1,bi[k]['y']*=0x1,'grid'===bi[k]['type']?bk[k]=bi[k]:bj[k]=bi[k];var i=$jscomp['makeIterator'](bq['templates']);for(k=i['next']();!k['done'];k=i['next']())r(k['value'],function(){return b6&&console['log']('Img\x20updated');});i=$jscomp['makeIterator'](bq['grids']);for(k=i['next']();!k['done'];k=i['next']())r(k['value'],function(){return b6&&console['log']('Grid\x20updated');});b6&&console['log']('Update\x20completed',bi,bj,bk);}else console['error']('Error\x20:\x20'+bb[bc]['data']+'\x0aStatus\x20:\x20'+this['status']);};j['open']('GET',i);j['send']();}function m(){bn&&!by&&(bz&&(localStorage['sync']=bz=!0x1,b5=b4,aq('sync')['innerText']=bz?'On':'Off',V()),b5*=1.1,0x20<b5?b5=0x20:(by?bT['updateD']():bz?aC(b4):aC(),ah(),bD(),setTimeout(m,0x32)));}function n(){bo&&!by&&(bz&&(localStorage['sync']=bz=!0x1,b5=b4,aq('sync')['innerText']=bz?'On':'Off',V()),b5/=1.1,0x1>b5?b5=0x1:(by?bT['updateD']():bz?aC(b4):aC(),ah(),o(),setTimeout(n,0x32)));}function o(){if(bl&&bj){bq['grids']=[];bq['templates']=[];for(var p in bj)bg['between'](bj[p]['x']-b1,bj[p]['x']+bj[p]['width']+b1)&&bh['between'](bj[p]['y']-b2,bj[p]['y']+bj[p]['height']+b2)&&(bp[p]?bq['templates'][bq['templates']['length']]=p:(r(p),delete bj[p]));if(bu)for(var q in bk)bg['between'](bk[q]['x']-b1,bk[q]['x']+bk[q]['width']+b1)&&bh['between'](bk[q]['y']-b2,bk[q]['y']+bk[q]['height']+b2)&&(bp[q]?bq['grids'][bq['grids']['length']]=q:(r(q),delete bk[q]));0x0===bq['grids']['length']&&0x0===bq['templates']['length']?!bm||bn||bo||(bm=!0x1,bJ['style']['display']='none',aq('minimap-text')['style']['display']='block',aq('minimap-text')['innerText']='There\x27s\x20nothing\x20here'):(bm||(bm=!0x0,bJ['style']['display']='block',aq('minimap-text')['style']['display']='none'),bE&&(bE=!0x1,window['requestAnimationFrame'](function(){bD();bE=!0x0;})));}}function r(s,t){var u=new Image(),v=0x0;u['crossOrigin']='';u['src']=''+bb[bc]['images']+s+'.png';u['onerror']=function(){console['log']('Download\x20failed\x0aName\x20:\x20'+s);'grid'===bi[s]['type']?delete bk[s]:delete bj[s];delete bi[s];delete bp[s];};u['onload']=function(){if(0x180>=u['width']&&0x180>=u['height'])bp[s]=u,'grid'===N[s]['type']?bk[s]=N[s]:bj[s]=N[s],b6&&console['log'](N,'\x0aName\x20:\x20'+s+'\x0aType\x20:\x20'+('grid'===N[s]['type']?'grid':'image'));else{var w=document['createElement']('canvas'),x=w['getContext']('2d');w['width']=u['width'];w['height']=u['height'];x['drawImage'](u,0x0,0x0,u['width'],u['height']);var y=u['width'],z=u['height'];x=x['getImageData'](0x0,0x0,y,z)['data'];for(var A=performance['now'](),B=0x0;0x80<z-B;B+=0x100)for(var C=0x0;0x80<y-C;C+=0x100){for(var D=s+'_#_'+C/0x100+'_'+B/0x100,E=0x100<=y-C?0x100:y-C,F=0x100<=z-B?0x100:z-B,G=E<<0x2,H=G*F,I=new Uint8ClampedArray(H),J=0x0,K=0x0,L=null,M=0x0,h=0x0,O=y<<0x2,P=y*B+C<<0x2,Q=0x0,R,S;h!==F;h+=0x1)for(R=P+h*O,S=Q+G;Q!==S;)I[Q]=x[R],Q+=0x1,R+=0x1;for(h=0x3;h<H;h+=0x4)if(0x0!==I[h]){L=~~((h+0x1)/G);break;}if(null!==L){--H;for(h=L*G;H>h;H-=0x4)if(0x0!==I[H]){M=(H+0x1)/G;M=F-(~~M===M?M:~~M+0x1);break;}H=0x3;h=L*G;O=(E-M)*G;T:for(;H<G;H+=0x4)for(P=H+h;P<O;P+=G)if(0x0!==I[P]){J=H>>>0x2;break T;}H=G-0x1;h=L*G;O=(E-M)*G;P=J<<0x2;U:for(;H>P;H-=0x4)for(Q=H+h;Q<O;Q+=G)if(0x0!==I[Q]){K=E-(H+0x1>>>0x2);break U;}N[D]={'x':N[s]['x']+C,'y':N[s]['y']+B};bp[D]=document['createElement']('canvas');0x0!==L||0x0!==M||0x0!==J||0x0!==K?(N[D]['width']=bp[D]['width']=E-J-K,N[D]['height']=bp[D]['height']=F-L-M,bp[D]['getContext']('2d')['drawImage'](w,C+J,B+L,bp[D]['width'],bp[D]['height'],0x0,0x0,bp[D]['width'],bp[D]['height']),N[D]['x']+=J,N[D]['y']+=L):(N[D]['width']=bp[D]['width']=E,N[D]['height']=bp[D]['height']=F,bp[D]['getContext']('2d')['drawImage'](w,C,B,bp[D]['width'],bp[D]['height'],0x0,0x0,bp[D]['width'],bp[D]['height']));'grid'===N[s]['type']?bk[D]=N[D]:bj[D]=N[D];v+=0x1;}}A=performance['now']()-A;b6&&console['log'](N,'\x0aName\x20:\x20'+s+'\x0aType\x20:\x20'+('grid'===N[s]['type']?'grid':'image')+'\x0aChunks\x20:\x20'+v+'\x0aTime\x20:\x20'+A);delete N[s];delete bp[s];}t&&t();o();};}function V(){bD=by?bu?function(){a6();a0(b4);}:a6:bz?bu?function(){W(b4);a0(b4);}:function(){return W(b4);}:bu?function(){W();a0();}:W;}function W(X){X=void 0x0===X?b5:X;bN['clearRect'](0x0,0x0,bK['width'],bK['height']);for(var Y=$jscomp['makeIterator'](bq['templates']),Z=Y['next']();!Z['done'];Z=Y['next']())Z=Z['value'],bN['drawImage'](bp[Z],~~((bj[Z]['x']-b7)*X),~~((bj[Z]['y']-b8)*X),~~(bp[Z]['width']*X),~~(bp[Z]['height']*X));}function a0(a1){a1=void 0x0===a1?b5:a1;bO['clearRect'](0x0,0x0,bL['width'],bL['height']);var a2=a1*bw;if(by){a1=(bT['xLeft']-bg)/bw+bg;var a3=(bT['yTop']-bh)/bw+bh;}else a1=(b7-bg)/bw+bg,a3=(b8-bh)/bw+bh;for(var a4=$jscomp['makeIterator'](bq['grids']),a5=a4['next']();!a5['done'];a5=a4['next']())a5=a5['value'],bO['drawImage'](bp[a5],~~((bk[a5]['x']-a1)*a2),~~((bk[a5]['y']-a3)*a2),~~(bp[a5]['width']*a2),~~(bp[a5]['height']*a2));}function a6(a7){a7=void 0x0===a7?b4:a7;for(var a8,a9=0x0,aa=a7*a7;0x1<aa;aa>>>=0x1)a9++;a8=a9>>>0x1;br['canvas']['width']=bT['width'];br['canvas']['height']=bT['height'];aa=$jscomp['makeIterator'](bq['templates']);for(var ab=aa['next']();!ab['done'];ab=aa['next']())ab=ab['value'],br['ctx']['drawImage'](bp[ab],bT['xLeft']-bj[ab]['x']-0x1,bT['yTop']-bj[ab]['y']-0x1,bT['width'],bT['height'],0x0,0x0,bT['width'],bT['height']);aa=br['ctx']['getImageData'](0x0,0x0,br['canvas']['width'],br['canvas']['height']);ab=aa['data'];a8=be['getImageData'](~~(b9-(bT['width']<<a8>>>0x1)),~~(ba-(bT['height']<<a8>>>0x1)),~~(bT['width']*a7),~~(bT['height']*a7))['data'];for(var ac=bT['sizeRGBA'],ad,ae=b4<<0x2;ac-=bT['widthRGBA'];){ad=ac<<a9;for(var af=ac,h=ac+bT['widthRGBA'];(af+=0x4)<h;)0x0!==a8[(ad+=ae)+0x3]&&(av(ab[af],ab[af+0x1],ab[af+0x2],a8[ad],a8[ad+0x1],a8[ad+0x2])?ab[af]=ab[af+0x1]=ab[af+0x2]=~~((ab[af]+ab[af+0x1]+ab[af+0x2])/0x3):(ab[af]=0xff,ab[af+0x1]=ab[af+0x2]=0x0));}0x1===b4?bN['putImageData'](aa,0x0,0x0):(br['ctx']['putImageData'](aa,0x0,0x0),bN['clearRect'](0x0,0x0,bK['width'],bK['height']),bN['drawImage'](br['canvas'],~~(bT['borderW']-a7),~~(bT['borderH']-a7),~~(bT['width']*a7),~~(bT['height']*a7)));}function ah(ai){ai=void 0x0===ai?b5:ai;bP['clearRect'](0x0,0x0,bM['width'],bM['height']);if(by||bz)ai=b4;if(!(0x4>=ai)){if(bt&&4.6<ai){bP['beginPath']();var aj=bK['width']+ai,ak=bK['height']+ai,al=(bK['width']>>>0x1)%ai-ai,am=(bK['height']>>>0x1)%ai-ai;bP['lineWidth']=0x1;for(var an=0x0;an<=aj;an+=ai)bP['moveTo'](an+al,am),bP['lineTo'](an+al,ak+am);for(an=0x0;an<=ak;an+=ai)bP['moveTo'](al,an+am),bP['lineTo'](aj+al,an+am);bP['strokeStyle']='rgb(20,20,20)';bP['stroke']();}bP['beginPath']();bP['lineWidth']=ai/0x3;bP['strokeStyle']=bs;bP['rect'](bK['width']>>>0x1,bK['height']>>>0x1,ai,ai);bP['stroke']();}}function ao(ap){'string'===typeof ap?(ap=document['getElementById'](ap),ap['style']['display']='none'===ap['style']['display']?'block':'none'):'object'===typeof ap&&(ap['style']['display']='none'===ap['style']['display']?'block':'none');}function aq(ar){return document['getElementById'](ar);}function as(at){at=at||window['event'];if(at['wheelDelta']){var aq=at['wheelDelta']/0x78;window['opera']&&(aq=~aq+0x1);}else at['detail']&&(aq=-at['detail']/0x3);0x1==aq?b4<<=0x1:b4>>>=0x1;0x40<b4?b4=0x40:0x1>b4?b4=0x1:by?setTimeout(function(){bT['updateD']();aC(b4);a6();bu&&a0(b4);ah();},0xc8):bz&&(aC(b4),ah(),o());}function av(aw,aq,ay,az,aA,aB){return 0x1e>(aw>az?aw-az:az-aw)&&0x1e>(aq>aA?aq-aA:aA-aq)&&0x1e>(ay>aB?ay-aB:aB-ay);}function aC(aq){aq=void 0x0===aq?b5:aq;b1=(b7=bK['width']>>>0x1)/aq;b2=(b8=bK['height']>>>0x1)/aq;b7=bg-b7/aq;b8=bh-b8/aq;}function aE(aq,aG,aH){0x0>aG||0x0>aH||bd['dispatchEvent'](new MouseEvent(aq,{'clientX':aG,'clientY':aH,'bubbles':!0x0}));}function aI(aq,aK){return Math['round'](aq-0.5+Math['random']()*(aK-aq+0x1));}(function G(){aq('timer')?aq('timer')['style']['z-index']=0x5:setTimeout(G,0x14d);}());(function b(){aq('message')?aq('message')['remove']():setTimeout(b,0x14d);}());var aL=document['createElement']('link');aL['rel']='stylesheet';aL['href']='https://endlessnightnlr.github.io/master/MLPP/style.css';document['head']['appendChild'](aL);aL=document['createElement']('div');aL['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';aL['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/master/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](aL);aq('settingsButton')['addEventListener']('click',function(){var aM=aq('settingsDiv');ao(aM);'block'===aM['style']['display']&&(aM['style']['left']=(window['innerWidth']-aM['offsetWidth']>>>0x1)+'px',aM['style']['top']=(window['innerHeight']-aM['offsetHeight']>>>0x1)+'px');});Number['prototype']['between']=function(aq,aO){return this>aq&&this<aO;};window['testPerformance']=function(){console['log']('Start\x20testing');var aq=null,aQ=!0x0,aR=bd['width']>>>0x1,aS=bd['height']>>>0x1;setTimeout(function(){return clearInterval(aq);},0x1770);aq=setInterval(function(){aQ?(aQ=!0x1,aE('mousemove',aR+aI(0x0,aR>>>0x1),aS+aI(0x0,aS>>>0x1))):(aQ=!0x0,aE('mousemove',aR-aI(0x0,aR>>>0x1),aS-aI(0x0,aS>>>0x1)));},0x32);};var aT='black\x20gray\x20white\x20Fuchsia\x20red\x20yellow\x20lime\x20springGreen\x20aqua\x20blue'['split']('\x20'),aU='New',aV={'Old':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','New':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;'},aW={'Old':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;','New':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},aX={'Old':0x1a4,'New':0x118},aY={'Old':0x12c,'New':0xc8},aZ={'false':0x1,'true':0.5},b0={'ru':{'width':'280px','title':{'filling':'MLP\x20Pixel\x20миникарта:\x20настройки'},'cursorColor':{'filling':'Цвет\x20курсора:\x20','true':'On','false':'Off'},'grid':{'filling':'Сетка:\x20','true':'On','false':'Off'},'mapStyle':{'filling':'Стиль\x20миникарты:\x20','New':'New','Old':'Old'},'sectors':{'filling':'Сектора:\x20','true':'On','false':'Off'},'sectorShift':{'filling':'Сдвиг\x20секторов:\x20','true':'On','false':'Off'},'translucent':{'filling':'Прозрачность\x20секторов:\x20','true':'On','false':'Off'},'detector':{'filling':'Детектор\x20ошибок:\x20','true':'On','false':'Off'},'language':{'filling':'Язык:\x20'},'sync':{'filling':'Синхронизация\x20зума:\x20'},'info':{'filling':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x202.6.8.8'},'stat':{'filling':'Поставленные\x20пиксели:\x20'}},'en':{'width':'250px','title':{'filling':'MLP\x20Pixel\x20minimap:\x20settings'},'cursorColor':{'filling':'Cursor\x20color:\x20','true':'On','Off':'Off'},'grid':{'filling':'Grid:\x20','true':'On','Off':'Off'},'mapStyle':{'filling':'Minimap\x20style:\x20','New':'New','Old':'Old'},'sectors':{'filling':'Sectors:\x20','true':'On','false':'Off'},'sectorShift':{'filling':'Sectors\x20shift:\x20','true':'On','false':'Off'},'translucent':{'filling':'Translucent:\x20','true':'On','false':'Off'},'detector':{'filling':'Error\x20detector:\x20','true':'On','false':'Off'},'language':{'filling':'Language:\x20'},'sync':{'filling':'Zoom\x20sync:\x20'},'info':{'filling':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x202.6.8.8'},'stat':{'filling':'Set\x20pixels:\x20'}}},b1=null,b2=null,b3=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),b4=0x1,b5=0x5,b6=!0x1,b7=void 0x0,b8=void 0x0,b9=void 0x0,ba=void 0x0,bb={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2}},bc='New\x20Lunar\x20Republic',bd=aq('canvas'),be=bd['getContext']('2d'),bf=aq('coordinatesNote'),bg=0x0,bh=0x0,bi,bj,bk,bl=!0x0,bm=!0x0,bn=!0x1,bo=!0x1,bp=[],bq={'grids':[],'templates':[]},br={'switch':!0x1,'canvas':document['createElement']('canvas'),'ctx':void 0x0,'imageData':void 0x0,'data':void 0x0},bs='springGreen',bt=!0x1,bu=!0x1,bv=!0x1,bw=0x1,bx=!0x1,by=!0x1,bz=!0x1,bA=(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),bB={'pixels':0x0},bC=new RegExp(/-?\d+/g),bD,bE=!0x0;b4=window['location']['href']['match'](bC)&&0x3==window['location']['href']['match'](bC)['length']?+window['location']['href']['match'](bC)[0x2]:0x1;b0[bA]||(bA='en');br['ctx']=br['canvas']['getContext']('2d');bd['addEventListener']?bd['addEventListener']('mousewheel',as,!0x1):bd['attachEvent']&&bd['attachEvent']('onmousewheel',as);if(/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',function(aq){0x3==aq['wheelDelta']?b4<<=0x1:b4>>>=0x1;0x40<b4?b4=0x40:0x1>b4?b4=0x1:bz&&!by?(aC(b4),ah(),o()):by&&(aC(b4),bT['updateD'](),setTimeout(function(){a6();},0xc8),ah(),bu&&a0());});}catch(bG){}localStorage['cursorColor']?bs=localStorage['cursorColor']:localStorage['cursorColor']=bs;b6='true'==localStorage['debug'];bt='true'==localStorage['grid'];'Old'==localStorage['mapStyle']&&(aU='Old');bu='true'==localStorage['sectors'];'true'==localStorage['sectorShift']&&(bv=!0x0,bw=0.8);bx='true'==localStorage['translucent'];localStorage['mobile']&&(b3=localStorage['mobile']);'true'==localStorage['detector']&&(by=b3?localStorage['detector']=!0x1:!0x0);bz='true'==localStorage['sync'];localStorage['zoomlevel']?b5=+localStorage['zoomlevel']:localStorage['zoomlevel']=b5;localStorage['language']?b0[localStorage['language']]?bA=localStorage['language']:bA='en':localStorage['language']=bA;if(localStorage['statistics'])try{bB=JSON['parse'](atob(localStorage['statistics']));}catch(bH){localStorage['statistics']=btoa(JSON['stringify'](bB));}else localStorage['statistics']=btoa(JSON['stringify'](bB));V();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x202.6.8.8');for(var bI in bb);bI=document['createElement']('div');bI['id']='minimapbg';bI['style']=aW[aU];bI['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+aX[aU]+'px;height:'+aY[aU]+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+aZ[bx]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](bI);aq('minimap-text');var bJ=aq('minimap-box'),bK=aq('minimap'),bL=aq('minimapSectors'),bM=aq('minimapCover');bI=$jscomp['makeIterator'](bJ['childNodes']);for(aL=bI['next']();!aL['done'];aL=bI['next']())aL=aL['value'],aL['width']=aL['offsetWidth'],aL['height']=aL['offsetHeight'];var bN=bK['getContext']('2d'),bO=bL['getContext']('2d'),bP=bM['getContext']('2d');bN['mozImageSmoothingEnabled']=bO['mozImageSmoothingEnabled']=!0x1;bN['webkitImageSmoothingEnabled']=bO['webkitImageSmoothingEnabled']=!0x1;bN['msImageSmoothingEnabled']=bO['msImageSmoothingEnabled']=!0x1;bN['imageSmoothingEnabled']=bO['imageSmoothingEnabled']=!0x1;setTimeout(function(){for(var aq=0x0,bR=0x0,bS=document['getElementsByTagName']('canvas');aq<bS['length'];aq++)if('minimap'==bS[aq]['id']&&bR++,0x1<bR){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');break;}},0x7d0);var bT={'updateM':function(){this['HalfW']=bK['width']>>>0x1;this['HalfH']=bK['height']>>>0x1;},'updateD':function(){this['width']=bK['width']/b4&0x7fe;this['height']=bK['height']/b4&0x7fe;this['borderW']=bK['width']-this['width']*b4>>>0x1;this['borderH']=bK['height']-this['height']*b4>>>0x1;this['xLeft']=bg-(this['width']>>>0x1);this['yTop']=bh-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};bT['updateM']();bT['updateD']();var bU=new XMLHttpRequest();bU['onloadend']=function(){if(0xc8==this['status']){try{var bV=document['createElement']('script');bV['src']='https://endlessnightnlr.github.io/master/test.js';document['head']['appendChild'](bV);}catch(bW){}bb=JSON['parse'](this['responseText']);b6&&(console['log']('Factions\x20:'),console['log'](bb));bc=bb[localStorage['faction']]&&localStorage['faction']||Object['keys'](bb)[0x0];h();bV='';for(var bX in bb)bV+='<li\x20id=\x22'+bX+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:\x20normal;\x20color:\x20'+bb[bX]['color']+'\x22>'+bX+'<span></li>';aq('listF')['innerHTML']=bV;for(var bY in bb)aq(bY)['onclick']=function(){ao('factions');aq(bc)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=bc=this['id'];h();};aq(bc)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json\x0aStatus\x20:\x20'+this['status']);bU=null;};bU['open']('GET','https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json',!0x0);bU['send']();ah();aq('hide-map')['onclick']=function(){bl=!0x1;bJ['style']['display']='none';aq('minimap-config')['style']['display']='none';aq('minimap-text')['style']['display']='block';aq('minimap-text')['innerText']='Minimap';aq('minimap-text')['style']['cursor']='pointer';};aq('minimap-text')['onclick']=function(){bl=!0x0;bJ['style']['display']='block';aq('minimap-config')['style']['display']='block';aq('minimap-text')['style']['display']='none';aq('minimap-text')['style']['cursor']='default';o();};aq('zoom-plus')['addEventListener']('mousedown',function(aq){aq['preventDefault']();bn=!0x0;bo=!0x1;m();},!0x1);aq('zoom-plus')['addEventListener']('mouseup',function(){return bn=!0x1;},!0x1);aq('zoom-minus')['addEventListener']('mousedown',function(aq){aq['preventDefault']();bo=!0x0;bn=!0x1;n();},!0x1);aq('zoom-minus')['addEventListener']('mouseup',function(){return bo=!0x1;},!0x1);if(b3){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');aq('minimap-config')['style']['line-height']='27px';var c1=document['createElement']('div'),c2=document['createElement']('canvas');c2['width']=0x15;c2['height']=c2['width'];c2['getContext']('2d')['strokeStyle']='white';c1['style']='position:\x20absolute;\x20top:\x20'+(window['innerHeight']+c2['height'])/0x2+'px;\x20left:\x20'+(window['innerWidth']+c2['width'])/0x2+'px;';c1['appendChild'](c2);document['body']['appendChild'](c1);var c3=c2['getContext']('2d');bd['getContext']('2d')['getImageData'](+c1['style']['left']['replace']('px','')[0x0],+c1['style']['top']['replace']('px','')[0x0],c2['width'],c2['height']);bI=c3['getImageData'](0x0,0x0,c2['width'],c2['height']);aL=bI['data'];for(var c4=0x0;c4<c2['height'];c4++)aL[(c2['width']*(0.5+c4)<<0x2)+0x3]=0xff;for(c4=0x0;c4<c2['width'];c4++)aL[(c2['width']*((c2['height']>>0x1)-0x1)+c4<<0x2)+0x3]=0xff;c3['putImageData'](bI,0x0,0x0);c2['update']=function(){for(var aq=bd['getContext']('2d')['getImageData'](+c1['style']['left']['replace']('px','')[0x0],+c1['style']['top']['replace']('px','')[0x0],c2['width'],c2['height'])['data'],c6=c3['getImageData'](0x0,0x0,this['width'],this['height']),c7=c6['data'],b4=0x0;b4<this['height'];b4++){var bi=this['width']*(0.5+b4)<<0x2;0x80===aq[bi]&&0x80===aq[bi+0x1]&&0x80===aq[bi+0x2]?(c7[bi]=0x0,c7[bi+0x1]=0xe6,c7[bi+0x2]=0xe6):(c7[bi]=0xff^aq[bi],c7[bi+0x1]=0xff^aq[bi+0x1],c7[bi+0x2]=0xff^aq[bi+0x2]);}for(b4=0x0;b4<this['width'];b4++)bi=this['width']*((this['height']>>>0x1)-0x1)+b4<<0x2,0x80===aq[bi]&&0x80===aq[bi+0x1]&&0x80===aq[bi+0x2]?(c7[bi]=0x0,c7[bi+0x1]=0xe6,c7[bi+0x2]=0xe6):(c7[bi]=0xff^aq[bi],c7[bi+0x1]=0xff^aq[bi+0x1],c7[bi+0x2]=0xff^aq[bi+0x2]);c3['putImageData'](c6,0x0,0x0);};bd['addEventListener']('touchmove',function(){window['requestAnimationFrame'](function(){c2['update']();});},!0x1);setInterval(function(){if(bl){var aq=0x0,cb=0x0;window['location']['search']&&(cb=window['location']['search']['match'](bC),aq=+cb[0x0],cb=+cb[0x1]);if(bg!=aq||bh!=cb)bg=aq,bh=cb,b9=e['clientX'],ba=e['clientY'],bl&&(by?(aC(b4),bT['updateD'](),0x1==b4?o():setTimeout(o,0x64)):(bz?aC(b4):aC(),o()));}},0x96);}else window['addEventListener']('mousemove',function(aq){var cd=bf['innerText']['match'](bC),ce=+cd[0x0];cd=+cd[0x1];if(bg!=ce||bh!=cd)bg=ce,bh=cd,b9=aq['clientX'],ba=aq['clientY'],bl&&(by?(aC(b4),bT['updateD'](),0x1==b4?o():setTimeout(o,0x64)):(bz?aC(b4):aC(),o()));},!0x1);bI=document['createElement']('div');bI['class']='post\x20block\x20bc2';bI['id']='settingsDiv';bI['style']='width:\x20'+b0[bA]['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+aV[aU];bI['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+b0[bA]['title']['filling']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['cursorColor']['filling']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+bs+'\x22>'+bs+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['grid']['filling']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(bt?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['mapStyle']['filling']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+aU+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['sectors']['filling']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(bu?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['sectorShift']['filling']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(bv?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['translucent']['filling']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(bx?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['detector']['filling']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(by?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['sync']['filling']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(bz?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['language']['filling']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+bA+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22statText\x22\x20class\x20=\x20\x22textButton\x22>'+b0[bA]['stat']['filling']+'</span><span\x20id\x20=\x20\x22stat\x22\x20style\x20=\x20\x22textButton\x22>'+bB['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+b0[bA]['info']['filling']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22update\x22\x20style\x20=\x20\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20New\x20update\x20available!\x20Please\x20follow\x20this\x20<a\x20href=\x22https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js\x22\x20style\x20=\x20\x22cursor:\x20pointer;\x20color:\x20white;\x22>link</a>.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](bI);window['addEventListener']('unload',function(){return localStorage['zoomlevel']=b5;});(function(){var cf=aq('infoText')['getElementsByTagName']('a');cf[0x0]['onclick']=function(){return window['open']('https://vk.com/endlessnight24');};cf[0x1]['onclick']=function(){return window['open']('https://vk.com/mlp_pixel');};}());bd['addEventListener']('click',function(){for(var cg,ch=0x0;ch<bq['templates']['length']&&(cg=bq['templates'][ch],cg=bp[cg]['getContext']('2d')['getImageData'](bg-bj[cg]['x'],bh-bj[cg]['y'],0x1,0x1)['data'],0xff!==cg[0x3]);ch++);ch=aq('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](bC);ch[0x0]*=0x1;ch[0x1]*=0x1;ch[0x2]*=0x1;av(ch[0x0],ch[0x1],ch[0x2],cg[0x0],cg[0x1],cg[0x2])&&0x3==aq('timer')['innerText']&&setTimeout(function(){0x2==aq('timer')['innerText']&&(aq('stat')['innerText']=bB['pixels']++,localStorage['statistics']=btoa(JSON['stringify'](bB)));},0x76c);});b3&&(aq('detector')['style']['cursor']='not-allowed',aq('detectorText')['style']['cursor']='not-allowed');window['addEventListener']('keydown',function(ci){switch(ci['keyCode']){case 0x1b:aq('settingsDiv')['style']['display']='none';break;case 0x60:case 0x30:'true'==localStorage['debug']?(b6=!0x1,console['log']('Debug\x20is\x20off')):(b6=!0x0,console['log']('Debug\x20is\x20enabled'));localStorage['debug']=b6;break;case 0x61:case 0x31:ao('factions');break;case 0x62:case 0x32:aq('settingsButton')['click']();break;case 0x63:case 0x33:aq('sectors')['click']();break;case 0x64:case 0x34:aq('detector')['click']();}});aq('cursorColorText')['onclick']=aq('cursorColor')['onclick']=function(){var cj=aT['indexOf'](bs)+0x1;cj===aT['length']&&(cj=0x0);localStorage['cursorColor']=aq('cursorColor')['innerText']=aq('cursorColor')['style']['color']=bs=aT[cj];ah();};aq('gridText')['onclick']=aq('grid')['onclick']=function(){bP['clearRect'](0x0,0x0,bM['width'],bM['height']);aq('grid')['innerText']=(localStorage['grid']=bt=!bt)?'On':'Off';ah();};aq('mapStyleText')['onclick']=aq('mapStyle')['onclick']=function(){localStorage['mapStyle']=aU='Old'==aU?'New':'Old';bJ['style']['width']=aX[aU]+'px';bJ['style']['height']=aY[aU]+'px';for(var ck=0x0;ck<bJ['childNodes']['length'];ck++){var cl=bJ['childNodes'][ck];cl['width']=cl['offsetWidth'];cl['height']=cl['offsetHeight'];}bN['mozImageSmoothingEnabled']=bO['mozImageSmoothingEnabled']=!0x1;bN['webkitImageSmoothingEnabled']=bO['webkitImageSmoothingEnabled']=!0x1;bN['msImageSmoothingEnabled']=bO['msImageSmoothingEnabled']=!0x1;bN['imageSmoothingEnabled']=bO['imageSmoothingEnabled']=!0x1;by||bz?aC(b4):aC();aq('settingsDiv')['style']='width:\x20'+aq('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+aq('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+aq('settingsDiv')['style']['left']+';\x20top:\x20'+aq('settingsDiv')['style']['top']+';\x20'+aV[aU];aq('minimapbg')['style']=aW[aU];aq('mapStyle')['innerText']=aU;ah();bD();};aq('sectorsText')['onclick']=aq('sectors')['onclick']=function(){bu=!bu;V();bu?bD():bO['clearRect'](0x0,0x0,bL['width'],bL['height']);aq('sectors')['innerText']=bu?'On':'Off';localStorage['sectors']=bu;};aq('settingsDivCancel')['onclick']=function(){return ao('settingsDiv');};aq('sectorShiftText')['onclick']=aq('sectorShift')['onclick']=function(){bw=(bv=!bv)?0.8:0x1;aq('sectorShift')['innerText']=bv?'On':'Off';localStorage['sectorShift']=bv;bD();};aq('translucentText')['onclick']=aq('translucent')['onclick']=function(){bx=!bx;aq('translucent')['innerText']=bx?'On':'Off';aq('minimapSectors')['style']['opacity']=aZ[bx];localStorage['translucent']=bx;bD();};aq('detectorText')['onclick']=aq('detector')['onclick']=function(){b3||((by=!by)?(aq('zoom-minus')['style']['cursor']=aq('zoom-plus')['style']['cursor']='not-allowed',bT['updateD']()):aq('zoom-minus')['style']['cursor']=aq('zoom-plus')['style']['cursor']='pointer',aq('detector')['innerText']=by?'On':'Off',localStorage['detector']=by,aC(b4),V(),o(),ah());};aq('languageText')['onclick']=aq('language')['onclick']=function(){var cm=Object['keys'](b0),cn=cm['indexOf'](bA);++cn>=cm['length']&&(cn=0x0);localStorage['language']=aq('language')['innerText']=bA=cm[cn];cm=Object['keys'](b0[bA]);aq('settingsDiv')['style']['width']=b0[bA]['width'];cm['forEach'](function(cm){aq(cm+'Text')&&('title'!=cm?aq(cm+'Text')['innerHTML']=b0[bA][cm]['filling']:aq('titleText')['innerHTML']=b0[bA]['title']['filling']);});};aq('syncText')['onclick']=aq('sync')['onclick']=function(){(bz=!bz)?aC(b4):aC();localStorage['sync']=bz;aq('sync')['innerText']=bz?'On':'Off';V();o();ah();};}function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote');}function tryInit(){console['log']('Try\x20to\x20init...');checkNeededElems()?initNLRM():setTimeout(tryInit,0x14d);}if(window['loaded'])tryInit();else{var inject=function(){var cp=document['createElement']('script');cp['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](cp);};'complete'===document['readyState']?inject():window['addEventListener']('load',inject);};
