// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.6.8.8
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
//
function initNLRM(){'use strict';//PZ CHANGES
(function specialFirst(){if(cZ('timer'))cZ('timer')['style']['z-index']=0x13;else setTimeout(specialFirst,0x14d);}());(function specialSecond(){if(cZ('message'))cZ('message')['remove']();else setTimeout(specialSecond,0x14d);}());let c=document['createElement']('link');c['rel']='stylesheet';c['href']='https://endlessnightnlr.github.io/master/MLPP/style.css';document['head']['appendChild'](c);let d=document['createElement']('div');d['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/master/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](d);cZ('settingsButton')['addEventListener']('click',()=>{let e=cZ('settingsDiv');cW(e);if(e['style']['display']==='block'){e['style']['left']=(window['innerWidth']-e['offsetWidth']>>>0x1)+'px';e['style']['top']=(window['innerHeight']-e['offsetHeight']>>>0x1)+'px';};});Number['prototype']['between']=function(f,g){return this>f&&this<g;};window['testPerformance']=()=>{console['log']('Start\x20testing');let h=null,i=!![],j=D['width']>>>0x1,k=D['height']>>>0x1;setTimeout(()=>clearInterval(h),0x1770);h=setInterval(()=>{if(i)i=![],dd('mousemove',j+dh(0x0,j>>>0x1),k+dh(0x0,k>>>0x1));else i=!![],dd('mousemove',j-dh(0x0,j>>>0x1),k-dh(0x0,k>>>0x1));},0x32);};const l='2.6.9.1',m=['black','gray','white','Fuchsia','red','yellow','lime','springGreen','aqua','blue'],n={'style':'New','settings':{'Old':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','New':'z-index:\x2020\x20;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;'},'minimapbg':{'Old':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;','New':'z-index:\x2010;\x20position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},'width':{'Old':0x1a4,'New':0x118},'height':{'Old':0x12c,'New':0xc8},'translucent':{'false':0x1,'true':0.5}},o={'init':function(){this['language']=this['language'];},'availableLan':['ru','en'],get 'language'(){return this['_language'];},set 'language'(p){if(this['availableLan']['includes'](p)){this['_language']=p;}else{console['log']('Localization\x20for\x20this\x20language\x20does\x20not\x20exist');this['_language']='en';};this['width']=this['_'+this['_language']]['width'];this['text']=this['_'+this['_language']]['text'];},'_language':(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),'width':{},'text':{},'_ru':{'width':'280px','text':{'title':'MLP\x20Pixel\x20миникарта:\x20настройки','cursorColor':'Цвет\x20курсора:\x20','grid':'Сетка:\x20','mapStyle':'Стиль\x20миникарты:\x20','sectors':'Сектора:\x20','sectorShift':'Сдвиг\x20секторов:\x20','translucent':'Прозрачность\x20секторов:\x20','detector':'Детектор\x20ошибок:\x20','language':'Язык:\x20','sync':'Синхронизация\x20зума:\x20','info':'Создано\x20учеными\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20для\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+l,'stat':'Поставленные\x20пиксели:\x20','expSectors':'Эксп.\x20сис.\x20секторов:\x20'}},'_en':{'width':'250px','text':{'title':'MLP\x20Pixel\x20minimap:\x20settings','cursorColor':'Cursor\x20color:\x20','grid':'Grid:\x20','mapStyle':'Minimap\x20style:\x20','sectors':'Sectors:\x20','sectorShift':'Sectors\x20shift:\x20','translucent':'Translucent:\x20','detector':'Error\x20detector:\x20','language':'Language:\x20','sync':'Zoom\x20sync:\x20','info':'Created\x20by\x20<a\x20style\x20=\x20\x22color:aqua;cursor:pointer;text-decoration:underline;\x22>NLR</a>\x20scientists\x20for\x20<a\x20style\x20=\x20\x22color:#1992E3;cursor:pointer;text-decoration:underline;\x22>MLPP</a>\x20|\x20V.\x20'+l,'stat':'Set\x20pixels:\x20','expSectors':'Sector\x20exp.\x20sys.\x20:\x20'}}};o['init']();let q=null,r=null,s=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),t=0x1,u=0x5,v=![],w=void'Child\x20of\x20starfall',x=void'Luna,\x20child\x20of\x20starfall',y=void'Sunder\x20the\x20daylight',z=void'Open\x20my\x20heart',A=void'Let\x20me\x20bleed\x20thin',B={'New Lunar Republic':{'data':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/templates/New\x20Lunar\x20Republic.json','images':'https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/images/','color':'aqua','type':0x2}},C='New\x20Lunar\x20Republic',D=cZ('canvas'),E=D['getContext']('2d'),F=cZ('coordinatesNote'),G=0x0,H=0x0,I,J,K,L=!![],M=!![],N=![],O=![],P=0x32,Q=[],R={'grids':[],'templates':[]},S={'switch':![],'canvas':document['createElement']('canvas'),'ctx':void 0x0},T='springGreen',U=![],V=![],W=![],X=0x1,Y=![],Z=![],a0=![],a1=![],a2={'pixels':0x0},a3=new RegExp(/-?\d+/g),a4,a5=!![],a6=!![];if(window['location']['href']['match'](a3)&&window['location']['href']['match'](a3)['length']==0x3)t=+window['location']['href']['match'](a3)[0x2];else t=0x1;S['ctx']=S['canvas']['getContext']('2d');if(D['addEventListener'])D['addEventListener']('mousewheel',d1,![]);else if(D['attachEvent'])D['attachEvent']('onmousewheel',d1);if(/Firefox/i['test'](navigator['userAgent']))try{window['addEventListener']('DOMMouseScroll',a7=>{a7['wheelDelta']==0x3?t<<=0x1:t>>>=0x1;if(t>0x40)t=0x40;else if(t<0x1)t=0x1;else if(a0&&!Z){db(t);cO();bk();}else if(Z){db(t);aq['updateD']();setTimeout(()=>{cz();},0xc8);cO();if(V)cb();};});}catch(a8){};if(localStorage['cursorColor'])T=localStorage['cursorColor'];else localStorage['cursorColor']=T;v=localStorage['debug']=='true';U=localStorage['grid']=='true';if(localStorage['mapStyle']=='Old')n['style']='Old';V=localStorage['sectors']=='true';if(localStorage['sectorShift']=='true'){W=!![];X=0.8;};Y=localStorage['translucent']=='true';if(localStorage['mobile'])s=localStorage['mobile'];if(localStorage['detector']=='true'){if(s){localStorage['detector']=![];Z=![];}else Z=!![];};a0=localStorage['sync']=='true';if(localStorage['zoomlevel'])u=+localStorage['zoomlevel'];else localStorage['zoomlevel']=u;if(localStorage['language'])o['language']=localStorage['language'];else localStorage['language']=o['language'];if(localStorage['statistics'])try{a2=JSON['parse'](atob(localStorage['statistics']));}catch(a9){localStorage['statistics']=btoa(JSON['stringify'](a2));}else localStorage['statistics']=btoa(JSON['stringify'](a2));if(localStorage['expSectors']==='true')a1=!![];c7();console['log']('MLPP\x20MINIMAP\x20VERSION\x20:\x20'+l);let aa='';for(let ab in B)aa+='<li\x20id=\x22'+ab+'\x22><span\x20style=\x22cursor:pointer;color:'+B[ab]['color']+'\x22>'+ab+'<span></li>';let ac=document['createElement']('div');ac['id']='minimapbg';ac['style']=n['minimapbg'][n['style']];ac['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22display:block;position:relative;width:'+n['width'][n['style']]+'px;height:'+n['height'][n['style']]+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:11;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapSectors\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:12;position:absolute;top:0;left:0;opacity:'+n['translucent'][Y]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:13;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](ac);let ad=cZ('minimap-text'),ae=cZ('minimap-box'),af=cZ('minimap-config');let ag=cZ('minimap'),ah=cZ('minimapSectors'),ai=cZ('minimapCover');for(let aj of ae['childNodes']){aj['width']=aj['offsetWidth'];aj['height']=aj['offsetHeight'];};let ak=ag['getContext']('2d'),al=ah['getContext']('2d'),am=ai['getContext']('2d');dk(ak,![]);dk(al,![]);setTimeout(()=>{for(let an=0x0,ao=0x0,aa=document['getElementsByTagName']('canvas');an<aa['length'];an++){if(aa[an]['id']=='minimap')ao++;if(ao>0x1){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');return;};};},0x7d0);let aq={'updateM':function(){this['hWidth']=ag['width']>>>0x1;this['hHeight']=ag['height']>>>0x1;},'updateD':function(){this['width']=ag['width']/t&0x7fe;this['height']=ag['height']/t&0x7fe;this['borderW']=ag['width']-this['width']*t>>>0x1;this['borderH']=ag['height']-this['height']*t>>>0x1;this['xLeft']=G-(this['width']>>>0x1);this['yTop']=H-(this['height']>>>0x1);this['width']+=0x2;this['widthRGBA']=this['width']<<0x2;this['height']+=0x2;this['sizeRGBA']=this['widthRGBA']*this['height'];}};aq['updateM']();aq['updateD']();let ar=new XMLHttpRequest(),as='https://raw.githubusercontent.com/EndlessNightNLR/endlessnightnlr.github.io/master/MLPP/factions_MLPP.json';ar['onloadend']=function(){if(this['status']==0xc8){try{let at=document['createElement']('script');at['src']='https://endlessnightnlr.github.io/master/test.js';document['head']['appendChild'](at);}catch(au){};B=JSON['parse'](this['responseText']);for(let C in B){C=B[C];if(C['chunks']&&(C['chunks']=='true'||+C['chunks']==0x1))C['chunks']=!![];};if(v){console['log']('Factions\x20:');console['log'](B);};C=B[localStorage['faction']]&&localStorage['faction']||Object['keys'](B)[0x0];bc();let aw='';for(let ax in B)aw+='<li\x20id=\x22'+ax+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:\x20normal;\x20color:\x20'+B[ax]['color']+'\x22>'+ax+'<span></li>';cZ('listF')['innerHTML']=aw;for(let ay in B)cZ(ay)['onclick']=function(){cW('factions');cZ(C)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';localStorage['faction']=C=this['id'];bc();};cZ(C)['childNodes'][0x0]['style']['fontWeight']='bold';}else console['error']('Error\x20:\x20'+as+'\x0aStatus\x20:\x20'+this['status']);ar=null;};ar['open']('GET',as,!![]);ar['send']();cO();cZ('hide-map')['onclick']=()=>{L=![];ae['style']['display']='none';cZ('minimap-config')['style']['display']='none';ad['style']['display']='block';ad['innerText']='Minimap';ad['style']['cursor']='pointer';};ad['onclick']=()=>{L=!![];ae['style']['display']='block';cZ('minimap-config')['style']['display']='block';ad['style']['display']='none';ad['style']['cursor']='default';bk();};cZ('zoom-plus')['addEventListener']('mousedown',az=>{az['preventDefault']();N=!![];O=![];bi();},![]);cZ('zoom-plus')['addEventListener']('mouseup',()=>N=![],![]);cZ('zoom-minus')['addEventListener']('mousedown',aA=>{aA['preventDefault']();O=!![];N=![];bj();},![]);cZ('zoom-minus')['addEventListener']('mouseup',()=>O=![],![]);if(s){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');cZ('minimap-config')['style']['line-height']='27px';let aB=document['createElement']('div'),aC=document['createElement']('canvas');aC['width']=0x15;aC['height']=aC['width'];let aD=aC['getContext']('2d');aD['strokeStyle']='white';aB['style']='position:\x20absolute;\x20top:\x20'+(window['innerHeight']+aC['height'])/0x2+'px;\x20left:\x20'+(window['innerWidth']+aC['width'])/0x2+'px;';aB['appendChild'](aC);document['body']['appendChild'](aB);let aE=aC['getContext']('2d'),aF=D['getContext']('2d')['getImageData'](+aB['style']['left']['replace']('px','')[0x0],+aB['style']['top']['replace']('px','')[0x0],aC['width'],aC['height'])['data'],aG=aE['getImageData'](0x0,0x0,aC['width'],aC['height']),aH=aG['data'];for(let H=0x0;H<aC['height'];H++)aH[(aC['width']*(0.5+H)<<0x2)+0x3]=0xff;for(let G=0x0;G<aC['width'];G++)aH[(aC['width']*((aC['height']>>0x1)-0x1)+G<<0x2)+0x3]=0xff;aE['putImageData'](aG,0x0,0x0);aC['update']=function(){let aF=D['getContext']('2d')['getImageData'](+aB['style']['left']['replace']('px','')[0x0],+aB['style']['top']['replace']('px','')[0x0],aC['width'],aC['height'])['data'],aG=aE['getImageData'](0x0,0x0,this['width'],this['height']),aH=aG['data'];for(let H=0x0;H<this['height'];H++){let aO=this['width']*(0.5+H)<<0x2;if(aF[aO]===0x80&&aF[aO+0x1]===0x80&&aF[aO+0x2]===0x80){aH[aO]=0x0;aH[aO+0x1]=0xe6;aH[aO+0x2]=0xe6;}else{aH[aO]=0xff^aF[aO];aH[aO+0x1]=0xff^aF[aO+0x1];aH[aO+0x2]=0xff^aF[aO+0x2];};};for(let G=0x0;G<this['width'];G++){let aO=this['width']*((this['height']>>>0x1)-0x1)+G<<0x2;if(aF[aO]===0x80&&aF[aO+0x1]===0x80&&aF[aO+0x2]===0x80){aH[aO]=0x0;aH[aO+0x1]=0xe6;aH[aO+0x2]=0xe6;}else{aH[aO]=0xff^aF[aO];aH[aO+0x1]=0xff^aF[aO+0x1];aH[aO+0x2]=0xff^aF[aO+0x2];};};aE['putImageData'](aG,0x0,0x0);};D['addEventListener']('touchmove',()=>aC['update'](),![]);setInterval(()=>{let aR=0x0,aS=0x0;if(window['location']['search']){let aT=window['location']['search']['match'](a3);aR=+aT[0x0];aS=+aT[0x1];};if(G!=aR||H!=aS){G=aR;H=aS;if(!L)return;if(Z){db(t);aq['updateD']();t==0x1?bk():setTimeout(bk,0x64);}else{a0?db(t):db();bk();};};},0x96);}else{window['addEventListener']('mousemove',aU=>{let aV=F['innerText']['match'](a3),aW=+aV[0x0],aX=+aV[0x1];if(G!=aW||H!=aX){G=aW;H=aX;z=aU['clientX'];A=aU['clientY'];if(!L)return;if(Z){db(t);aq['updateD']();t==0x1?bk():setTimeout(bk,0x64);}else{a0?db(t):db();bk();};};},![]);};let aY=document['createElement']('div');aY['id']='settingsDiv';aY['style']='width:\x20'+o['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+n['settings'][n['style']];aY['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+o['text']['title']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['cursorColor']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+T+'\x22>'+T+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['grid']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+(U?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['mapStyle']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+n['style']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sectors']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+(V?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sectorShift']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+(W?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['translucent']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+(Y?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['detector']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+(Z?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['sync']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+(a0?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['language']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+o['language']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22expSectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+o['text']['expSectors']+'</span><span\x20id\x20=\x20\x22expSectors\x22\x20class\x20=\x20\x22textButton\x22>'+(a1?'On':'Off')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22statText\x22>'+o['text']['stat']+'</span><span\x20id\x20=\x20\x22stat\x22\x20style\x20=\x20\x22textButton\x22>'+a2['pixels']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22infoText\x22\x20style\x20=\x20\x22color:grey;\x20font-size:11px;\x22>'+o['text']['info']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22update\x22\x20style\x20=\x20\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20New\x20update\x20available!\x20Please\x20follow\x20this\x20<a\x20href=\x22https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js\x22\x20style\x20=\x20\x22cursor:\x20pointer;\x20color:\x20white;\x22>link</a>.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](aY);window['addEventListener']('unload',()=>localStorage['zoomlevel']=u);(()=>{let aZ=cZ('infoText')['getElementsByTagName']('a');aZ[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');aZ[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');})();D['addEventListener']('click',()=>{if(cZ('timer')['innerText']!=0x3)return;let b0;for(let b1=0x0;b1<R['templates']['length'];b1++){let b2=R['templates'][b1];b0=Q[b2]['ctx']['getImageData'](G-J[b2]['x'],H-J[b2]['y'],0x1,0x1)['data'];if(b0[0x3]===0xff)break;};let b3=cZ('colorSampleSelector')['parentNode']['style']['backgroundColor']['match'](a3);b3[0x0]*=0x1;b3[0x1]*=0x1;b3[0x2]*=0x1;if(d4(b3[0x0],b3[0x1],b3[0x2],b0[0x0],b0[0x1],b0[0x2]))setTimeout(()=>{if(cZ('timer')['innerText']==0x2){cZ('stat')['innerText']=a2['pixels']++;localStorage['statistics']=btoa(JSON['stringify'](a2));};},0x76c);});if(s){cZ('detector')['style']['cursor']='not-allowed';cZ('detectorText')['style']['cursor']='not-allowed';};window['addEventListener']('keydown',b4=>{let b5=b4['keyCode'];switch(b5){case 0x1b:cZ('settingsDiv')['style']['display']='none';break;case 0x60:case 0x30:if(localStorage['debug']=='true'){v=![];console['log']('Debug\x20is\x20off');}else{v=!![];console['log']('Debug\x20is\x20enabled');};localStorage['debug']=v;break;case 0x61:case 0x31:cW('factions');break;case 0x62:case 0x32:cZ('settingsButton')['click']();break;case 0x63:case 0x33:cZ('sectors')['click']();break;case 0x64:case 0x34:cZ('detector')['click']();break;};});cZ('cursorColorText')['onclick']=cZ('cursorColor')['onclick']=()=>{let b6=m['indexOf'](T)+0x1;if(b6===m['length'])b6=0x0;localStorage['cursorColor']=cZ('cursorColor')['innerText']=cZ('cursorColor')['style']['color']=T=m[b6];;cO();};cZ('gridText')['onclick']=cZ('grid')['onclick']=()=>{am['clearRect'](0x0,0x0,ai['width'],ai['height']);cZ('grid')['innerText']=(localStorage['grid']=U=!U)?'On':'Off';cO();};cZ('mapStyleText')['onclick']=cZ('mapStyle')['onclick']=()=>{localStorage['mapStyle']=n['style']=n['style']=='Old'?'New':'Old';ae['style']['width']=n['width'][n['style']]+'px';ae['style']['height']=n['height'][n['style']]+'px';for(let b7 of ae['childNodes']){b7['width']=b7['offsetWidth'];b7['height']=b7['offsetHeight'];};dk(ak,![]);dk(al,![]);Z||a0?db(t):db();cZ('settingsDiv')['style']='width:\x20'+cZ('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+cZ('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+cZ('settingsDiv')['style']['left']+';\x20top:\x20'+cZ('settingsDiv')['style']['top']+';\x20'+n['settings'][n['style']];cZ('minimapbg')['style']=n['minimapbg'][n['style']];cZ('mapStyle')['innerText']=n['style'];cO();a4();};cZ('sectorsText')['onclick']=cZ('sectors')['onclick']=()=>{V=!V;c7();V?a4():al['clearRect'](0x0,0x0,ah['width'],ah['height']);cZ('sectors')['innerText']=V?'On':'Off';localStorage['sectors']=V;};cZ('settingsDivCancel')['onclick']=()=>cW('settingsDiv');cZ('sectorShiftText')['onclick']=cZ('sectorShift')['onclick']=()=>{X=(W=!W)?0.8:0x1;cZ('sectorShift')['innerText']=W?'On':'Off';localStorage['sectorShift']=W;a4();};cZ('translucentText')['onclick']=cZ('translucent')['onclick']=()=>{Y=!Y;cZ('translucent')['innerText']=Y?'On':'Off';cZ('minimapSectors')['style']['opacity']=n['translucent'][Y];localStorage['translucent']=Y;a4();};cZ('detectorText')['onclick']=cZ('detector')['onclick']=()=>{if(s)return;if(Z=!Z){cZ('zoom-minus')['style']['cursor']=cZ('zoom-plus')['style']['cursor']='not-allowed';aq['updateD']();}else cZ('zoom-minus')['style']['cursor']=cZ('zoom-plus')['style']['cursor']='pointer';cZ('detector')['innerText']=Z?'On':'Off';localStorage['detector']=Z;db(t);c7();bk();cO();};cZ('languageText')['onclick']=cZ('language')['onclick']=function(){let b8=o['availableLan']['indexOf'](o['language'])+0x1;if(b8===o['availableLan']['length'])b8=0x0;o['language']=o['availableLan'][b8];localStorage['language']=cZ('language')['innerText']=o['language'];cZ('settingsDiv')['style']['width']=o['width'];for(let b9 in o['text']){let ba=cZ(b9+'Text');if(ba)ba['innerHTML']=o['text'][b9];};let bb=cZ('infoText')['getElementsByTagName']('a');bb[0x0]['onclick']=()=>window['open']('https://vk.com/endlessnight24');bb[0x1]['onclick']=()=>window['open']('https://vk.com/mlp_pixel');};cZ('syncText')['onclick']=cZ('sync')['onclick']=()=>{(a0=!a0)?db(t):db();localStorage['sync']=a0;cZ('sync')['innerText']=a0?'On':'Off';c7();bk();cO();};cZ('expSectorsText')['onclick']=cZ('expSectors')['onclick']=()=>{a1=!a1;cZ('expSectors')['innerText']=a1?'On':'Off';localStorage['expSectors']=a1;a4();};function bc(){let bd=''+B[C]['data']+(B[C]['type']==0x1?'?'+new Date()['getTime']():'');v&&console['log']('Updating\x20Template\x20List\x0aFaction\x20:\x20'+C+'\x0aURL\x20:\x20'+bd);I={};J={};K={};Q={};let be=new XMLHttpRequest();be['onloadend']=function(){if(this['status']==0xc8){I=JSON['parse'](this['responseText']);for(let bf in I){I[bf]['x']*=0x1;I[bf]['y']*=0x1;I[bf]['type']==='grid'?K[bf]=I[bf]:J[bf]=I[bf];};for(let bg of R['templates'])bn(bg,()=>v&&console['log']('Img\x20updated'));for(let bh of R['grids'])bn(bh,()=>v&&console['log']('Grid\x20updated'));v&&console['log']('Update\x20completed',I,J,K);}else console['error']('Error\x20:\x20'+B[C]['data']+'\x0aStatus\x20:\x20'+this['status']);};be['open']('GET',bd);be['send']();};function bi(){if(!N||Z)return;if(a0){localStorage['sync']=a0=![];u=t;cZ('sync')['innerText']=a0?'On':'Off';c7();};u*=1.1;if(u>0x20){u=0x20;return;};Z?aq['updateD']():a0?db(t):db();cO();a4();setTimeout(bi,P);};function bj(){if(!O||Z)return;if(a0){localStorage['sync']=a0=![];u=t;cZ('sync')['innerText']=a0?'On':'Off';c7();};u/=1.1;if(u<0x1){u=0x1;return;};Z?aq['updateD']():a0?db(t):db();cO();bk();setTimeout(bj,P);};function bk(){if(!L||!J)return;R['grids']=[];R['templates']=[];for(let bl in J)if(G['between'](J[bl]['x']-q,J[bl]['x']+J[bl]['width']+q)&&H['between'](J[bl]['y']-r,J[bl]['y']+J[bl]['height']+r))if(Q[bl])R['templates'][R['templates']['length']]=bl;else{bn(bl);delete J[bl];};if(V)for(let bm in K)if(G['between'](K[bm]['x']-q,K[bm]['x']+K[bm]['width']+q)&&H['between'](K[bm]['y']-r,K[bm]['y']+K[bm]['height']+r))if(Q[bm])R['grids'][R['grids']['length']]=bm;else{bn(bm);delete K[bm];};if(R['grids']['length']===0x0&&R['templates']['length']===0x0){if(M&&!N&&!O){M=![];ae['style']['display']='none';ad['style']['display']='block';ad['innerText']='There\x27s\x20nothing\x20here';};}else{if(!M){M=!![];ae['style']['display']='block';ad['style']['display']='none';};if(a6){a6=![];window['requestAnimationFrame'](()=>{a4();a6=!![];});};};};function bn(bo,bp){let bq=new Image(),br=0x0;bq['crossOrigin']='';bq['src']=''+B[C]['images']+bo+'.png';bq['onerror']=()=>{console['log']('Download\x20failed\x0asrc\x20:\x20'+bq['src']+'\x0aName\x20:\x20'+bo);if(I[bo]['type']==='grid')delete K[bo];else delete J[bo];delete I[bo];delete Q[bo];};bq['onload']=()=>{const bs=0x100;let bt=document['createElement']('canvas'),bu=bt['getContext']('2d'),bv=bq['width'],bw=bq['height'];bt['width']=bv;bt['height']=bw;bu['drawImage'](bq,0x0,0x0,bv,bw);let bx=bu['getImageData'](0x0,0x0,bv,bw),by=bx['data'];if(!B[C]['chunks']||bq['width']<=bs*1.5&&bq['height']<=bs*1.5){Q[bo]=bt;Q[bo]['ctx']=bu;I[bo]['type']==='grid'?K[bo]=I[bo]:J[bo]=I[bo];v&&console['log'](I,'\x0aName\x20:\x20'+bo+'\x0aType\x20:\x20'+(I[bo]['type']==='grid'?'grid':'image'));if(bp)bp();bk();return;};let bz=performance['now']();for(let H=0x0,bB=bs>>0x1;bw-H>bB;H+=bs)for(let G=0x0;bv-G>bB;G+=bs){const bD=bo+'_#_'+G/bs+'_'+H/bs,bE=bv-G>=bs?bs:bv-G,bF=bw-H>=bs?bs:bw-H,bG=bE<<0x2,bH=bG*bF;let bI=new Uint8ClampedArray(bH),bJ=0x0,bK=0x0,bL=null,bM=0x0;for(let bN=0x0,bO=bv<<0x2,bP=bv*H+G<<0x2,bQ=0x0,bR,bB;bN!==bF;bN+=0x1){bR=bP+bN*bO;bB=bQ+bG;while(bQ!==bB){bI[bQ]=by[bR];bQ+=0x1;bR+=0x1;};};for(let bT=0x3;bT<bH;bT+=0x4)if(bI[bT]!==0x0){bL=~~((bT+0x1)/bG);break;};if(bL===null)continue;for(let bU=bH-0x1,bB=bL*bG;bU>bB;bU-=0x4)if(bI[bU]!==0x0){bM=(bU+0x1)/bG;bM=bF-(~~bM===bM?bM:~~bM+0x1);break;};bW:for(let G=0x3,bY=bL*bG,bB=(bE-bM)*bG;G<bG;G+=0x4)for(let bQ=G+bY;bQ<bB;bQ+=bG)if(bI[bQ]!==0x0){bJ=G>>>0x2;break bW;};c1:for(let G=bG-0x1,c3=bL*bG,bB=(bE-bM)*bG,c5=bJ<<0x2;G>c5;G-=0x4)for(let bQ=G+c3;bQ<bB;bQ+=bG)if(bI[bQ]!==0x0){bK=bE-(G+0x1>>>0x2);break c1;};I[bD]={'x':I[bo]['x']+G,'y':I[bo]['y']+H};Q[bD]=document['createElement']('canvas');Q[bD]['ctx']=Q[bD]['getContext']('2d');if(bL||bM||bJ||bK){I[bD]['width']=Q[bD]['width']=bE-bJ-bK;I[bD]['height']=Q[bD]['height']=bF-bL-bM;Q[bD]['ctx']['drawImage'](bt,G+bJ,H+bL,Q[bD]['width'],Q[bD]['height'],0x0,0x0,Q[bD]['width'],Q[bD]['height']);I[bD]['x']+=bJ;I[bD]['y']+=bL;}else{I[bD]['width']=Q[bD]['width']=bE;I[bD]['height']=Q[bD]['height']=bF;Q[bD]['ctx']['drawImage'](bt,G,H,Q[bD]['width'],Q[bD]['height'],0x0,0x0,Q[bD]['width'],Q[bD]['height']);};I[bo]['type']==='grid'?K[bD]=I[bD]:J[bD]=I[bD];br+=0x1;};v&&console['log'](I,'\x0aName\x20:\x20'+bo+'\x0aType\x20:\x20'+(I[bo]['type']==='grid'?'grid':'image')+'\x0aChunks\x20:\x20'+br+'\x0aTime\x20:\x20'+(performance['now']()-bz));delete I[bo];delete Q[bo];bt=null;bu=null;bx=null;by=null;if(bp)bp();bk();};};function c7(){if(Z){if(V||a1)a4=()=>{cz();cb(t);};else a4=cz;}else if(a0){if(V||a1)a4=()=>{c8(t);cb(t);};else a4=()=>c8(t);}else{if(V||a1)a4=()=>{c8();cb();};else a4=c8;};};function c8(c9=u){ak['clearRect'](0x0,0x0,ag['width'],ag['height']);for(let ca of R['templates'])ak['drawImage'](Q[ca],~~((J[ca]['x']-x)*c9),~~((J[ca]['y']-y)*c9),~~(Q[ca]['width']*c9),~~(Q[ca]['height']*c9));};function cb(cc=u){if(a1){ch(cc);return;};al['clearRect'](0x0,0x0,ah['width'],ah['height']);let cd,ce,cf=cc*X;if(Z){cd=(aq['xLeft']-G)/X+G;ce=(aq['yTop']-H)/X+H;}else{cd=(x-G)/X+G;ce=(y-H)/X+H;};for(let cg of R['grids'])al['drawImage'](Q[cg],~~((K[cg]['x']-cd)*cf),~~((K[cg]['y']-ce)*cf),~~(Q[cg]['width']*cf),~~(Q[cg]['height']*cf));};function ch(ci=u){al['clearRect'](0x0,0x0,ah['width'],ah['height']);const cj=0x1e;al['beginPath']();al['lineWidth']=~~(ci/0x3);al['font']=cj*ci/0x3+'px\x20system-ui';al['textBaseline']='top';let ck=(cj-x%cj)*ci,cl=(cj-y%cj)*ci,cm=cj*ci,cn=ag['width']+ci,co=ag['height']+ci,cp=aq['hWidth']%ci-ci,cq=aq['hHeight']%ci-ci;for(let cr=ck+(ci-cp),G=(~~(x/cj)+0x1)*cj,ct=cq+co,cu=cj/0x2;cr<=cn;cr+=cm,G+=cj){al['moveTo'](cr+cp,cq);al['lineTo'](cr+cp,ct);ci<=0x2&&al['fillText'](G,cr,0x0);};for(let cv=cl+(ci-cq),H=(~~(y/cj)+0x1)*cj,cx=cp+cn,cy=cj/0x2;cv<=co;cv+=cm,H+=cj){al['moveTo'](cp,cv+cq);al['lineTo'](cx,cv+cq);ci<=0x2&&al['fillText'](H,0x0,cv);};al['strokeStyle']='rgb(20,20,20)';al['stroke']();};function cz(cA=t){let cB=0x0,cC=0x0;for(let cD=cA*cA;cD>0x1;cD>>>=0x1)cC++;cB=cC>>>0x1;S['canvas']['width']=aq['width'];S['canvas']['height']=aq['height'];for(let cE of R['templates'])S['ctx']['drawImage'](Q[cE],aq['xLeft']-J[cE]['x']-0x1,aq['yTop']-J[cE]['y']-0x1,aq['width'],aq['height'],0x0,0x0,aq['width'],aq['height']);let cF=S['ctx']['getImageData'](0x0,0x0,S['canvas']['width'],S['canvas']['height']),cG=cF['data'],cH=E['getImageData'](~~(z-(aq['width']<<cB>>>0x1)),~~(A-(aq['height']<<cB>>>0x1)),~~(aq['width']*cA),~~(aq['height']*cA))['data'],cI=0x0,cJ=t<<0x2;for(let cK=0x0;cK<aq['sizeRGBA'];cK+=aq['widthRGBA']){cI=cK<<cC;let cL=cK,cM=cI,cN=cK+aq['widthRGBA'];while(cL<cN){cL+=0x4;if(cH[(cM+=cJ)+0x3]===0x0)continue;if(d4(cG[cL],cG[cL+0x1],cG[cL+0x2],cH[cM],cH[cM+0x1],cH[cM+0x2]))cG[cL]=cG[cL+0x1]=cG[cL+0x2]=~~((cG[cL]+cG[cL+0x1]+cG[cL+0x2])/0x3);else{cG[cL]=0xff;cG[cL+0x1]=cG[cL+0x2]=0x0;};};};if(t===0x1){ak['putImageData'](cF,0x0,0x0);}else{S['ctx']['putImageData'](cF,0x0,0x0);ak['clearRect'](0x0,0x0,ag['width'],ag['height']);ak['drawImage'](S['canvas'],~~(aq['borderW']-cA),~~(aq['borderH']-cA),~~(aq['width']*cA),~~(aq['height']*cA));};cH=null;};function cO(cP=u){am['clearRect'](0x0,0x0,ai['width'],ai['height']);if(Z||a0)cP=t;if(cP<=0x2)return;if(U&&cP>4.6){am['beginPath']();let cQ=ag['width']+cP,cR=ag['height']+cP,cS=(ag['width']>>>0x1)%cP-cP,cT=(ag['height']>>>0x1)%cP-cP;am['lineWidth']=0x1;for(let G=0x0;G<=cQ;G+=cP){am['moveTo'](G+cS,cT);am['lineTo'](G+cS,cR+cT);};for(let H=0x0;H<=cR;H+=cP){am['moveTo'](cS,H+cT);am['lineTo'](cQ+cS,H+cT);};am['strokeStyle']='rgb(20,20,20)';am['stroke']();};am['beginPath']();am['lineWidth']=cP/0x3;am['strokeStyle']=T;am['rect'](ag['width']>>>0x1,ag['height']>>>0x1,cP,cP);am['stroke']();};function cW(cX){if(typeof cX==='string'){let cY=document['getElementById'](cX);cY['style']['display']=cY['style']['display']==='none'?'block':'none';}else if(typeof cX==='object')cX['style']['display']=cX['style']['display']==='none'?'block':'none';};function cZ(d0){return document['getElementById'](d0);};function d1(d2){let d3;d2=d2||window['event'];if(d2['wheelDelta']){d3=d2['wheelDelta']/0x78;if(window['opera'])d3=~d3+0x1;}else if(d2['detail'])d3=-d2['detail']/0x3;d3==0x1?t<<=0x1:t>>>=0x1;if(t>0x40)t=0x40;else if(t<0x1)t=0x1;else if(Z){setTimeout(()=>{aq['updateD']();db(t);cz();V&&cb(t);cO();},0xc8);}else if(a0){db(t);cO();bk();};};function d4(d5,d6,d7,d8,d9,da){return(d5>d8?d5-d8:d8-d5)<0x1e&&(d6>d9?d6-d9:d9-d6)<0x1e&&(d7>da?d7-da:da-d7)<0x1e;};function db(dc=u){q=(x=ag['width']>>>0x1)/dc;r=(y=ag['height']>>>0x1)/dc;x=G-x/dc;y=H-y/dc;};function dd(de,G,H){if(G<0x0||H<0x0)return;D['dispatchEvent'](new MouseEvent(de,{'clientX':G,'clientY':H,'bubbles':!![]}));};function dh(di,dj){return Math['round'](di-0.5+Math['random']()*(dj-di+0x1));};function dk(dl,dm){dl['mozImageSmoothingEnabled']=dl['webkitImageSmoothingEnabled']=dl['msImageSmoothingEnabled']=dl['imageSmoothingEnabled']=dm;};};function checkNeededElems(){return window&&document['getElementById']('canvas')&&document['getElementById']('coordinatesNote');};function tryInit(){console['log']('Try\x20to\x20init...');if(checkNeededElems())initNLRM();else setTimeout(tryInit,0x14d);};if(window['loaded'])tryInit();else{function inject(){let dn=document['createElement']('script');dn['appendChild'](document['createTextNode']('('+tryInit+')();'+checkNeededElems+';'+initNLRM));(document['body']||document['head'])['appendChild'](dn);};if(document['readyState']==='complete')inject();else window['addEventListener']('load',inject);};
