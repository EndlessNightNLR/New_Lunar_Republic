// ==UserScript==
// @name         MLPP Minimap
// @description  none
// @match        https://pixelzone.io/*
// @match        http://pixelzone.io/*
// @grant        none
// ==/UserScript==
//
//To the glory of Luna and the New Lunar Republic!
//Improved by the Endless Night
//
var a=['preventDefault','zoom-minus','mouseup','\x20y:','insertAdjacentHTML','afterbegin','<style>#settingsDiv{user-select:none;}#minimapbg{user-select:none;}</style>','createElement','<div\x20id\x20=\x20\x22settingsDiv\x22\x20style\x20=\x20\x22width:250px;display:\x20none;\x20position:\x20absolute;\x20right:\x2050%;\x20bottom:\x2050%;\x22>','<div\x20class=\x22posy\x22\x20style=\x22','.settings[map.style]}\x22>','<a\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>MLP\x20Pixel\x20minimap:\x20settings</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a><div\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22><hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>','Cursor\x20color:\x20<span\x20id\x20=\x20\x22cursorColor\x22style\x20=\x20\x22cursor:pointer;color:','</span>','<br>','Minimap\x20style:\x20<span\x20id\x20=\x20\x22mapStyle\x22\x20style\x20=\x20\x22cursor:pointer;\x22>','Sectors:\x20<span\x20id\x20=\x20\x22sectors\x22\x20style\x20=\x20\x22cursor:pointer;\x22>','<span\x20id\x20=\x20\x22update\x22\x20style\x20=\x20\x22display:\x20none;\x22><hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>New\x20update\x20available!\x20Please\x20follow\x20this\x20<a\x20href=\x22https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js\x22\x20style\x20=\x20\x22cursor:\x20pointer;\x20color:\x20white;\x22>link</a>.</span></div></div><div>','onkeydown','true','debug','Debug\x20is\x20off','Debug\x20is\x20enabled','settingsDiv','indexOf','childNodes','mapbg','minimapbg','innerText','settingsDivCancel','log','own','templates','type','url','templates/data.json','templates/data.json?','getTime','New\x20Lunar\x20Republic','templates/','.json','onreadystatechange','status','width','height','open','send','between','push','length','minimap-box','display','minimap-text','style','There\x27s\x20nothing\x20here.','block','none','\x20\x20\x20\x20Load\x20image\x20','.png','clearRect','grid','drawImage','moveTo','lineTo','strokeStyle','black','stroke','beginPath','lineWidth','getElementById','prototype','min','apply','split','springGreen','Off','New','background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;','background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;','position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;','position:\x20absolute;\x20right:\x200em;\x20top:\x200em;','https://endlessnightnlr.github.io/master/','aqua','canvas','coords','cursorColor','Old','mapStyle','sectors','<li\x20id=\x22','\x22><span\x20Style=\x22cursor:pointer;color:','<span></li>','div','class','post\x20block\x20bc2','<div\x20id=\x22minimapbg\x22\x20style=\x22','<div\x20class=\x22posy\x22\x20id=\x22mapbg\x22\x20style=\x22','<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22></div><div\x20id=\x22minimap-box\x22\x20style=\x22position:\x20relative;width:280px;height:200px\x22><canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:1;position:absolute;top:0;left:0;\x22></canvas><canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:2;position:absolute;top:0;left:0;opacity:0.65;\x22></canvas><canvas\x20id=\x22minimap-board\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:3;position:absolute;top:0;left:0;\x22></canvas><canvas\x20id=\x22minimap-cursor\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:4;position:absolute;top:0;left:0;\x22></canvas></div><div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22><span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF</span>\x20|\x20<span\x20id=\x22follow-mouse\x22\x20style=\x22cursor:pointer;\x22Follow\x20the\x20mouse</span>\x20|\x20Zoom:\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span><div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22display:none\x22><ul\x20id=\x22list\x22\x20style=\x22line-height:20px;text-align:left;\x22>','</ul><div></div></div>','body','appendChild','minimapCover','minimap-board','offsetWidth','offsetHeight','It\x20is\x20not\x20recommended\x20to\x20set\x20the\x20height\x20or\x20width\x20of\x20the\x20minimap\x20to\x20an\x20odd\x20one!','getContext','mozImageSmoothingEnabled','webkitImageSmoothingEnabled','msImageSmoothingEnabled','imageSmoothingEnabled','readyState','parse','responseText','faction','list','color','innerHTML','$jscomp$loop$prop$name$2$7','onclick','settings','GET','https://endlessnightnlr.github.io/master/MLPP/factions_MLPP.json','update','auto','https://endlessnightnlr.github.io/master/MLPP/version','hide-map','minimap-config','Minimap','pointer','cursor','default','zoom-plus','addEventListener','mousedown'];(function(c,d){var e=function(f){while(--f){c['push'](c['shift']());}};var g=function(){var h={'data':{'key':'cookie','value':'timeout'},'setCookie':function(i,j,k,l){l=l||{};var m=j+'='+k;var n=0x0;for(var n=0x0,p=i['length'];n<p;n++){var q=i[n];m+=';\x20'+q;var r=i[q];i['push'](r);p=i['length'];if(r!==!![]){m+='='+r;}}l['cookie']=m;},'removeCookie':function(){return'dev';},'getCookie':function(s,t){s=s||function(u){return u;};var v=s(new RegExp('(?:^|;\x20)'+t['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var w=function(x,y){x(++y);};w(e,d);return v?decodeURIComponent(v[0x1]):undefined;}};var z=function(){var A=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return A['test'](h['removeCookie']['toString']());};h['updateCookie']=z;var B='';var C=h['updateCookie']();if(!C){h['setCookie'](['*'],'counter',0x1);}else if(C){B=h['getCookie'](null,'counter');}else{h['removeCookie']();}};g();}(a,0xa7));var b=function(c,d){c=c-0x0;var e=a[c];return e;};(function(){var c=function(){var c=!![];return function(d,e){var f=c?function(){if(e){var g=e['apply'](d,arguments);e=null;return g;}}:function(){};c=![];return f;};}();function d(){P&&console[b('0x0')]('Updating\x20Template\x20List');var e=new XMLHttpRequest(),f=void 0x0;f=b('0x1')==U[V][b('0x2')]?0x2==U[V][b('0x3')]?U[V][b('0x4')]+b('0x5'):U[V][b('0x4')]+b('0x6')+new Date()[b('0x7')]():b('0x8')==V?U[b('0x8')][b('0x4')]+b('0x5'):U[b('0x8')][b('0x4')]+b('0x9')+V+b('0xa');e[b('0xb')]=function(){if(0x4==this['readyState']&&0xc8==this[b('0xc')]){a2=JSON['parse'](this['responseText']);for(var e in a2)a2[e]['x']=parseInt(a2[e]['x']),a2[e]['y']=parseInt(a2[e]['y']),a2[e][b('0xd')]=parseInt(a2[e]['width']),a2[e][b('0xe')]=parseInt(a2[e][b('0xe')]);}};e[b('0xf')]('GET',f,!0x0);e[b('0x10')]();P&&console[b('0x0')]('Refresh\x20got\x20forced.');a7=[];j();setTimeout(d,0xea60);}function h(){a5&&(a3*=1.1,0x2d<a3?a3=0x2d:('On'==N&&u(),A(),j(),setTimeout(h,0x32)));}function i(){a6&&(a3/=1.1,0x1>a3?a3=0x1:('On'==N&&u(),A(),j(),setTimeout(i,0x32)));}function j(){if(a4&&null!=a2){a8=[];for(var k in a2){var l=a2[k]['x'],m=a2[k]['y'];Y[b('0x11')](l-0x32,l+a2[k][b('0xd')]+0x32)&&Z[b('0x11')](m-0x32,m+a2[k][b('0xe')]+0x32)&&a8[b('0x12')](k);}if(0x0==a8[b('0x13')])0x0==a5&&0x0==a6&&(H(b('0x14'))['style'][b('0x15')]='none',H(b('0x16'))[b('0x17')][b('0x15')]='block',H(b('0x16'))['innerHTML']=b('0x18'));else{H('minimap-box')[b('0x17')][b('0x15')]=b('0x19');H(b('0x16'))[b('0x17')][b('0x15')]=b('0x1a');for(k=0x0;k<a8[b('0x13')];k++)null==a7[a8[k]]&&(l=a8[k],P&&console[b('0x0')](b('0x1b')+l),a7[l]=new Image(),a7[l]['src']=U[V][b('0x4')]+'images/'+l+b('0x1c'));n();}}}function n(){af[b('0x1d')](0x0,0x0,ab[b('0xd')],ab[b('0xe')]);'On'==O&&ag['clearRect'](0x0,0x0,ac['width'],ac[b('0xe')]);var o=(ab[b('0xd')]>>>0x1)/a3,p=(ab[b('0xe')]>>>0x1)/a3,q=Y-o/0.8,r=Z-p/0.8;o=Y-o;p=Z-p;for(var s=0x0;s<a8['length'];s++){var t=a8[s];b('0x1e')!=a2[a8[s]][b('0x3')]?af[b('0x1f')](a7[t],(a2[t]['x']-o)*a3,(a2[t]['y']-p)*a3,a3*a7[t][b('0xd')],a3*a7[t][b('0xe')]):'On'==O&&ag['drawImage'](a7[t],(a2[t]['x']-q)*a3*0.8,(a2[t]['y']-r)*a3*0.8,0.8*a3*a7[t][b('0xd')],0.8*a3*a7[t][b('0xe')]);}}function u(){if(!(4.6>=a3)){ah[b('0x1d')](0x0,0x0,ad[b('0xd')],ad[b('0xe')]);ah['beginPath']();for(var v=ad[b('0xd')]+a3,w=ad[b('0xe')]+a3,x=(ab[b('0xd')]>>>0x1)%a3-a3,y=(ab[b('0xe')]>>>0x1)%a3-a3,z=0x0;z<=v;z+=a3)ah[b('0x20')](z+x,y),ah['lineTo'](z+x,w+y);for(z=0x0;z<=w;z+=a3)ah[b('0x20')](x,z+y),ah[b('0x21')](v+x,z+y);ah[b('0x22')]=b('0x23');ah[b('0x24')]();}}function A(){var B=Y-(ab[b('0xd')]>>>0x1)/a3,C=Y+(ab[b('0xd')]>>>0x1)/a3,D=Z-(ab['height']>>>0x1)/a3,E=Z+(ab[b('0xe')]>>>0x1)/a3;ai[b('0x1d')](0x0,0x0,ae[b('0xd')],ae[b('0xe')]);a0<B||a0>C||a1<D||a1>E||(ai[b('0x25')](),ai[b('0x26')]=a3/0x3,ai[b('0x22')]=M,ai['rect'](a3*(a0-B),a3*(a1-D),a3,a3),ai[b('0x24')]());}function F(G){G=document[b('0x27')](G);G[b('0x17')][b('0x15')]=b('0x1a')==G[b('0x17')]['display']?b('0x19'):b('0x1a');}function H(I){var aw=c(this,function(){var c=function(){return'\x64\x65\x76';},d=function(){return'\x77\x69\x6e\x64\x6f\x77';};var e=function(){var f=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!f['\x74\x65\x73\x74'](c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var g=function(){var h=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return h['\x74\x65\x73\x74'](d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var i=function(j){var k=~-0x1>>0x1+0xff%0x0;if(j['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===k)){l(j);}};var l=function(m){var n=~-0x4>>0x1+0xff%0x0;if(m['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==n){i(m);}};if(!e()){if(!g()){i('\x69\x6e\x64\u0435\x78\x4f\x66');}else{i('\x69\x6e\x64\x65\x78\x4f\x66');}}else{i('\x69\x6e\x64\u0435\x78\x4f\x66');}});aw();return document['getElementById'](I);}Number[b('0x28')][b('0x11')]=function(J,H){return this>Math[b('0x29')][b('0x2a')](Math,[J,H])&&this<Math['max'][b('0x2a')](Math,[J,H]);};var L='black\x20gray\x20white\x20Fuchsia\x20red\x20yellow\x20lime\x20springGreen\x20aqua\x20blue'[b('0x2b')]('\x20'),M=b('0x2c'),N=b('0x2d'),O=b('0x2d'),P=!0x1,Q=b('0x2e'),R={'Old':b('0x2f'),'New':b('0x30')},S={'Old':b('0x31'),'New':b('0x32')},T={'Old':b('0x33'),'New':b('0x34')},U={'New Lunar Republic':{'url':b('0x35'),'color':b('0x36'),'type':'2'}},V=Object['keys'](U)[0x0],W=H(b('0x37')),X=H(b('0x38')),Y=0x0,Z=0x0,a0=0x0,a1=0x0,a2=null,a3=0xd,a4=!0x0,a5=!0x1,a6=!0x1,a7=[],a8=null;localStorage[b('0x39')]?M=localStorage[b('0x39')]:localStorage[b('0x39')]=M;'true'==localStorage['debug']&&(P=!0x0);'On'==localStorage['grid']&&(N='On');b('0x3a')==localStorage[b('0x3b')]&&(Q=b('0x3a'));'On'==localStorage[b('0x3c')]&&(O='On');var a9='';for(aa in U)a9+=b('0x3d')+aa+b('0x3e')+U[aa]['color']+'\x22>'+aa+b('0x3f');var aa=document['createElement'](b('0x40'));aa[b('0x41')]=b('0x42');aa['innerHTML']=b('0x43')+T[Q]+'\x22>'+(b('0x44')+S[Q]+'\x22>')+b('0x45')+a9+b('0x46');document[b('0x47')][b('0x48')](aa);var ab=H('minimap'),ac=H(b('0x49')),ad=H(b('0x4a')),ae=H('minimap-cursor');ab[b('0xd')]=ab[b('0x4b')];ad[b('0xd')]=ad['offsetWidth'];ae[b('0xd')]=ae[b('0x4b')];ab[b('0xe')]=ab[b('0x4c')];ad[b('0xe')]=ad[b('0x4c')];ae[b('0xe')]=ae[b('0x4c')];ac[b('0xd')]=ab[b('0xd')];ac[b('0xe')]=ab[b('0xe')];0x1!=ab['width']%0x2&&0x1!=ab[b('0xe')]%0x2||alert(b('0x4d'));var af=ab[b('0x4e')]('2d'),ag=ac[b('0x4e')]('2d'),ah=ad[b('0x4e')]('2d'),ai=ae[b('0x4e')]('2d');af[b('0x4f')]=!0x1;af[b('0x50')]=!0x1;af[b('0x51')]=!0x1;af[b('0x52')]=!0x1;ag[b('0x4f')]=!0x1;ag[b('0x50')]=!0x1;ag[b('0x51')]=!0x1;ag[b('0x52')]=!0x1;a9=new XMLHttpRequest();a9[b('0xb')]=function(){if(0x4==this[b('0x53')]&&0xc8==this[b('0xc')]){U=JSON[b('0x54')](this[b('0x55')]);P&&console['log'](this[b('0x55')]);V=null==localStorage[b('0x56')]||void 0x0==U[localStorage[b('0x56')]]?Object['keys'](U)[0x0]:localStorage[b('0x56')];d();var aj=H(b('0x57')),a3='',a2;for(a2 in U)a3+=b('0x3d')+a2+'\x22><span\x20Style=\x22cursor:pointer;color:'+U[a2][b('0x58')]+'\x22>'+a2+b('0x3f');aj[b('0x59')]=a3;aj={};for(var ab in U)aj[b('0x5a')]=ab,H(aj['$jscomp$loop$prop$name$2$7'])[b('0x5b')]=function(aj){return function(){F(b('0x5c'));this['id']!=V&&(V=aj[b('0x5a')],localStorage['faction']=aj['$jscomp$loop$prop$name$2$7'],d());};}(aj),aj={'$jscomp$loop$prop$name$2$7':aj[b('0x5a')]};}};a9[b('0xf')](b('0x5d'),b('0x5e'),!0x0);a9['send']();a9=new XMLHttpRequest();a9[b('0xb')]=function(){0xc8==this[b('0xc')]&&0x4==this[b('0x53')]&&0x2!=this['responseText']&&(F(b('0x5f')),H('settingsDiv')[b('0x17')][b('0xd')]=b('0x60'));};a9['open'](b('0x5d'),b('0x61'),!0x0);a9[b('0x10')]();A();'On'==N&&u();H(b('0x62'))['onclick']=function(){a4=!0x1;H(b('0x14'))[b('0x17')][b('0x15')]=b('0x1a');H(b('0x63'))['style'][b('0x15')]='none';H(b('0x16'))['style'][b('0x15')]='block';H('minimap-text')[b('0x59')]=b('0x64');H(b('0x16'))[b('0x17')]['cursor']=b('0x65');};H(b('0x16'))['onclick']=function(){a4=!0x0;H(b('0x14'))[b('0x17')][b('0x15')]=b('0x19');H(b('0x63'))[b('0x17')][b('0x15')]=b('0x19');H(b('0x16'))[b('0x17')][b('0x15')]=b('0x1a');H(b('0x16'))[b('0x17')][b('0x66')]=b('0x67');j();};H(b('0x68'))[b('0x69')](b('0x6a'),function(ao){ao[b('0x6b')]();a5=!0x0;a6=!0x1;h();},!0x1);H(b('0x6c'))[b('0x69')]('mousedown',function(ap){ap[b('0x6b')]();a6=!0x0;a5=!0x1;i();},!0x1);H(b('0x68'))[b('0x69')](b('0x6d'),function(aq){a5=!0x1;},!0x1);H(b('0x6c'))[b('0x69')](b('0x6d'),function(ar){a6=!0x1;},!0x1);W[b('0x69')](b('0x6d'),function(as){},!0x1);W[b('0x69')]('mousemove',function(at){if(a4){var H=X[b('0x59')][b('0x2b')](b('0x6e'));at=+H[0x0][b('0x2b')]('x:')[0x1];H=+H[0x1];if(a0!=at||a1!=H)a0=at,a1=H,Y=a0,Z=a1,j();}},!0x1);d();document[b('0x47')][b('0x6f')](b('0x70'),b('0x71'));W=document[b('0x72')](b('0x40'));W[b('0x41')]=b('0x42');W['innerHTML']=b('0x73')+(b('0x74')+R[Q]+b('0x75'))+b('0x76')+(b('0x77')+M+'\x22>'+M+b('0x78'))+b('0x79')+('Draw\x20grid:\x20<span\x20id\x20=\x20\x22grid\x22\x20style\x20=\x20\x22cursor:pointer;\x22>'+N+'</span>')+'<br>'+(b('0x7a')+Q+'</span>')+'<br>'+(b('0x7b')+O+'</span>')+b('0x7c');document[b('0x47')][b('0x48')](W);window[b('0x7d')]=function(av){switch(av['keyCode']){case 0x32:F(b('0x5c'));break;case 0x30:b('0x7e')==localStorage[b('0x7f')]?(P=!0x1,console[b('0x0')](b('0x80'))):(P=!0x0,console['log'](b('0x81')));localStorage['debug']=P;break;case 0x33:F(b('0x82'));}};H(b('0x39'))[b('0x5b')]=function(){M=L[b('0x83')](M)+0x1>=L[b('0x13')]?L[0x0]:L[L[b('0x83')](M)+0x1];localStorage[b('0x39')]=M;H(b('0x39'))[b('0x59')]=M;H(b('0x39'))[b('0x17')][b('0x58')]=M;A();};H('grid')[b('0x5b')]=function(){ah[b('0x1d')](0x0,0x0,ad[b('0xd')],ad[b('0xe')]);b('0x2d')==N?(N='On',u()):N=b('0x2d');localStorage[b('0x1e')]=N;H(b('0x1e'))[b('0x59')]=N;};H(b('0x3b'))[b('0x5b')]=function(){Q='Old'==Q?b('0x2e'):b('0x3a');localStorage[b('0x3b')]=Q;H('settingsDiv')[b('0x84')][0x0][b('0x17')]=R[Q];H(b('0x85'))['style']=S[Q];H(b('0x86'))[b('0x17')]=T[Q];H('mapStyle')['innerHTML']=Q;};H(b('0x3c'))[b('0x5b')]=function(){b('0x2d')==O?O='On':(O='Off',ag[b('0x1d')](0x0,0x0,ac[b('0xd')],ac[b('0xe')]));H(b('0x3c'))[b('0x87')]=O;localStorage[b('0x3c')]=O;n();};H(b('0x88'))[b('0x5b')]=function(){F('settingsDiv');};}());