// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.2.0
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       ConsoleBey, Endless Night and MLP Pixel
// @match        https://pixelzone.io/*
// @match        http://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR/endlessnightnlr.github.io
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @grant        none
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
// Improved by the Endless Night and MLP Pixel.
//
var a=['block','clearRect','grid','createElement','canvas','getContext','mozImageSmoothingEnabled','msImageSmoothingEnabled','imageSmoothingEnabled','drawImage','data','getImageData','putImageData','beginPath','moveTo','lineTo','black','stroke','lineWidth','strokeStyle','rect','getElementById','event','wheelDelta','opera','detail','Completed.','remove','body','insertAdjacentHTML','<style>#settingsDiv{user-select:none;}#minimapbg{user-select:none;}</style>','<div\x20style=\x22position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22jss27\x20jss38\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22\x20title=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22jss43\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22trBg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/master/images/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22jss56\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div>','appendChild','settingsButton','onclick','settingsDiv','innerWidth','offsetWidth','top','innerHeight','offsetHeight','prototype','min','apply','max','black\x20gray\x20white\x20Fuchsia\x20red\x20yellow\x20lime\x20springGreen\x20aqua\x20blue','split','New','background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;','position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;','not-allowed','pointer','test','userAgent','springGreen','Off','https://endlessnightnlr.github.io/master/','aqua','keys','coords','selector','location','href','addEventListener','mousewheel','attachEvent','Обработчик\x20не\x20поддерживается','cursorColor','true','debug','Old','mapStyle','sectors','gridShift','translucent','zoomlevel','MLPP_MINIMAP\x20VERSION\x20:\x202.2.0','<li\x20id=\x22','\x22><span\x20Style=\x22cursor:pointer;color:','<span></li>','div','\x22><div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22></div><div\x20id=\x22minimap-box\x22\x20style=\x22position:\x20relative;width:','px;height:','px\x22><canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:1;position:absolute;top:0;left:0;\x22></canvas><canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:2;position:absolute;top:0;left:0;opacity:',';\x22></canvas><canvas\x20id=\x22minimap-board\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:3;position:absolute;top:0;left:0;\x22></canvas><canvas\x20id=\x22minimap-cursor\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:4;position:absolute;top:0;left:0;\x22></canvas></div><div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22><span\x20id=\x22hide-map\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20',';font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20',';font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span><div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22><ul\x20id=\x22list\x22\x20style=\x22line-height:20px;text-align:left;\x22>','</ul></div></div>','minimap','minimapCover','minimap-board','minimap-cursor','childNodes','webkitImageSmoothingEnabled','script','test.js','faction','list','\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:\x20normal;\x20color:\x20','color','factions','font-weight','normal','bold','hide-map','minimap-config','cursor','default','preventDefault','zoom-plus','mouseup','zoom-minus','mousedown','afterbegin','<style>#minimap-config{font-size:\x2020px;}</style>','line-height','22px','white','px;\x20left:\x20','px;','left','update','search','?p=','mousemove','\x20y:','offsetY','borderWidth','marginTop','class','post\x20block\x20bc2','width:\x20250px;\x20height:\x20auto;\x20display:\x20none;\x20position:\x20absolute;\x20','<a\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>MLP\x20Pixel\x20minimap:\x20settings</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a><div\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22><hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>Cursor\x20color:\x20<span\x20id\x20=\x20\x22cursorColor\x22style\x20=\x20\x22cursor:pointer;color:','</span><br>Minimap\x20style:\x20<span\x20id\x20=\x20\x22mapStyle\x22\x20style\x20=\x20\x22cursor:pointer;\x22>','</span><br>Sectors:\x20<span\x20id\x20=\x20\x22sectors\x22\x20style\x20=\x20\x22cursor:pointer;\x22>','</span><br>gridShift:\x20<span\x20id\x20=\x20\x22gridShift\x22\x20style\x20=\x20\x22cursor:pointer;\x22>','</span><br>Translucent\x20grid:\x20<span\x20id\x20=\x20\x22translucent\x22\x20style\x20=\x20\x22cursor:pointer;\x22>','</span><br>Error\x20detector:\x20<span\x20id\x20=\x20\x22detector\x22\x20style\x20=\x20\x22cursor:pointer;\x22>','</span><span\x20id\x20=\x20\x22update\x22\x20style\x20=\x20\x22display:\x20none;\x22><hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>New\x20update\x20available!\x20Please\x20follow\x20this\x20<a\x20href=\x22https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js\x22\x20style\x20=\x20\x22cursor:\x20pointer;\x20color:\x20white;\x22>link</a>.</span></div>','onunload','onkeydown','Debug\x20is\x20off','Debug\x20is\x20enabled','click','indexOf','width:\x20',';\x20height:\x20auto;\x20display:\x20',';\x20top:\x20','settingsDivCancel','detector','log','Updating\x20Template\x20List','type','url','templates/data.json','templates/data.json?','getTime','New\x20Lunar\x20Republic','templates/','.json','onreadystatechange','readyState','status','parse','responseText','width','height','open','GET','send','between','\x20\x20\x20\x20Load\x20image\x20','crossOrigin','src','images/','.png','push','length','minimap-box','style','display','none','minimap-text','innerHTML','There\x27s\x20nothing\x20here.'];(function(c,d){var e=function(f){while(--f){c['push'](c['shift']());}};var g=function(){var h={'data':{'key':'cookie','value':'timeout'},'setCookie':function(i,j,k,l){l=l||{};var m=j+'='+k;var n=0x0;for(var n=0x0,p=i['length'];n<p;n++){var q=i[n];m+=';\x20'+q;var r=i[q];i['push'](r);p=i['length'];if(r!==!![]){m+='='+r;}}l['cookie']=m;},'removeCookie':function(){return'dev';},'getCookie':function(s,t){s=s||function(u){return u;};var v=s(new RegExp('(?:^|;\x20)'+t['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var w=function(x,y){x(++y);};w(e,d);return v?decodeURIComponent(v[0x1]):undefined;}};var z=function(){var A=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return A['test'](h['removeCookie']['toString']());};h['updateCookie']=z;var B='';var C=h['updateCookie']();if(!C){h['setCookie'](['*'],'counter',0x1);}else if(C){B=h['getCookie'](null,'counter');}else{h['removeCookie']();}};g();}(a,0x96));var b=function(c,d){c=c-0x0;var e=a[c];return e;};(function(){var c=function(){var c=!![];return function(d,e){var f=c?function(){if(e){var g=e['apply'](d,arguments);e=null;return g;}}:function(){};c=![];return f;};}();function d(){a9&&console[b('0x0')](b('0x1'));var e=new XMLHttpRequest();var f='own'==ac[ad]['templates']?0x2==ac[ad][b('0x2')]?ac[ad][b('0x3')]+b('0x4'):ac[ad]['url']+b('0x5')+new Date()[b('0x6')]():b('0x7')==ad?ac[b('0x7')]['url']+b('0x4'):ac[b('0x7')]['url']+b('0x8')+ad+b('0x9');e[b('0xa')]=function(){if(0x4==this[b('0xb')]&&0xc8==this[b('0xc')]){aj=JSON[b('0xd')](this[b('0xe')]);for(var e in aj)aj[e]['x']=+aj[e]['x'],aj[e]['y']=+aj[e]['y'],aj[e][b('0xf')]=+aj[e][b('0xf')],aj[e][b('0x10')]=+aj[e][b('0x10')];}};e[b('0x11')](b('0x12'),f,!0x0);e[b('0x13')]();a9&&console[b('0x0')]('Refresh\x20got\x20forced.');an=[];j();}function h(){al&&'On'!=a8&&(a2*=1.1,0x28<a2?a2=0x28:('On'==a5&&w(),D(),j(),setTimeout(h,0x32)));}function i(){am&&'On'!=a8&&(a2/=1.1,0x1>a2?a2=0x1:('On'==a5&&w(),D(),j(),setTimeout(i,0x32)));}function j(){if(ak&&null!=aj){ao=[];for(var k in aj)ah[b('0x14')](aj[k]['x']-0x32,aj[k]['x']+aj[k][b('0xf')]+0x32)&&ai['between'](aj[k]['y']-0x32,aj[k]['y']+aj[k]['height']+0x32)&&(null==an[k]?(a9&&console[b('0x0')](b('0x15')+k),an[k]=new Image(),an[k][b('0x16')]='',an[k][b('0x17')]=ac[ad][b('0x3')]+b('0x18')+k+b('0x19')):ao[b('0x1a')](k));0x0==ao[b('0x1b')]?al||am||(H(b('0x1c'))[b('0x1d')][b('0x1e')]=b('0x1f'),H(b('0x20'))[b('0x1d')][b('0x1e')]='block',H(b('0x20'))[b('0x21')]=b('0x22')):(H(b('0x1c'))[b('0x1d')][b('0x1e')]=b('0x23'),H(b('0x20'))[b('0x1d')][b('0x1e')]=b('0x1f'),l());}}function l(){az[b('0x24')](0x0,0x0,ar[b('0xf')],ar[b('0x10')]);'On'==a6&&aA[b('0x24')](0x0,0x0,as[b('0xf')],as[b('0x10')]);for(var m=(aw-ah)/a1+ah,n=(ay-ai)/a1+ai,o=0x0;o<ao[b('0x1b')];o++){var p=ao[o];if(b('0x25')!=aj[p][b('0x2')])if('On'==a8){var q=document[b('0x26')](b('0x27')),r=q[b('0x28')]('2d');q[b('0xf')]=ar[b('0xf')];q[b('0x10')]=ar[b('0x10')];r[b('0x29')]=!0x1;r['webkitImageSmoothingEnabled']=!0x1;r[b('0x2a')]=!0x1;r[b('0x2b')]=!0x1;r[b('0x2c')](an[p],(aj[p]['x']-aw)*a3,(aj[p]['y']-ay)*a3,a3*an[p][b('0xf')],a3*an[p]['height']);p=r['getImageData'](0x0,0x0,q[b('0xf')],q['height']);q=p[b('0x2d')];r=ae[b('0x28')]('2d')[b('0x2e')](aa-ar[b('0xf')]/0x2,ab-ar['height']/0x2,ar[b('0xf')],ar['height'])['data'];for(var s=0x0;s<ar[b('0x10')];s++)for(var t=s*ar[b('0xf')]<<0x2,u=0x0;u<ar[b('0xf')];u++){var v=t+(u<<0x2);0x0!=q[v+0x3]&&(q[v]!=r[v]&&q[v+0x1]!=r[v+0x1]&&q[v+0x2]!=r[v+0x2]?(q[v]=0xff,q[v+0x1]=0x0,q[v+0x2]=0x0):q[v]=q[v+0x1]=q[v+0x2]=(q[v]+q[v+0x1]+q[v+0x2])/0x3);}az[b('0x2f')](p,0x0,0x0);}else az[b('0x2c')](an[p],(aj[p]['x']-aw)*a2,(aj[p]['y']-ay)*a2,a2*an[p][b('0xf')],a2*an[p][b('0x10')]);else'On'==a6&&('On'==a8?aA[b('0x2c')](an[p],(aj[p]['x']-m)*a3*a1,(aj[p]['y']-n)*a3*a1,a3*a1*an[p]['width'],a3*a1*an[p][b('0x10')]):aA[b('0x2c')](an[p],(aj[p]['x']-m)*a2*a1,(aj[p]['y']-n)*a2*a1,a2*a1*an[p]['width'],a2*a1*an[p][b('0x10')]));}}function w(x){x=void 0x0===x?a2:x;aB[b('0x24')](0x0,0x0,at['width'],at[b('0x10')]);if(!(4.6>=x)){aB[b('0x30')]();for(var y=at['width']+x,z=at[b('0x10')]+x,A=ar[b('0xf')]/0x2%x-x,B=ar[b('0x10')]/0x2%x-x,C=0x0;C<=y;C+=x)aB[b('0x31')](C+A,B),aB[b('0x32')](C+A,z+B);for(C=0x0;C<=z;C+=x)aB[b('0x31')](A,C+B),aB['lineTo'](y+A,C+B);aB['strokeStyle']=b('0x33');aB[b('0x34')]();}}function D(E){E=void 0x0===E?a2:E;aC[b('0x24')](0x0,0x0,au[b('0xf')],au[b('0x10')]);av=(ar[b('0xf')]>>>0x1)/E;ax=(ar[b('0x10')]>>>0x1)/E;aC[b('0x30')]();aC[b('0x35')]=E/0x3;aC[b('0x36')]=a4;aC[b('0x37')](E*av,E*ax,E,E);aC['stroke']();aw=ah-av;ay=ai-ax;av+=ah;ax+=ai;}function F(G){G=document[b('0x38')](G);G[b('0x1d')][b('0x1e')]=b('0x1f')==G[b('0x1d')][b('0x1e')]?'block':b('0x1f');}function H(I){var aZ=c(this,function(){var c=function(){return'\x64\x65\x76';},d=function(){return'\x77\x69\x6e\x64\x6f\x77';};var e=function(){var f=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!f['\x74\x65\x73\x74'](c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var g=function(){var h=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return h['\x74\x65\x73\x74'](d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var i=function(j){var k=~-0x1>>0x1+0xff%0x0;if(j['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===k)){l(j);}};var l=function(m){var n=~-0x4>>0x1+0xff%0x0;if(m['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==n){i(m);}};if(!e()){if(!g()){i('\x69\x6e\x64\u0435\x78\x4f\x66');}else{i('\x69\x6e\x64\x65\x78\x4f\x66');}}else{i('\x69\x6e\x64\u0435\x78\x4f\x66');}});aZ();return document[b('0x38')](I);}function J(K,H){return(K-K%H)/H;}function M(N){N=N||window[b('0x39')];if(N[b('0x3a')]){var H=N['wheelDelta']/0x78;window[b('0x3b')]&&(H=-H);}else N['detail']&&(H=-N[b('0x3c')]/0x3);a3=0x1==H?a3<<0x1:a3>>>0x1;0x40<a3?a3=0x40:0x1>a3&&(a3=0x1);l();'On'==a8&&('On'==a5&&w(a3),D(a3));}console[b('0x0')](b('0x3d'));H('message')[b('0x3e')]();document[b('0x3f')][b('0x40')]('afterbegin',b('0x41'));var P=document[b('0x26')]('div');P['innerHTML']=b('0x42');document[b('0x3f')][b('0x43')](P);H(b('0x44'))[b('0x45')]=function(){F('settingsDiv');b('0x23')==H(b('0x46'))[b('0x1d')][b('0x1e')]&&(H('settingsDiv')[b('0x1d')]['left']=(window[b('0x47')]-H(b('0x46'))[b('0x48')])/0x2+'px',H(b('0x46'))[b('0x1d')][b('0x49')]=(window[b('0x4a')]-H('settingsDiv')[b('0x4b')])/0x2+'px');};Number[b('0x4c')][b('0x14')]=function(Q,H){return this>Math[b('0x4d')][b('0x4e')](Math,[Q,H])&&this<Math[b('0x4f')]['apply'](Math,[Q,H]);};var S=b('0x50')[b('0x51')]('\x20'),T=b('0x52'),U={'Old':'background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','New':b('0x53')},V={'Old':b('0x54'),'New':'position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},W={'Old':0x1a4,'New':0x118},X={'Old':0x12c,'New':0xc8},Y={'Off':0x1,'On':0.5},Z={'On':b('0x55'),'Off':b('0x56')};P=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i[b('0x57')](navigator[b('0x58')]);var a0='Off',a1=0x1,a2=0x5,a3=null,a4=b('0x59'),a5=b('0x5a'),a6=b('0x5a'),a7='Off',a8='Off',a9=!0x1,aa=null,ab=null,ac={'New Lunar Republic':{'url':b('0x5b'),'color':b('0x5c'),'type':'2'}},ad=Object[b('0x5d')](ac)[0x0],ae=H('canvas'),af=H(b('0x5e')),ag=H(b('0x5f'))['style'],ah,ai,aj=null,ak=!0x0,al=!0x1,am=!0x1,an=[],ao=null;a3=0x3==window[b('0x60')][b('0x61')][b('0x51')](',')[b('0x1b')]?+window[b('0x60')][b('0x61')][b('0x51')](',')[0x2]:0x1;ae[b('0x62')]?ae['addEventListener'](b('0x63'),M,!0x1):ae[b('0x64')]?ae[b('0x64')]('onmousewheel',M):alert(b('0x65'));localStorage[b('0x66')]?a4=localStorage[b('0x66')]:localStorage[b('0x66')]=a4;b('0x67')==localStorage[b('0x68')]&&(a9=!0x0);'On'==localStorage[b('0x25')]&&(a5='On',a1=0.8);b('0x69')==localStorage[b('0x6a')]&&(T=b('0x69'));'On'==localStorage[b('0x6b')]&&(a6='On');'On'==localStorage[b('0x6c')]&&(a0='On');'On'==localStorage[b('0x6d')]&&(a7='On');'On'==localStorage['detector']&&(a8='On');localStorage[b('0x6e')]&&(a2=+localStorage['zoomlevel']);console[b('0x0')](b('0x6f'));var ap='';for(aq in ac)ap+=b('0x70')+aq+b('0x71')+ac[aq]['color']+'\x22>'+aq+b('0x72');var aq=document[b('0x26')](b('0x73'));aq[b('0x21')]='<div\x20id=\x22minimapbg\x22\x20style=\x22'+V[T]+b('0x74')+(W[T]+b('0x75')+X[T]+b('0x76'))+(Y[a7]+b('0x77'))+(Z[a8]+b('0x78'))+(Z[a8]+b('0x79'))+ap+b('0x7a');document[b('0x3f')][b('0x43')](aq);var ar=H(b('0x7b')),as=H(b('0x7c')),at=H(b('0x7d')),au=H(b('0x7e'));for(Z=0x0;Z<H(b('0x1c'))[b('0x7f')][b('0x1b')];Z++)ap=H(b('0x1c'))[b('0x7f')][Z],ap[b('0xf')]=ap[b('0x48')],ap[b('0x10')]=ap['offsetHeight'];var av=(ar[b('0xf')]>>>0x1)/a2,aw=-av,ax=(ar['height']>>>0x1)/a2,ay=-ax,az=ar[b('0x28')]('2d'),aA=as[b('0x28')]('2d'),aB=at[b('0x28')]('2d'),aC=au['getContext']('2d');az[b('0x29')]=!0x1;az[b('0x80')]=!0x1;az['msImageSmoothingEnabled']=!0x1;az[b('0x2b')]=!0x1;aA[b('0x29')]=!0x1;aA[b('0x80')]=!0x1;aA[b('0x2a')]=!0x1;aA[b('0x2b')]=!0x1;Z=new XMLHttpRequest();Z[b('0xa')]=function(){if(0x4==this[b('0xb')]&&0xc8==this[b('0xc')]){var aD=document[b('0x26')](b('0x81'));aD[b('0x17')]=ac[ad][b('0x3')]+b('0x82');document[b('0x3f')][b('0x43')](aD);ac=JSON['parse'](this[b('0xe')]);a9&&console['log'](this[b('0xe')]);ad=null==localStorage[b('0x83')]||void 0x0==ac[localStorage[b('0x83')]]?Object[b('0x5d')](ac)[0x0]:localStorage[b('0x83')];d();aD=H(b('0x84'));var aE='',aj;for(aj in ac)aE+=b('0x70')+aj+b('0x85')+ac[aj][b('0x86')]+'\x22>'+aj+b('0x72');aD[b('0x21')]=aE;for(var aG in ac)H(aG)[b('0x45')]=function(){F(b('0x87'));this['id']!=ad&&(H(ad)[b('0x7f')][0x0][b('0x1d')][b('0x88')]=b('0x89'),this[b('0x7f')][0x0]['style'][b('0x88')]=b('0x8a'),ad=this['id'],localStorage[b('0x83')]=this['id'],d());};H(ad)['childNodes'][0x0][b('0x1d')]['font-weight']='bold';}};Z[b('0x11')](b('0x12'),'https://endlessnightnlr.github.io/master/MLPP/factions_MLPP.json',!0x0);Z[b('0x13')]();'On'==a8?D(a3):D();'On'==a5&&w();setInterval(d,0xea60);H(b('0x8b'))['onclick']=function(){ak=!0x1;H(b('0x1c'))['style']['display']='none';H(b('0x8c'))[b('0x1d')][b('0x1e')]=b('0x1f');H(b('0x20'))[b('0x1d')][b('0x1e')]='block';H(b('0x20'))[b('0x21')]='Minimap';H(b('0x20'))[b('0x1d')][b('0x8d')]=b('0x56');};H(b('0x20'))[b('0x45')]=function(){ak=!0x0;H(b('0x1c'))[b('0x1d')]['display']=b('0x23');H(b('0x8c'))[b('0x1d')][b('0x1e')]=b('0x23');H(b('0x20'))[b('0x1d')][b('0x1e')]=b('0x1f');H('minimap-text')[b('0x1d')][b('0x8d')]=b('0x8e');j();};H('zoom-plus')[b('0x62')]('mousedown',function(aH){aH[b('0x8f')]();al=!0x0;am=!0x1;h();},!0x1);H(b('0x90'))[b('0x62')](b('0x91'),function(){al=!0x1;},!0x1);H(b('0x92'))[b('0x62')](b('0x93'),function(aI){aI['preventDefault']();am=!0x0;al=!0x1;i();},!0x1);H(b('0x92'))[b('0x62')](b('0x91'),function(){am=!0x1;},!0x1);if(P){document[b('0x3f')][b('0x40')](b('0x94'),b('0x95'));H(b('0x8c'))[b('0x1d')][b('0x96')]=b('0x97');var aJ=document[b('0x26')](b('0x73')),aK=document[b('0x26')](b('0x27'));aK[b('0xf')]=0x15;aK[b('0x10')]=aK[b('0xf')];aK['getContext']('2d')[b('0x36')]=b('0x98');aJ[b('0x1d')]='position:\x20absolute;\x20top:\x20'+(window[b('0x4a')]+aK[b('0x10')])/0x2+b('0x99')+(window[b('0x47')]+aK[b('0xf')])/0x2+b('0x9a');aJ[b('0x43')](aK);document[b('0x3f')][b('0x43')](aJ);P=aK['getContext']('2d');ae[b('0x28')]('2d')[b('0x2e')](+aJ[b('0x1d')][b('0x9b')]['split']('px')[0x0],+aJ[b('0x1d')][b('0x49')]['split']('px')[0x0],aK[b('0xf')],aK[b('0x10')]);Z=P[b('0x2e')](0x0,0x0,aK[b('0xf')],aK[b('0x10')]);ap=Z['data'];for(aq=0x0;aq<aK[b('0x10')];aq++)ap[(aK[b('0xf')]*(0.5+aq)<<0x2)+0x3]=0xff;for(aq=0x0;aq<aK['width'];aq++)ap[(aK[b('0xf')]*(J(aK[b('0x10')],0x2)-0x1)+aq<<0x2)+0x3]=0xff;P['putImageData'](Z,0x0,0x0);aK[b('0x9c')]=function(){for(var aL=this[b('0x28')]('2d'),H=ae[b('0x28')]('2d')[b('0x2e')](+aJ['style'][b('0x9b')][b('0x51')]('px')[0x0],+aJ[b('0x1d')][b('0x49')]['split']('px')[0x0],aK['width'],aK[b('0x10')])[b('0x2d')],aj=aL['getImageData'](0x0,0x0,this[b('0xf')],this['height']),aO=aj[b('0x2d')],aP=0x0;aP<this[b('0x10')];aP++){var aQ=this[b('0xf')]*(0.5+aP)<<0x2;0x80===H[aQ]&&0x80===H[aQ+0x1]&&0x80===H[aQ+0x2]?(aO[aQ]=0x0,aO[aQ+0x1]=0xe6,aO[aQ+0x2]=0xe6):(aO[aQ]=0xff-H[aQ],aO[aQ+0x1]=0xff-H[aQ+0x1],aO[aQ+0x2]=0xff-H[aQ+0x2]);}for(aP=0x0;aP<this[b('0xf')];aP++)aQ=this[b('0xf')]*((this[b('0x10')]>>>0x1)-0x1)+aP<<0x2,0x80===H[aQ]&&0x80===H[aQ+0x1]&&0x80===H[aQ+0x2]?(aO[aQ]=0x0,aO[aQ+0x1]=0xe6,aO[aQ+0x2]=0xe6):(aO[aQ]=0xff-H[aQ],aO[aQ+0x1]=0xff-H[aQ+0x1],aO[aQ+0x2]=0xff-H[aQ+0x2]);aL[b('0x2f')](aj,0x0,0x0);};ae[b('0x62')]('touchmove',function(){aK['update']();},!0x1);setInterval(function(){if(ak){var H;if(''==window[b('0x60')][b('0x9d')])var aj=H=0x0;else aj=window[b('0x60')][b('0x9d')][b('0x51')](b('0x9e'))[0x1]['split'](','),H=+aj[0x0],aj=+aj[0x1];if(ah!==H||ai!==aj)ah=H,ai=aj,av=(ar[b('0xf')]>>>0x1)/a2,aw=ah-av,ax=(ar[b('0x10')]>>>0x1)/a2,ay=ai-ax,av+=ah,ax+=ai,j();}},0x96);}else window['addEventListener'](b('0x9f'),function(H){if(ak){var aU=af[b('0x21')][b('0x51')](b('0xa0')),aj=+aU[0x0][b('0x51')]('x:')[0x1];aU=+aU[0x1];if(ah!=aj||ai!=aU)ah=aj,ai=aU,'On'==a8?(av=(ar[b('0xf')]>>>0x1)/a3,aw=ah-av,ax=(ar[b('0x10')]>>>0x1)/a3,ay=ai-ax,av+=ah,ax+=ai,0x1==a3?(aa=H['offsetX'],ab=H[b('0xa1')],j()):setTimeout(function(){aa=parseFloat(ag[b('0x9b')])+parseFloat(ag['marginLeft'])+parseFloat(ag[b('0xa2')]);ab=parseFloat(ag[b('0x49')])+parseFloat(ag[b('0xa3')])+parseFloat(ag[b('0xa2')]);j();},0x64)):(av=(ar[b('0xf')]>>>0x1)/a2,aw=ah-av,ax=(ar[b('0x10')]>>>0x1)/a2,ay=ai-ax,av+=ah,ax+=ai,j());}},!0x1);P=document[b('0x26')]('div');P[b('0xa4')]=b('0xa5');P['id']=b('0x46');P['style']=b('0xa6')+U[T];P[b('0x21')]=b('0xa7')+(a4+'\x22>'+a4+'</span><br>Draw\x20grid:\x20<span\x20id\x20=\x20\x22grid\x22\x20style\x20=\x20\x22cursor:pointer;\x22>')+(a5+b('0xa8'))+(T+b('0xa9'))+(a6+b('0xaa'))+(a0+b('0xab'))+(a7+b('0xac'))+(a8+b('0xad'));document[b('0x3f')][b('0x43')](P);window[b('0x62')](b('0xae'),function(){localStorage[b('0x6e')]=a2;});window[b('0xaf')]=function(aW){switch(aW['keyCode']){case 0x1b:H(b('0x46'))[b('0x1d')][b('0x1e')]=b('0x1f');break;case 0x30:b('0x67')==localStorage[b('0x68')]?(a9=!0x1,console[b('0x0')](b('0xb0'))):(a9=!0x0,console[b('0x0')](b('0xb1')));localStorage[b('0x68')]=a9;break;case 0x31:F(b('0x87'));break;case 0x32:F('settingsDiv');b('0x23')==H(b('0x46'))['style']['display']&&(H(b('0x46'))['style'][b('0x9b')]=(window[b('0x47')]-H(b('0x46'))[b('0x48')])/0x2+'px',H(b('0x46'))[b('0x1d')][b('0x49')]=(window[b('0x4a')]-H('settingsDiv')[b('0x4b')])/0x2+'px');break;case 0x33:H(b('0x6b'))[b('0xb2')]();}};H(b('0x66'))[b('0x45')]=function(){a4=S['indexOf'](a4)+0x1>=S['length']?S[0x0]:S[S[b('0xb3')](a4)+0x1];localStorage[b('0x66')]=a4;H(b('0x66'))[b('0x21')]=a4;H(b('0x66'))[b('0x1d')][b('0x86')]=a4;'On'==a8?D(a3):D();};H('grid')[b('0x45')]=function(){aB[b('0x24')](0x0,0x0,at[b('0xf')],at[b('0x10')]);b('0x5a')==a5?(a5='On','On'==a8?w(a3):w()):a5='Off';localStorage[b('0x25')]=a5;H(b('0x25'))[b('0x21')]=a5;};H(b('0x6a'))['onclick']=function(){T='Old'==T?b('0x52'):b('0x69');localStorage[b('0x6a')]=T;H('minimap-box')['style'][b('0xf')]=W[T]+'px';H(b('0x1c'))[b('0x1d')][b('0x10')]=X[T]+'px';for(var aX=0x0;aX<H(b('0x1c'))[b('0x7f')]['length'];aX++){var aj=H(b('0x1c'))['childNodes'][aX];aj[b('0xf')]=aj[b('0x48')];aj[b('0x10')]=aj[b('0x4b')];}az[b('0x29')]=!0x1;az[b('0x80')]=!0x1;az[b('0x2a')]=!0x1;az[b('0x2b')]=!0x1;aA['mozImageSmoothingEnabled']=!0x1;aA[b('0x80')]=!0x1;aA['msImageSmoothingEnabled']=!0x1;aA[b('0x2b')]=!0x1;H(b('0x46'))[b('0x1d')]=b('0xb4')+H(b('0x46'))[b('0x1d')][b('0xf')]+b('0xb5')+H(b('0x46'))['style'][b('0x1e')]+';\x20position:\x20absolute;\x20left:\x20'+H(b('0x46'))[b('0x1d')][b('0x9b')]+b('0xb6')+H(b('0x46'))[b('0x1d')][b('0x49')]+';\x20'+U[T];H('minimapbg')['style']=V[T];H(b('0x6a'))[b('0x21')]=T;D();'On'==a5&&('On'==a8?w(a3):w());l();};H('sectors')[b('0x45')]=function(){b('0x5a')==a6?a6='On':(a6=b('0x5a'),aA[b('0x24')](0x0,0x0,as[b('0xf')],as[b('0x10')]));H(b('0x6b'))['innerText']=a6;localStorage[b('0x6b')]=a6;l();};H(b('0xb7'))['onclick']=function(){F(b('0x46'));};H(b('0x6c'))[b('0x45')]=function(){b('0x5a')==a0?(a0='On',a1=0.8):(a0=b('0x5a'),a1=0x1);H(b('0x6c'))[b('0x21')]=a0;localStorage[b('0x6c')]=a0;l();};H(b('0x6d'))[b('0x45')]=function(){a7=b('0x5a')==a7?'On':'Off';H(b('0x6d'))[b('0x21')]=a7;H(b('0x7c'))[b('0x1d')]['opacity']=Y[a7];localStorage[b('0x6d')]=a7;};H('detector')[b('0x45')]=function(){b('0x5a')==a8?(a8='On',H(b('0x92'))[b('0x1d')][b('0x8d')]=b('0x55'),H(b('0x90'))[b('0x1d')][b('0x8d')]=b('0x55'),D(a3),'On'==a5&&w(a3)):(a8='Off',H(b('0x92'))['style'][b('0x8d')]=b('0x56'),H(b('0x90'))[b('0x1d')][b('0x8d')]=b('0x56'),D(),'On'==a5&&w());H(b('0xb8'))[b('0x21')]=a8;localStorage[b('0xb8')]=a8;l();};}());
