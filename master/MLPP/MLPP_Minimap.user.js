// ==UserScript==
// @name         MLP Pixel Minimap
// @version      2.2.1
// @description  My Little Pony Pixel (MLP Pixel) Minimap for PixelZone.io
// @author       Endless Night
// @include      *://pixelzone.io/*
// @homepage     https://github.com/EndlessNightNLR/endlessnightnlr.github.io
// @updateURL    https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @downloadURL  https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js
// @grant        none
// ==/UserScript==
//
// To the glory of Luna and the New Lunar Republic!
//
var $jscomp=$jscomp||{};$jscomp['scope']={};$jscomp['arrayIteratorImpl']=function(c){var d=0x0;return function(){return d<c['length']?{'done':!0x1,'value':c[d++]}:{'done':!0x0};};};$jscomp['arrayIterator']=function(e){return{'next':$jscomp['arrayIteratorImpl'](e)};};$jscomp['makeIterator']=function(f){var g='undefined'!=typeof Symbol&&Symbol['iterator']&&f[Symbol['iterator']];return g?g['call'](f):$jscomp['arrayIterator'](f);};setTimeout(function(){function h(){aI&&ad('Updating\x20Template\x20List');var i=new XMLHttpRequest(),j=void 0x0;j='own'==aN[aO]['templates']?0x2==aN[aO]['type']?aN[aO]['url']+'templates/data.json':aN[aO]['url']+'templates/data.json?'+new Date()['getTime']():'New\x20Lunar\x20Republic'==aO?aN['New\x20Lunar\x20Republic']['url']+'templates/data.json':aN['New\x20Lunar\x20Republic']['url']+'templates/'+aO+'.json';i['onreadystatechange']=function(){if(0x4==this['readyState']&&0xc8==this['status']){aT=JSON['parse'](this['responseText']);for(var i in aT)aT[i]['x']*=0x1,aT[i]['y']*=0x1,aT[i]['width']*=0x1,aT[i]['height']*=0x1;for(var j in aY['point'])aT[j]&&q(t,function(){return ad('Img\x20updated');});aI&&console['log']('Update\x20completed',aT);}};i['open']('GET',j,!0x0);i['send']();}function m(){aV&&'On'!=aF&&('On'==aG&&(aA=az,aG='Off',localStorage['sync']=aG,ab('sync')['innerText']=aG),aA*=1.1,0x20<aA?aA=0x20:('On'==aF?bc['override']():'On'==aG?aj(az):aj(),a7(),a0(),u(),setTimeout(m,0x32)));}function n(){aW&&'On'!=aF&&('On'==aG&&(aA=az,aG='Off',localStorage['sync']=aG,ab('sync')['innerText']=aG),aA/=1.1,0x1>aA?aA=0x1:('On'==aF?bc['override']():'On'==aG?aj(az):aj(),a7(),a0(),o(),setTimeout(n,0x32)));}function o(){if(aU&&null!=aT){aY['point']=[];for(var p in aT)aR['between'](aT[p]['x']-0x32,aT[p]['x']+aT[p]['width']+0x32)&&aS['between'](aT[p]['y']-0x32,aT[p]['y']+aT[p]['height']+0x32)&&(aX[p]?aY['point']['push'](p):q(p));0x0==aY['point']['length']?aV||aW||(ab('minimap-box')['style']['display']='none',ab('minimap-text')['style']['display']='block',ab('minimap-text')['innerText']='There\x27s\x20nothing\x20here.'):(ab('minimap-box')['style']['display']='block',ab('minimap-text')['style']['display']='none',u());}}function q(r,s){aI&&ad('Load\x20image:\x20'+r);var t=new Image();aX[r]||(aX[r]=t);t['crossOrigin']='';t['src']=aN[aO]['url']+'images/'+r+'.png';t['addEventListener']('load',function(){return aX[r]=t;});0x1<arguments&&t['addEventListener']('load',s);}function u(){'On'==aF?(z(az),'On'==aD&&T(az)):'On'==aG?(v(az),'On'==aD&&T(az)):(v(),'On'==aD&&T());}function v(w){w=void 0x0===w?aA:w;b6['clearRect'](0x0,0x0,b2['width'],b2['height']);for(var x=0x0;x<aY['point']['length'];x++){var y=aY['point'][x];'grid'!=aT[y]['type']&&b6['drawImage'](aX[y],(aT[y]['x']-aJ)*w,(aT[y]['y']-aK)*w,aX[y]['width']*w,aX[y]['height']*w);}}function z(A){A=void 0x0===A?az:A;b6['clearRect'](0x0,0x0,b2['width'],b2['height']);for(var B=document['createElement']('canvas'),C=B['getContext']('2d'),D,E=0x0,F=bc['width']<<0x2,G=Math['pow'](A,0x2);0x1<G;G>>>=0x1)E++;D=E>>>0x1;B['width']=bc['width'];B['height']=bc['height'];for(G=0x0;G<aY['point']['length'];G++){var H=aY['point'][G];(aY['point'][H]||'grid'!=aT[H]['type'])&&C['drawImage'](aX[H],bc['xLeft']-aT[H]['x']-0x1,bc['yTop']-aT[H]['y']-0x1,bc['width'],bc['height'],0x0,0x0,bc['width'],bc['height']);}G=C['getImageData'](0x0,0x0,B['width'],B['height']);H=G['data'];D=aP['getContext']('2d')['getImageData'](aL-(bc['width']<<D>>>0x1),aM-(bc['height']<<D>>>0x1),bc['width']*A,bc['height']*A)['data'];for(var I=0x0,J=0x0,K=bc['height']*F;I<K;I+=F,J=I<<E)for(var L=I,M=I+(bc['width']<<0x2);L<M;L+=0x4,J+=az<<0x2)if(0x0!=D[J+0x3]){var N=H[L],O=H[L+0x1],h=H[L+0x2],Q=D[J],R=D[J+0x1],S=D[J+0x2];0x28>(N>Q?N-Q:Q-N)+(O>R?O-R:R-O)+(h>S?h-S:S-h)?H[L]=H[L+0x1]=H[L+0x2]=(H[L]+H[L+0x1]+H[L+0x2])/0x3:(H[L]=0xff,H[L+0x1]=0x0,H[L+0x2]=0x0);}C['putImageData'](G,0x0,0x0);b6['drawImage'](B,bc['borderW']-A,bc['borderH']-A,bc['width']*A,bc['height']*A);}function T(U){U=void 0x0===U?aA:U;b7['clearRect'](0x0,0x0,b2['width'],b2['height']);if('On'==aF){var V=(bc['xLeft']-aR)/ay+aR;var W=(bc['yTop']-aS)/ay+aS;}else V=(aJ-aR)/ay+aR,W=(aK-aS)/ay+aS;for(var X=0x0;X<aY['point']['length'];X++){var Y=aY['point'][X];if('grid'==aT[Y]['type']){var Z=U*ay;b7['drawImage'](aX[Y],(aT[Y]['x']-V)*Z,(aT[Y]['y']-W)*Z,aX[Y]['width']*Z,aX[Y]['height']*Z);}}}function a0(a1){a1=void 0x0===a1?aA:a1;if('Off'!=aC){if('On'==aF||'On'==aG)a1=az;b8['clearRect'](0x0,0x0,b4['width'],b4['height']);if(!(4.6>=a1)){b8['beginPath']();for(var a2=b4['width']+a1,a3=b4['height']+a1,a4=(b2['width']>>>0x1)%a1-a1,a5=(b2['height']>>>0x1)%a1-a1,a6=0x0;a6<=a2;a6+=a1)b8['moveTo'](a6+a4,a5),b8['lineTo'](a6+a4,a3+a5);for(a6=0x0;a6<=a3;a6+=a1)b8['moveTo'](a4,a6+a5),b8['lineTo'](a2+a4,a6+a5);b8['strokeStyle']='black';b8['stroke']();}}}function a7(a8){a8=void 0x0===a8?aA:a8;if('On'==aF||'On'==aG)a8=az;b9['clearRect'](0x0,0x0,b5['width'],b5['height']);b9['beginPath']();b9['lineWidth']=a8/0x3;b9['strokeStyle']=aB;b9['rect'](b2['width']>>>0x1,b2['height']>>>0x1,a8,a8);b9['stroke']();}function a9(aa){aa=document['getElementById'](aa);aa['style']['display']='none'==aa['style']['display']?'block':'none';}function ab(ac){return document['getElementById'](ac);}function ad(){for(var ae=$jscomp['makeIterator'](arguments),ab=ae['next']();!ab['done'];ab=ae['next']())console['log'](ab['value']);}function ag(ah){ah=ah||window['event'];if(ah['wheelDelta']){var ab=ah['wheelDelta']/0x78;window['opera']&&(ab=~ab+0x1);}else ah['detail']&&(ab=-ah['detail']/0x3);0x1==ab?az<<=0x1:az>>>=0x1;0x40<az?az=0x40:0x1>az?az=0x1:'On'==aG&&'Off'==aF?(aj(az),a0(),a7(),o()):'On'==aF&&(aj(az),setTimeout(function(){bc['override']();z();},0xc8),a0(az),a7(az),'On'==aD&&T());}function aj(ak){ak=void 0x0===ak?aA:ak;aJ=aR-(b2['width']>>>0x1)/ak;aK=aS-(b2['height']>>>0x1)/ak;}ab('timer')['style']['z-index']=0x5;ab('message')['remove']();var al=document['createElement']('link');al['rel']='stylesheet';al['href']='https://endlessnightnlr.github.io/master/MLPP/style.css';document['head']['appendChild'](al);al=document['createElement']('div');al['style']='position:\x20absolute;\x20left:\x200px;\x20top:\x2057px;\x20margin:\x20-2px\x200px\x200px\x20-2px;';al['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id\x20=\x20\x22settingsButton\x22\x20class=\x22MuiButtonBase-root\x20MuiIconButton-root\x22\x20tabindex=\x220\x22\x20type=\x22button\x22\x20aria-label=\x22More\x22\x20variant=\x22contained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiIconButton-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tr-bg\x22\x20style=\x22width:\x2025px;\x20height:\x2025px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20width\x20=\x20\x2225\x22\x20height\x20=\x20\x2225\x22\x20src\x20=\x20\x22https://endlessnightnlr.github.io/master/MLPP/gear.png\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</img>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22MuiTouchRipple-root\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';document['body']['appendChild'](al);ab('settingsButton')['onclick']=function(){a9('settingsDiv');'block'==ab('settingsDiv')['style']['display']&&(ab('settingsDiv')['style']['left']=(window['innerWidth']-ab('settingsDiv')['offsetWidth']>>>0x1)+'px',ab('settingsDiv')['style']['top']=(window['innerHeight']-ab('settingsDiv')['offsetHeight']>>>0x1)+'px');};Number['prototype']['between']=function(am,ab){return this>am&&this<ab;};var ao='black\x20gray\x20white\x20Fuchsia\x20red\x20yellow\x20lime\x20springGreen\x20aqua\x20blue'['split']('\x20'),ap='New',aq={'Old':'background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x2021px;\x20padding:\x206px;','New':'background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x205px;'},ar={'Old':'position:\x20absolute;\x20right:\x200.5em;\x20bottom:\x204.75em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.75);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:10px;\x20padding:\x206px;','New':'position:\x20absolute;\x20right:\x200em;\x20top:\x200em;\x20background-color:\x20rgba(0,\x200,\x200,\x200.90);\x20color:\x20rgb(250,\x20250,\x20250);\x20text-align:\x20center;\x20line-height:\x2042px;\x20vertical-align:\x20middle;\x20width:\x20auto;\x20height:\x20auto;\x20border-radius:\x201px;\x20padding:\x201px;\x20padding-left:\x201px;'},as={'Old':0x1a4,'New':0x118},at={'Old':0x12c,'New':0xc8},au={'Off':0x1,'On':0.5},av={'ru':{'width':'280px','title':{'filling':'MLP\x20Pixel\x20миникарта:\x20настройки'},'cursorColor':{'filling':'Цвет\x20курсора:\x20','On':'On','Off':'Off'},'grid':{'filling':'Сетка:\x20','On':'On','Off':'Off'},'mapStyle':{'filling':'Стиль\x20миникарты:\x20','New':'New','Old':'Old'},'sectors':{'filling':'Сектора:\x20','On':'On','Off':'Off'},'sectorShift':{'filling':'Сдвиг\x20секторов:\x20','On':'On','Off':'Off'},'translucent':{'filling':'Прозрачность\x20секторов:\x20','On':'On','Off':'Off'},'detector':{'filling':'Детектор\x20ошибок:\x20','On':'On','Off':'Off'},'language':{'filling':'Язык:\x20'},'sync':{'filling':'Синхронизация\x20зума:\x20'}},'en':{'width':'250px','title':{'filling':'MLP\x20Pixel\x20minimap:\x20settings'},'cursorColor':{'filling':'Cursor\x20color:\x20','On':'On','Off':'Off'},'grid':{'filling':'Grid:\x20','On':'On','Off':'Off'},'mapStyle':{'filling':'Minimap\x20style:\x20','New':'New','Old':'Old'},'sectors':{'filling':'Sectors:\x20','On':'On','Off':'Off'},'sectorShift':{'filling':'Sectors\x20shift:\x20','On':'On','Off':'Off'},'translucent':{'filling':'Translucent:\x20','On':'On','Off':'Off'},'detector':{'filling':'Error\x20detector:\x20','On':'On','Off':'Off'},'language':{'filling':'Language:\x20'},'sync':{'filling':'Zoom\x20sync:\x20'}}},aw=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i['test'](navigator['userAgent']),ax='Off',ay=0x1,az=0x1,aA=0x5,aB='springGreen',aC='Off',aD='Off',aE='Off',aF='Off',aG='Off',aH=(window['navigator']['language']||window['navigator']['systemLanguage']||window['navigator']['userLanguage'])['substr'](0x0,0x2)['toLowerCase'](),aI=!0x1,aJ=void 0x0,aK=void 0x0,aL=void 0x0,aM=void 0x0,aN={'New Lunar Republic':{'url':'https://endlessnightnlr.github.io/master/','color':'aqua','type':'2'}},aO=Object['keys'](aN)[0x0],aP=ab('canvas'),aQ=ab('coordinatesNote'),aR=0x0,aS=0x0,aT=null,aU=!0x0,aV=!0x1,aW=!0x1,aX={},aY={'point':[]},aZ=new RegExp(/-?\d+/g);az=window['location']['href']['match'](aZ)&&0x3==window['location']['href']['match'](aZ)['length']?+window['location']['href']['match'](aZ)[0x2]:0x1;aP['addEventListener']?aP['addEventListener']('mousewheel',ag,!0x1):aP['attachEvent']&&aP['attachEvent']('onmousewheel',ag);/Firefox/i['test'](navigator['userAgent'])&&window['addEventListener']('DOMMouseScroll',function(b0){0x3==b0['wheelDelta']?az<<=0x1:az>>>=0x1;0x40<az?az=0x40:0x1>az?az=0x1:'On'==aG&&'Off'==aF?(aj(az),a0(),a7(),o()):'On'==aF&&(aj(az),setTimeout(function(){bc['override']();z();},0xc8),a0(az),a7(az),'On'==aD&&T());});localStorage['cursorColor']?aB=localStorage['cursorColor']:localStorage['cursorColor']=aB;'true'==localStorage['debug']&&(aI=!0x0);'On'==localStorage['grid']&&(aC='On');'Old'==localStorage['mapStyle']&&(ap='Old');'On'==localStorage['sectors']&&(aD='On');'On'==localStorage['sectorShift']&&(ax='On',ay=0.8);'On'==localStorage['translucent']&&(aE='On');localStorage['mobile']&&(aw=localStorage['mobile']);'On'==localStorage['detector']&&(aF=aw?localStorage['detector']='Off':'On');'On'==localStorage['sync']&&(aG='On');localStorage['zoomlevel']&&(aA=+localStorage['zoomlevel']);localStorage['language']&&(aH=localStorage['language']);ad('MLPP\x20MINIMAP\x20VERSION\x20:\x202.2.3');for(var b1 in aN);b1=document['createElement']('div');b1['id']='minimapbg';b1['style']=ar[ap];b1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-text\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-box\x22\x20style=\x22position:\x20relative;width:'+as[ap]+'px;height:'+at[ap]+'px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:1;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimapCover\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:2;position:absolute;top:0;left:0;opacity:'+au[aE]+';\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap-board\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:3;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22minimap-cursor\x22\x20style=\x22width:\x20100%;\x20height:\x20100%;z-index:4;position:absolute;top:0;left:0;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22minimap-config\x22\x20style=\x22line-height:15px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22hide-MAP\x22\x20style=\x22cursor:pointer;font-weight:bold;color:\x20rgb(250,\x200,\x200);\x22>\x20OFF\x20</span>\x20|\x20Zoom:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-plus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x20100,\x20250);\x22>+</span>\x20\x20/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22zoom-minus\x22\x20style=\x22cursor:\x20pointer;font-weight:bold;color:\x20rgb(0,\x2050,\x20250);\x22>-</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22factions\x22\x20style\x20=\x20\x22display:none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20id=\x22listF\x22\x20style=\x22line-height:20px;text-align:left;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';document['body']['appendChild'](b1);var b2=ab('minimap'),b3=ab('minimapCover'),b4=ab('minimap-board'),b5=ab('minimap-cursor');for(b1=0x0;b1<ab('minimap-box')['childNodes']['length'];b1++)al=ab('minimap-box')['childNodes'][b1],al['width']=al['offsetWidth'],al['height']=al['offsetHeight'];var b6=b2['getContext']('2d'),b7=b3['getContext']('2d'),b8=b4['getContext']('2d'),b9=b5['getContext']('2d');b6['mozImageSmoothingEnabled']=b7['mozImageSmoothingEnabled']=!0x1;b6['webkitImageSmoothingEnabled']=b7['webkitImageSmoothingEnabled']=!0x1;b6['msImageSmoothingEnabled']=b7['msImageSmoothingEnabled']=!0x1;b6['imageSmoothingEnabled']=b7['imageSmoothingEnabled']=!0x1;setTimeout(function(){for(var ba=0x0,ab=0x0;ba<document['getElementsByTagName']('canvas')['length'];ba++)if('minimap'==document['getElementsByTagName']('canvas')[ba]['id']&&ab++,0x1<ab){alert('Включено\x20два\x20или\x20более\x20скриптов\x20с\x20миникартой.\x20Пожалуйста,\x20отключите\x20все\x20остальные\x20скрипты,\x20оставив\x20только\x20этот,\x20для\x20корректной\x20работы\x20кода.\x0a\x0dTwo\x20or\x20more\x20minimap\x20scripts\x20included.\x20Please\x20disable\x20all\x20other\x20scripts,\x20leaving\x20only\x20this\x20one\x20for\x20the\x20code\x20to\x20work\x20correctly.');break;}},0x7d0);var bc={'override':function(){this['width']=function(bd){return bd&0x1?--bd:bd;}['call'](void 0x0,~~(b2['width']/az));this['height']=function(be){return be&0x1?--be:be;}['call'](void 0x0,~~(b2['height']/az));this['borderW']=b2['width']-this['width']*az>>>0x1;this['borderH']=b2['height']-this['height']*az>>>0x1;this['xRight']=this['width']>>>0x1;this['xLeft']=aR-this['xRight'];this['yBottom']=this['height']>>>0x1;this['yTop']=aS-this['yBottom'];this['xRight']+=aR;this['yBottom']+=aS;this['width']+=0x2;this['height']+=0x2;}};b1=new XMLHttpRequest();b1['onreadystatechange']=function(){if(0x4==this['readyState']&&0xc8==this['status']){var bf=document['createElement']('script');bf['src']=aN[aO]['url']+'test.js';document['head']['appendChild'](bf);aN=JSON['parse'](this['responseText']);aI&&ad(this['responseText']);aO=null==localStorage['faction']||void 0x0==aN[localStorage['faction']]?Object['keys'](aN)[0x0]:localStorage['faction'];h();bf=ab('listF');for(var az in aN)bf['innerHTML']+='<li\x20id=\x22'+az+'\x22><span\x20Style=\x22cursor:pointer;\x20font-weight:\x20normal;\x20color:\x20'+aN[az]['color']+'\x22>'+az+'<span></li>';for(var bh in aN)ab(bh)['onclick']=function(){a9('factions');ab(aO)['childNodes'][0x0]['style']['fontWeight']='normal';this['childNodes'][0x0]['style']['fontWeight']='bold';aO=this['id'];localStorage['faction']=this['id'];h();};ab(aO)['childNodes'][0x0]['style']['font-weight']='bold';}};b1['open']('GET','https://endlessnightnlr.github.io/master/MLPP/factions_MLPP.json',!0x0);b1['send']();a7();'On'==aC&&a0();setInterval(h,0xea60);ab('hide-MAP')['onclick']=function(){aU=!0x1;ab('minimap-box')['style']['display']='none';ab('minimap-config')['style']['display']='none';ab('minimap-text')['style']['display']='block';ab('minimap-text')['innerHTML']='Minimap';ab('minimap-text')['style']['cursor']='pointer';};ab('minimap-text')['onclick']=function(){aU=!0x0;ab('minimap-box')['style']['display']='block';ab('minimap-config')['style']['display']='block';ab('minimap-text')['style']['display']='none';ab('minimap-text')['style']['cursor']='default';o();};ab('zoom-plus')['addEventListener']('mousedown',function(bi){bi['preventDefault']();aV=!0x0;aW=!0x1;m();},!0x1);ab('zoom-plus')['addEventListener']('mouseup',function(){return aV=!0x1;},!0x1);ab('zoom-minus')['addEventListener']('mousedown',function(bj){bj['preventDefault']();aW=!0x0;aV=!0x1;n();},!0x1);ab('zoom-minus')['addEventListener']('mouseup',function(){return aW=!0x1;},!0x1);if(aw){document['body']['insertAdjacentHTML']('afterbegin','<style>#minimap-config{font-size:\x2025px;}</style>');ab('minimap-config')['style']['line-height']='27px';var bk=document['createElement']('div'),bl=document['createElement']('canvas');bl['width']=0x15;bl['height']=bl['width'];bl['getContext']('2d')['strokeStyle']='white';bk['style']='position:\x20absolute;\x20top:\x20'+(window['innerHeight']+bl['height'])/0x2+'px;\x20left:\x20'+(window['innerWidth']+bl['width'])/0x2+'px;';bk['appendChild'](bl);document['body']['appendChild'](bk);b1=bl['getContext']('2d');aP['getContext']('2d')['getImageData'](+bk['style']['left']['replace']('px','')[0x0],+bk['style']['top']['replace']('px','')[0x0],bl['width'],bl['height']);al=b1['getImageData'](0x0,0x0,bl['width'],bl['height']);for(var bm=al['data'],bn=0x0;bn<bl['height'];bn++)bm[(bl['width']*(0.5+bn)<<0x2)+0x3]=0xff;for(bn=0x0;bn<bl['width'];bn++)bm[(bl['width']*(~~(bl['height']/0x2)-0x1)+bn<<0x2)+0x3]=0xff;b1['putImageData'](al,0x0,0x0);bl['update']=function(){for(var bo=this['getContext']('2d'),ab=aP['getContext']('2d')['getImageData'](+bk['style']['left']['replace']('px','')[0x0],+bk['style']['top']['replace']('px','')[0x0],bl['width'],bl['height'])['data'],az=bo['getImageData'](0x0,0x0,this['width'],this['height']),b1=az['data'],av=0x0;av<this['height'];av++){var bt=this['width']*(0.5+av)<<0x2;0x80===ab[bt]&&0x80===ab[bt+0x1]&&0x80===ab[bt+0x2]?(b1[bt]=0x0,b1[bt+0x1]=0xe6,b1[bt+0x2]=0xe6):(b1[bt]=0xff^ab[bt],b1[bt+0x1]=0xff^ab[bt+0x1],b1[bt+0x2]=0xff^ab[bt+0x2]);}for(av=0x0;av<this['width'];av++)bt=this['width']*((this['height']>>>0x1)-0x1)+av<<0x2,0x80===ab[bt]&&0x80===ab[bt+0x1]&&0x80===ab[bt+0x2]?(b1[bt]=0x0,b1[bt+0x1]=0xe6,b1[bt+0x2]=0xe6):(b1[bt]=0xff^ab[bt],b1[bt+0x1]=0xff^ab[bt+0x1],b1[bt+0x2]=0xff^ab[bt+0x2]);bo['putImageData'](az,0x0,0x0);};aP['addEventListener']('touchmove',function(){bl['update']();},!0x1);setInterval(function(){if(aU){var ab=0x0,b1=0x0;window['location']['search']&&(b1=window['location']['search']['match'](aZ),ab=+b1[0x0],b1=+b1[0x1]);if(aR!=ab||aS!=b1)aR=ab,aS=b1,'On'==aF?(aj(az),aL=e['clientX'],aM=e['clientY'],bc['override']()):'On'==aG?aj(az):aj(),o();}},0x96);}else window['addEventListener']('mousemove',function(ab){var bx=aQ['innerText']['match'](aZ),b1=+bx[0x0];bx=+bx[0x1];if(aR!=b1||aS!=bx)aR=b1,aS=bx,aL=ab['clientX'],aM=ab['clientY'],aU&&('On'==aF?(aj(az),bc['override'](),0x1==az?o():setTimeout(o,0x64)):('On'==aG?aj(az):aj(),o()));},!0x1);b1=document['createElement']('div');b1['class']='post\x20block\x20bc2';b1['id']='settingsDiv';b1['style']='width:\x20'+av[aH]['width']+';\x20height:\x20auto;\x20display:\x20none;\x20z-index:\x205;\x20position:\x20absolute;\x20'+aq[ap];b1['innerHTML']='<a\x20id\x20=\x20\x22titleText\x22\x20style\x20=\x20\x22position:\x20absolute;line-height:\x2035px;\x20left:\x205px;\x22>'+av[aH]['title']['filling']+'</a><a\x20id\x20=\x20\x22settingsDivCancel\x22\x20style\x20=\x20\x22position:\x20absolute;\x20right:\x205px;\x20top:\x20-2px;\x20cursor:\x20pointer;\x22>[X]</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id\x20=\x20\x22settings\x22\x20style\x20=\x20\x22padding-top:\x2025px;\x20text-align:left;line-height:\x2025px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22cursorColorText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['cursorColor']['filling']+'</span><span\x20id\x20=\x20\x22cursorColor\x22\x20class\x20=\x20\x22textButton\x22\x20style\x20=\x20\x22color:'+aB+'\x22>'+aB+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22gridText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['grid']['filling']+'</span><span\x20id\x20=\x20\x22grid\x22\x20class\x20=\x20\x22textButton\x22>'+aC+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22mapStyleText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['mapStyle']['filling']+'</span><span\x20id\x20=\x20\x22mapStyle\x22\x20class\x20=\x20\x22textButton\x22>'+ap+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorsText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['sectors']['filling']+'</span><span\x20id\x20=\x20\x22sectors\x22\x20class\x20=\x20\x22textButton\x22>'+aD+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22sectorShiftText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['sectorShift']['filling']+'</span><span\x20id\x20=\x20\x22sectorShift\x22\x20class\x20=\x20\x22textButton\x22>'+ax+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22translucentText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['translucent']['filling']+'</span><span\x20id\x20=\x20\x22translucent\x22\x20class\x20=\x20\x22textButton\x22>'+aE+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22detectorText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['detector']['filling']+'</span><span\x20id\x20=\x20\x22detector\x22\x20class\x20=\x20\x22textButton\x22>'+aF+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22syncText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['sync']['filling']+'</span><span\x20id\x20=\x20\x22sync\x22\x20class\x20=\x20\x22textButton\x22>'+aG+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22languageText\x22\x20class\x20=\x20\x22textButton\x22>'+av[aH]['language']['filling']+'</span><span\x20id\x20=\x20\x22language\x22\x20class\x20=\x20\x22textButton\x22>'+aH+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id\x20=\x20\x22update\x22\x20style\x20=\x20\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20style\x20=\x20\x22border-color:\x20darkGrey;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20New\x20update\x20available!\x20Please\x20follow\x20this\x20<a\x20href=\x22https://endlessnightnlr.github.io/master/MLPP/MLPP_Minimap.user.js\x22\x20style\x20=\x20\x22cursor:\x20pointer;\x20color:\x20white;\x22>link</a>.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';document['body']['appendChild'](b1);window['addEventListener']('unload',function(){return localStorage['zoomlevel']=aA;});aw&&(ab('detector')['style']['cursor']='not-allowed',ab('detectorText')['style']['cursor']='not-allowed');window['onkeydown']=function(bz){switch(bz['keyCode']){case 0x1b:ab('settingsDiv')['style']['display']='none';break;case 0x30:'true'==localStorage['debug']?(aI=!0x1,ad('Debug\x20is\x20off')):(aI=!0x0,ad('Debug\x20is\x20enabled'));localStorage['debug']=aI;break;case 0x31:a9('factions');break;case 0x32:ab('settingsButton')['click']();break;case 0x33:ab('sectors')['click']();break;case 0x34:ab('detector')['click']();}};ab('cursorColorText')['onclick']=ab('cursorColor')['onclick']=function(){aB=ao['indexOf'](aB)>ao['length']?ao[0x0]:ao[ao['indexOf'](aB)+0x1];localStorage['cursorColor']=aB;ab('cursorColor')['innerHTML']=aB;ab('cursorColor')['style']['color']=aB;a7();};ab('gridText')['onclick']=ab('grid')['onclick']=function(){b8['clearRect'](0x0,0x0,b4['width'],b4['height']);aC='Off'==aC?'On':'Off';localStorage['grid']=aC;ab('grid')['innerHTML']=aC;a0();};ab('mapStyleText')['onclick']=ab('mapStyle')['onclick']=function(){ap='Old'==ap?'New':'Old';localStorage['mapStyle']=ap;ab('minimap-box')['style']['width']=as[ap]+'px';ab('minimap-box')['style']['height']=at[ap]+'px';for(var bA=0x0;bA<ab('minimap-box')['childNodes']['length'];bA++){var b1=ab('minimap-box')['childNodes'][bA];b1['width']=b1['offsetWidth'];b1['height']=b1['offsetHeight'];}b6['mozImageSmoothingEnabled']=b7['mozImageSmoothingEnabled']=!0x1;b6['webkitImageSmoothingEnabled']=b7['webkitImageSmoothingEnabled']=!0x1;b6['msImageSmoothingEnabled']=b7['msImageSmoothingEnabled']=!0x1;b6['imageSmoothingEnabled']=b7['imageSmoothingEnabled']=!0x1;'On'==aF||'On'==aG?aj(az):aj();ab('settingsDiv')['style']='width:\x20'+ab('settingsDiv')['style']['width']+';\x20height:\x20auto;\x20display:\x20'+ab('settingsDiv')['style']['display']+';\x20position:\x20absolute;\x20left:\x20'+ab('settingsDiv')['style']['left']+';\x20top:\x20'+ab('settingsDiv')['style']['top']+';\x20'+aq[ap];ab('minimapbg')['style']=ar[ap];ab('mapStyle')['innerHTML']=ap;a7();a0();u();};ab('sectorsText')['onclick']=ab('sectors')['onclick']=function(){'Off'==aD?(aD='On',u()):(aD='Off',b7['clearRect'](0x0,0x0,b3['width'],b3['height']));ab('sectors')['innerText']=aD;localStorage['sectors']=aD;};ab('settingsDivCancel')['onclick']=function(){return a9('settingsDiv');};ab('sectorShiftText')['onclick']=ab('sectorShift')['onclick']=function(){'Off'==ax?(ax='On',ay=0.8):(ax='Off',ay=0x1);ab('sectorShift')['innerHTML']=ax;localStorage['sectorShift']=ax;u();};ab('translucentText')['onclick']=ab('translucent')['onclick']=function(){aE='Off'==aE?'On':'Off';ab('translucent')['innerHTML']=aE;ab('minimapCover')['style']['opacity']=au[aE];localStorage['translucent']=aE;u();};ab('detectorText')['onclick']=ab('detector')['onclick']=function(){aw||('Off'==aF?(ab('zoom-minus')['style']['cursor']=ab('zoom-plus')['style']['cursor']='not-allowed',aF='On',aj(az),bc['override']()):(ab('zoom-minus')['style']['cursor']=ab('zoom-plus')['style']['cursor']='pointer',aF='Off',aj(az)),ab('detector')['innerText']=aF,localStorage['detector']=aF,o(),a0(),a7());};ab('languageText')['onclick']=ab('language')['onclick']=function(){var bC=Object['keys'](av),b1=bC['indexOf'](aH);++b1>=bC['length']&&(b1=0x0);ab('language')['innerText']=aH=bC[b1];localStorage['language']=aH;bC=Object['keys'](av[aH]);ab('settingsDiv')['style']['width']=av[aH]['width'];bC['forEach'](function(bC){ab(bC+'Text')&&('title'!=bC?ab(bC+'Text')['innerText']=av[aH][bC]['filling']:ab('titleText')['innerText']=av[aH]['title']['filling']);});};ab('syncText')['onclick']=ab('sync')['onclick']=function(){'Off'==aG?(aG='On',aj(az)):(aG='Off',aj());ab('sync')['innerText']=aG;localStorage['sync']=aG;o();a0();a7();};},0x3e8);
//Hi PowerGab
